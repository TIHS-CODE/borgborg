<!-- Hi. If you're reading this then I will assume you know the basic shit already. -->
<!-- ao20250607: Initial Release. -->
<html class="dark">
<head>
	<title>BorgBorg</title>
	<!-- Using Bootstrap for basic UI convenience -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.min.css">
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/ui-darkness/jquery-ui.css">
	<style>
		body{
			background-color: #333;
			color: white;
		}
		.stuck {
			position: sticky; 
			min-height: 100%; 
			top:0px;
		}
		#stickyMenu {
			display: none;
			position: fixed;
			bottom: 1px;
			background-color: rgba(85, 85, 85, 0.75);
			font-size: 2em;
			text-align: center;
			height: 1.5em;
			width: 1.5em;
			padding-top: .25em;
			border-radius: 100%;
			margin-bottom: calc(var(--bs-gutter-x) * .5);
		}
		.form-control{
			background: #333;
			color: #bbb;
			border-color: #555;
		}
		.form-control::placeholder{
			color: #666 !important;
		}
		.wide{
			width: 100%;
			padding-left: 0;
			padding-right: 0;
		}
		.borg-stat::-webkit-outer-spin-button,
		.borg-stat::-webkit-inner-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}
		.grid-cell{
			width: 1.5em !important;
			height: 1.5em !important;
			border-width: 1px;
			border-style: solid;
		}
		.border-indention{
			border-left-width: 2px;
			border-left-style: solid;
			padding-left: .5em;
		}
		.border-indention-r{
			border-right-width: 2px;
			border-right-style: solid;
			padding-right: .5em;
		}
		.border-mute{
			border-width: 1px;
			border-style: solid;
			border-color: #999;
		}
		.border-section{
			/*
			border-width: 1px;
			*/
			border-style: groove;
			border-radius: .5rem;
			padding: .2rem;
			border-color: #bbb;
		}
		.border-q{
			/*
			background: #222;
			*/
			padding: .2rem;
			border-width: 1px;
			border-style: solid;
			border-radius: .5rem .5rem 0 .5rem;
		}
		.border-a{
			/*
			background: #222;
			*/
			padding: .2rem;
			border-width: 1px;
			border-style: solid;
			border-radius: .5rem .5rem .5rem 0;
		}
		.toggleable{
			opacity: .7;
		}
		.o100{
			opacity: 1;
		}
		.prog-select{
			display: inline; 
			width: auto;
		}
		.prog-condition{
			display: inline-block; 
			width: fit-content;
		}
		.txt-fade-50{
			color: rgba(255, 255, 255, 0.5);
		}
		.fsize-11rem{
			font-size: 1.1rem;
		}
		.fsize-12rem{
			font-size: 1.2rem;
		}
		.fsize-13rem{
			font-size: 1.3rem;
		}
		.fsize-14rem{
			font-size: 1.4rem;
		}
		.fsize-15rem{
			font-size: 1.5rem;
		}
	</style>
</head>

<body>
	<!-- Sidebar Menu -->
	<div id="sidebarMenu" class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-dark stuck" style="display: block; float:left;">
		<div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100">
			<div id="/" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
				<h1 class="d-none d-sm-inline">BorgBorg</h1>
			</div>
			<ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
				<li class="nav-item">
					<a href="#" id="menuSectionHome" class="nav-link text-white align-middle px-0">
						<i class="bi-house"></i> <span class="ms-1 d-none d-sm-inline">Home</span>
					</a>
				</li>
				<li>
					<a href="#" id="menuSectionPlay" class="nav-link text-white px-0 align-middle border rounded-3 px-3">
						<i class="bi bi-joystick"></i> <span class="ms-1 d-none d-sm-inline">PLAY</span>
					</a>
				</li>
				<li>
					<a href="#" id="menuSectionBorgs" class="nav-link text-white px-0 align-middle">
						<i class="bi-robot"></i> <span class="ms-1 d-none d-sm-inline">Borgs</span> 
					</a>
				</li>
				<li>
					<a href="#" id="menuSectionPrograms" class="nav-link text-white px-0 align-middle">
						<i class="bi-code-square"></i> <span class="ms-1 d-none d-sm-inline">Programs</span>
					</a>
				</li>
				<li>
					<a href="#" id="menuSectionLevels" class="nav-link text-white px-0 align-middle">
						<i class="bi-map"></i> <span class="ms-1 d-none d-sm-inline">Levels</span>
					</a>
				</li>
				<li>
					<a href="#" id="menuSectionGrids" class="nav-link text-white px-0 align-middle">
						<i class="bi-grid-3x3"></i> <span class="ms-1 d-none d-sm-inline">Grids</span>
					</a>
				</li>
				<li>
					<a href="#" id="menuSectionManual" class="nav-link text-white px-0 align-middle">
						<i class="bi-book"></i> <span class="ms-1 d-none d-sm-inline">Manual</span>
					</a>
				</li>
				<li hidden>
					<a href="#submenu1" data-bs-toggle="collapse" class="nav-link text-white px-0 align-middle">
						<i class="bi-speedometer2"></i> <span class="ms-1 d-none d-sm-inline">Stats</span> 
					</a>
					<ul class="collapse nav flex-column ms-1" id="submenu1" data-bs-parent="#menu">
						<li class="w-100">
							<a href="#" class="nav-link text-white px-0"> <span class="d-none d-sm-inline">Nothing</span> . </a>
						</li>
						<li>
							<a href="#" class="nav-link text-white px-0"> <span class="d-none d-sm-inline">Yet</span> . </a>
						</li>
					</ul>
				</li>
				<li>
					<a href="#" id="menuSectionSettings" class="nav-link text-white px-0 align-middle">
						<i class="bi bi-gear"></i> <span class="ms-1 d-none d-sm-inline">Settings</span>
					</a>
				</li>
			</ul>
			<hr>
			<div id="closeMenu" class="border text-center" style="border-radius: 10px; width: 100%; ">
				<i class="bi-dash"></i> <span class="ms-1 d-none d-sm-inline" style="color: grey;">Close Menu</span><i class="bi-plus" style="display: none;"></i>
			</div>
			<br>
			<div class="dropdown pb-4">
				<a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
					<img src="me.png" alt="hugenerd" width="30" height="30" class="rounded-circle">
					<span id="sidebarUserName" class="d-none d-sm-inline mx-1">loser</span>
				</a>
				<ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
					<li><a class="dropdown-item" href="#">Nothing</a></li>
					<li><a class="dropdown-item" href="#">here</a></li>
					<li><hr class="dropdown-divider"></li>
					<li><a class="dropdown-item" href="#">yet</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row flex-nowrap">

			<!-- Main Body -->
			<div class="col py-3">

				<!-- === === === Default === === === ===================================================================================================================================================================================================== -->
				<div id="sectionHome" class="sections" style="display: block;">
					<div class="text-center">
						<!-- Logo (Collapse this) -->
						<div class="">
							<div id="divLogoOuter" class="border rounded-2 p-2" style="margin: 0 auto; width: fit-content;">
								<div id="divLogoInner" class="border" style="width: fit-content;">
									<div class="container">
										<div class="row">
											<div id="gridCellX0Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX2Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX3Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX4Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX5Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX6Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX7Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX8Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX9Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX10Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX11Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX12Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX13Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y10" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #666 #666 #333; "></div>
											<div id="gridCellX2Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-color: #333;"></div>
											<div id="gridCellX3Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #333 #666 #666; border-top-right-radius: 50%;"></div>
											<div id="gridCellX4Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #666 #666 #333; border-top-left-radius: 50%;"></div>
											<div id="gridCellX5Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-color: #333; "></div>
											<div id="gridCellX6Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #333 #666 #666; border-top-right-radius: 50%;"></div>
											<div id="gridCellX7Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #666 #666 #333; "></div>
											<div id="gridCellX8Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-color: #333; "></div>
											<div id="gridCellX9Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #333 #666 #666; border-top-right-radius: 50%;"></div>
											<div id="gridCellX10Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #666 #666 #333; border-top-left-radius: 50%;"></div>
											<div id="gridCellX11Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-color: #333; "></div>
											<div id="gridCellX12Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #333 #666 #666; border-top-right-radius: 50%;"></div>
											<div id="gridCellX13Y10" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y9" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX2Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX3Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX4Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX5Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX6Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX7Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX8Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX9Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX10Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX11Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX12Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; border-right-color: #333; "></div>
											<div id="gridCellX13Y9" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y8" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX2Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; "></div>
											<div id="gridCellX3Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-top-right-radius: 50%;"></div>
											<div id="gridCellX4Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX5Y8" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX6Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX7Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX8Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; "></div>
											<div id="gridCellX9Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-top-right-radius: 50%;"></div>
											<div id="gridCellX10Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX11Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-left-radius: 33%;"></div>
											<div id="gridCellX12Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-top-right-radius: 50%;"></div>
											<div id="gridCellX13Y8" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y7" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX2Y7" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX3Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX4Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX5Y7" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX6Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX7Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX8Y7" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX9Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX10Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX11Y7" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX12Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX13Y7" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y6" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-left-color: #333; "></div>
											<div id="gridCellX2Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; "></div>
											<div id="gridCellX3Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX4Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-left-color: #333; border-bottom-left-radius: 50%;"></div>
											<div id="gridCellX5Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; "></div>
											<div id="gridCellX6Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX7Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-left-color: #333; "></div>
											<div id="gridCellX8Y6" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; border-bottom-color: #333; "></div>
											<div id="gridCellX9Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-right-color: #333; "></div>
											<div id="gridCellX10Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-left-color: #333; border-bottom-left-radius: 50%;"></div>
											<div id="gridCellX11Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; "></div>
											<div id="gridCellX12Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX13Y6" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row" hidden>
											<div id="gridCellX0Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX2Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX3Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX4Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX5Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX6Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX7Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX8Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX9Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX10Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX11Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX12Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX13Y11" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y10" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #666 #666 #333; "></div>
											<div id="gridCellX2Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-color: #333;"></div>
											<div id="gridCellX3Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #333 #666 #666; border-top-right-radius: 50%;"></div>
											<div id="gridCellX4Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #666 #666 #333; border-top-left-radius: 50%;"></div>
											<div id="gridCellX5Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-color: #333; "></div>
											<div id="gridCellX6Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #333 #666 #666; border-top-right-radius: 50%;"></div>
											<div id="gridCellX7Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #666 #666 #333; "></div>
											<div id="gridCellX8Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-color: #333; "></div>
											<div id="gridCellX9Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #333 #666 #666; border-top-right-radius: 50%;"></div>
											<div id="gridCellX10Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #666 #666 #333; border-top-left-radius: 50%;"></div>
											<div id="gridCellX11Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-color: #333; "></div>
											<div id="gridCellX12Y10" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #333 #333 #666 #666; border-top-right-radius: 50%;"></div>
											<div id="gridCellX13Y10" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y9" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX2Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX3Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX4Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX5Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX6Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX7Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX8Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX9Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX10Y9" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX11Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX12Y9" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; border-right-color: #333; "></div>
											<div id="gridCellX13Y9" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y8" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX2Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; "></div>
											<div id="gridCellX3Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-top-right-radius: 50%;"></div>
											<div id="gridCellX4Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX5Y8" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX6Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX7Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX8Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; "></div>
											<div id="gridCellX9Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-top-right-radius: 50%;"></div>
											<div id="gridCellX10Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX11Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-top-left-radius: 33%;"></div>
											<div id="gridCellX12Y8" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; border-top-right-radius: 50%;"></div>
											<div id="gridCellX13Y8" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y7" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX2Y7" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX3Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX4Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX5Y7" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX6Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX7Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX8Y7" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX9Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX10Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-left-color: #333; "></div>
											<div id="gridCellX11Y7" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; "></div>
											<div id="gridCellX12Y7" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-right-color: #333; "></div>
											<div id="gridCellX13Y7" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y6" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-left-color: #333; "></div>
											<div id="gridCellX2Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; "></div>
											<div id="gridCellX3Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX4Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-left-color: #333; border-bottom-left-radius: 50%;"></div>
											<div id="gridCellX5Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; "></div>
											<div id="gridCellX6Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX7Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-left-color: #333; "></div>
											<div id="gridCellX8Y6" class="grid-cell  text-center p-0"
												style="background-color: #222; border-color: #333; border-bottom-color: #333; "></div>
											<div id="gridCellX9Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-right-color: #333; "></div>
											<div id="gridCellX10Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-left-color: #333; border-bottom-left-radius: 50%;"></div>
											<div id="gridCellX11Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; "></div>
											<div id="gridCellX12Y6" class="grid-cell  text-center p-0"
												style="background-color: #555; border-color: #666; border-bottom-color: #333; border-right-color: #333; border-bottom-right-radius: 50%;"></div>
											<div id="gridCellX13Y6" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
										<div class="row">
											<div id="gridCellX0Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX1Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX2Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX3Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX4Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX5Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX6Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX7Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX8Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX9Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX10Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX11Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX12Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
											<div id="gridCellX13Y0" class="grid-cell  text-center p-0"
												style="background-color: #000; border-color: #000; "></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						v0.1.0
						<h6>By: TIHS_CODE</h6>
						<h6><a href="https://tihs-code.neocities.org/" target="_blank" class="btn btn-light">Check out my other projects</a></h6>
					</div>
					<hr>
					<p class="lead">
						What is it?
					</p>
					<ul class="list-unstyled">
						<li><h6 class="d-inline">Robots.</h6> Borg on Borg violence. Set up your Borg's Stats and it's Program exactly as needed.</li>
						<li><h6 class="d-inline">Automated.</h6> All Borgs are automated, focus on learning the level and enemies to set your Borg up for success.</li>
						<li><h6 class="d-inline">Import/Export.</h6> Share any Borg, Program, Grid, or Level you make.</li>
						<li><h6 class="d-inline">Coding Project.</h6> It's all in one file and it'll only get longer. Mod it.</li>
						<li><h6 class="d-inline">Incomplete.</h6> Don't get too attached to your creations. Eventually updates will come where a full reset is required.</li>
					</ul>
					<hr>
					<div id="" class="btn btn-info toggleable o100" data-target="divHomeMore" >More...</div>
					<br>
					<div id="divHomeMore" style="display: none;">
						<p class="lead">
							What's coming? (no promises) 
						</p>
						<ul class="list-unstyled">
							<li><h6 class="d-inline">Stats.</h6> First, the stats are unbalanced(too early to settle). Second, there are more stats. Some already exist but are hidden and there's more stats cooking.</li>
							<li><h6 class="d-inline">Visuals.</h6> Better visuals for both UI and gameplay ease.</li>
							<li><h6 class="d-inline">More Options.</h6> Things like Borg stat modifiers or mode. Maybe Program targeting options.</li>
							<li><h6 class="d-inline">Win Conditions.</h6> War, what is it good for?</li>
						</ul>
						<div style="display: none;">
							<!-- Hey there sneaky! Here's a bonus for you -->
							<p class="lead">
								What's possible but far away? (even more no promises)
							</p>
							<ul class="list-unstyled">
								<li><h6 class="d-inline">Cell Edit.</h6> Create your own Cell Type.</li>
								<li><h6 class="d-inline">First Person.</h6> Manual Movement? Visibility?</li>
								<li><h6 class="d-inline">Dynamic Level.</h6> Level changes mid-game.</li>
							</ul>
							<p class="lead">
								Note! 
							</p>
							<ul class="list-unstyled">
								<li><h6 class="d-inline">Inspired by:</h6> <a href="https://armorgames.com/play/563/bot-arena-3">Bot Arena 3</a> </li>
							</ul>
						</div>
					</div>
					<hr>
					<marquee id="marqDataErrorReminder" scrollamount="2" direction="up">If you have data errors, go to [Settings] tab in the side bar and Click [Force Update Defaults].</marquee>
					<strong id="divDataErrorReminder" style="display: none;">If you have data errors, go to [Settings] tab in the side bar and Click [Force Update Defaults]. </strong>
					<hr>
				</div>

				<!-- === === === PLAY === === === ===================================================================================================================================================================================================== -->
				<div id="sectionPlay" class="sections" style="display: none;">
					<h3>[ PLAY ]</h3>
					<p class="lead">
						Select a Level you'd like to play and the Borg you want to use. See the other sections in the Side bar to customize your Borg.
					</p>
					<div id="" class="btn btn-info toggleable o100" data-target="divPlayMore">How to Play</div>
					<div id="divPlayMore" style="display: none;">
						<br>
						<ol>
							<li>Select a Level from the Level Selection table. Upon selecting a Level, at the bottom of the page should be it's preview. </li>
							<li>Select Borg/s from the Borg Selection table. Choose a Borg or more based on the Levels limitations. If you want to use the same Borg twice you can re-add it after Initializing. </li>
							<li>When you are Done with Level and Borg Selection then click "Initialize".</li>
							<li>Finalize the Borgs you will be using and where they will start</li>
							<li>When you are done finallizing your Borg/s click "Play Game".</li>
							<li>Take a look at the Game Preview to get your bearings, then when you are ready click "START".</li>
							<li>Remember, it's all automated. Make sure to observe the map and how the enemies move and act so you can prepare incase you need to try again with a different Borg or more.</li>
						</ol>
						<span id="txtManualSymbolPlay"></span>
						<br> <br>
						<p class="lead">
							Check the Manual or the other tabs on the sidebar if you're still unsure of how things work for Borgs, Programs, or Levels.
						</p>
					</div>
					<script>
						var arrManualText = [];
						//Helper Functions for setting up Manual contents
						function SetHtmlById(id, txt){ //console.log(id+", "+txt);
							document.getElementById(id).innerHTML = txt;
						}
						function SetManualText(id, arrManual){
							for (let i = 0; i < (arrManual.length - 2); i++) {
								SetHtmlById(id+i, arrManual[i+2]);
							}
						}
						function SetManual(id, arrManual, descOnly = true){
							arrManualText.push(arrManual);
							if(descOnly){
								SetHtmlById(id, arrManual[2]);
							}else{
								SetHtmlById(id, arrManual[0]);
								SetManualText(id+"Desc", arrManual);
							}
						}
						const manualSymbolPlay = ["Symbol", "Play", 
							"During the game your team symbol is \"P\" as in Player Team, while the enemy's is \"E\"nemy Team. The Player's team symbol is postfixxed by the Borg's symbol made in Borg creation. Ex: \"PA\", \"PB\", \"PX\". The Enemy's team symbol is postfixxed by nubers starting at 0. Ex: \"E0\", \"E1\", \"E5\"."];
						SetManual("txtManualSymbolPlay", manualSymbolPlay);
					</script>
					<hr>
					<h5 class="d-inline">User Data : </h5> 
						[<h6 class="d-inline">Name:</h6> <span id="playDataUserName"></span>], 
						[<h6 class="d-inline">Max Borg Points:</h6> <span id="playDataMaxPoints"></span>], 
						[<h6 class="d-inline">Current Level Progress:</h6> <span id="playDataLevelProgress"></span>]
					<hr>
					<div>
						<div id="divSelectionLevels" class="div-selection border rounded p-1 is-active">
							<h4>Level Selection: </h4>
							<table id="tblSelectionLevels" data-table="level" class="display">
								<thead>
									<tr>
										<th>Name</th>
										<th>Description</th>
										<th>Level Size</th>
										<th>Max Points</th>
										<th>Max Borgs</th>
										<th>CreatedBy</th>
										<th>Actions</th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
						<div id="divSelectionBorgs" class="div-selection border rounded p-1 " style="display: none;">
							<h4>Borg/s Selection: </h4>
							<table id="tblSelectionBorgs" data-table="borg" class="display">
								<thead>
									<tr>
										<th>Name</th>
										<th>Symbol</th>
										<th>Total Points</th>
										<th>Durability</th>
										<th>Speed</th>
										<th>Damage</th>
										<th>Range</th>
										<th>Cooldown</th>
										<th>Program</th>
										<th>Description</th>
										<th>CreatedBy</th>
										<th>Actions</th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
						<div id="divSelectionPlay" class="border rounded p-1 my-1">
							<div class="container">
								<div class="form-group row">
									<label for="playSelectedLevel" class="col-sm-2 col-form-label"
										title="Name"> Selected Level
									</label>
									<div class="col-sm-10 px-0">
										<input id="playSelectedLevel" class="form-control" placeholder="Step 1. Select a Level from the Level Selection table. Click the table row." type="text" readonly>
									</div>
								</div>
								<div class="form-group row">
									<label for="playSelectedBorg" class="col-sm-2 col-form-label"
										title="Name"> Selected Borg
									</label>
									<div class="col-sm-10 px-0">
										<input id="playSelectedBorg" class="form-control" placeholder="Step 2. Select a Borg from the Borg/s Selection table. Click the table row." type="text" readonly>
									</div>
								</div>
								<div class="border-indention mb-1">
									[<h6 class="d-inline">Max Points:</h6> <span id="playLevelMaxPoints"></span>], 
									[<h6 class="d-inline">Max Player Borgs:</h6> <span id="playLevelMaxPlayerBorgs"></span>]
									<br>
									<h6 class="d-inline">Note:</h6> <span>You can reselect any Borg you choose upon initialization.</span>
									<br>
								</div>
								<button id="btnPlayInitialize" class="btn btn-success">INITIALIZE</button>
								<button id="btnPlaySelectionLevels" class="btn btn-info">Toggle Level List</button>
								<button id="btnPlaySelectionBorgs" class="btn btn-info">Toggle Borg List</button>
							</div>
						</div>
						<div id="divSelectionPlayInitialize" class="border rounded p-1 mb-1" style="display: none;">
							<div class="ml-2 mb-2">
								<h5 id="playLevelSelectedLevel" class="d-inline"></h5>: 
								[<h6 class="d-inline">Max Points:</h6> <span id="playInitBorgPoints">_</span> / <span id="playLevelMaxPoints2"></span>], 
								[<h6 class="d-inline">Max Player Borgs:</h6> <span id="playInitBorgCount">_</span> / <span id="playLevelMaxPlayerBorgs2"></span>]
							</div>
							<div class="border rounded p-1 mb-1">
								<div class="container">
									<div id="divSelectionPlayInitializeBorgs"> </div>
								</div>
								<div id="btnAddPlayerBorgInitialize" class="btn btn-success" > Add Player Borg </div>
							</div>
							<button id="btnPlayGame" class="btn btn-success">PLAY GAME</button>
							<button id="btnPlaySelection" class="btn btn-outline-success">Return to Selection</button>
						</div>
						<div id="divPlayControls" class="col-12 mt-1" style="display: none;">
							<button id="btnGameSkipRound" class="btn btn-primary">Skip Round</button>
							<button id="btnGameTimer" class="btn btn-success">START</button>
							<button id="btnGameEnd" class="btn btn-danger">END</button>
							<button id="btnGamePause" class="btn btn-primary">Pause</button>
						</div>
						<div class="mt-1 pb-1 border rounded-2">
							<div id="divBorgTeamHP" class="container col-12">
								<div class="row text-center">
									<div class="">Round <span id="divGameRounds"></span></div>
									<div class="col-12 col-lg-6">
										Player: 
										<div id="divBorgTeam1HP">
											<div id="divBorgTeam1HPEnd"></div>
										</div>
									</div>
									<div class="col-12 col-lg-6">
										Enemy: 
										<div id="divBorgTeam2HP">
											<div id="divBorgTeam2HPEnd"></div>
										</div>
									</div>
								</div>
								<div id="divBorgTeamHPEnd"></div>
							</div>
							<div class="my-3 " style="align-items: center; ">
								<div id="divLevelMainView" class="border rounded-2 p-2" style="width: fit-content; margin:0 auto;">
									<div id="levelMainView" class="border" style="width: fit-content;">
	
									</div>
								</div>
							</div>
							<div class="" style="width: 100%; text-align: center; color: #ddd;">
								<span id="tglGameLog" class="btn btn-outline-info" style="color: #eee">Level Log: </span>
								<div id="divGameLog" class="col-12" style="max-height: 50vh; overflow-y:auto;">
									<div id="divGameLogText" class="is-active">
										<div id="divGameLogEnd"></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- === === === Borgs === === === ===================================================================================================================================================================================================== -->
				<div id="sectionBorgs" class="sections" style="display: none;">
					<h3>Borgs</h3>
					<p class="">
						<span id="txtManualBorg"></span>
					</p>
					<div>
						<button id="btnBorgStatLegend" class="btn btn-info mb-1">Stats Legend</button>
						<div id="divBorgStatLegend" class="border rounded p-1 my-1" style="display: none;">
							<span id="txtManualBorgSymbol"></span>
							<hr>
							<ul>
								<li>
									<strong id="txtManualBorgDur"></strong>: <span id="txtManualBorgDurDesc0"></span>
									<ul>
										<li><span id="txtManualBorgDurDesc1"></span></li>
									</ul>
								</li>
								<li>
									<strong id="txtManualBorgSpd"></strong>: <span id="txtManualBorgSpdDesc0"></span>
									<ul>
										<li><span id="txtManualBorgSpdDesc1"></span></li>
										<li><span id="txtManualBorgSpdDesc2"></span></li>
									</ul>
								</li>
								<li><strong id="txtManualBorgDmg"></strong>: <span id="txtManualBorgDmgDesc0"></span></li>
								<li>
									<strong id="txtManualBorgRng"></strong>: <span id="txtManualBorgRngDesc0"></span>
									<ul>
										<li><span id="txtManualBorgRngDesc1"></span></li>
									</ul>
								</li>
								<li>
									<strong id="txtManualBorgCld"></strong>: <span id="txtManualBorgCldDesc0"></span>
									<ul>
										<li><span id="txtManualBorgCldDesc1"></span></li>
										<li><span id="txtManualBorgCldDesc2"></span></li>
									</ul>
								</li>
							</ul>
						</div>
						<script>
							const manualBorg = ["Borg", "Borg", 
								"A Borg is an autonomous robot that has one weapon. Being autonomous, you must create a Program for each Borg you make. "];
							SetManual("txtManualBorg", manualBorg);
							
							const manualBorgSymbol = ["Symbol", "Borg", 
								"During the game symbols are used to display the Borgs in the level. "];
							SetManual("txtManualBorgSymbol", manualBorgSymbol);
							
							const manualBorgDur = ["Durability(DUR)", "Borg", 
								"How much damage your Borg can take before it cannot function.",
								"Scales by 5 DUR per 1 points invested." ];
							SetManual("txtManualBorgDur", manualBorgDur, false);
							
							const manualBorgSpd = ["Speed(SPD)", "Borg", 
								"The number of ticks it takes your Borg to move again. ",
								"The default is 9 ticks, meaning once every round since each round has 10 ticks.",
								"Scales by 5 pts until SPD is 5, by 10 pts until SPD is 3, and finally 20 pts until SPD is 0. (5, 10, 15, 20, 30, 40, 60, 80, 100)"];
							SetManual("txtManualBorgSpd", manualBorgSpd, false);
							
							const manualBorgDmg = ["Damage(DMG)", "Borg", 
								"How much damage your Borg deal per attack." ];
							SetManual("txtManualBorgDmg", manualBorgDmg, false);
							
							const manualBorgRng = ["Range(RNG)", "Borg", 
								"How much many Cells away another Borg has to be for your Borg to attack.",
								"Starting at 4 points, it scales by 1 RNG per 2 points invested. (4, 6, 8, 10, etc.)"];
							SetManual("txtManualBorgRng", manualBorgRng, false);
							
							const manualBorgCld = ["Cooldown(CLD)", "Borg", 
								"The number of ticks it takes your Borg to attack again. ",
								"The default is 9 ticks, meaning once every round since each round has 10 ticks.",
								"Scales by 5 pts until CLD is 5, by 10 pts until CLD is 3, and finally 20 pts until CLD is 0. (5, 10, 15, 20, 30, 40, 60, 80, 100)"];
							SetManual("txtManualBorgCld", manualBorgCld, false);
						</script>
						<div id="divBorgForm" class="border rounded p-1 my-1" style="display: none;">
							<div class="container">
								<div class="form-group row">
									<label for="borgName" class="col-sm-2 col-form-label"
										title="Name"> Name
									</label>
									<div class="col-sm-10 px-0">
										<input id="borgName" class="form-control" placeholder="Name" type="text">
									</div>
								</div>
								<div class="form-group row">
									<label for="borgSymbol" class="col-sm-2 col-form-label"
										title="Symbol"> Symbol
									</label>
									<div class="col-sm-10 px-0">
										<input id="borgSymbol" class="form-control" placeholder="Symbol (One Character)" type="text">
									</div>
								</div>
								<div class="form-group row">
									<label for="borgDescription" class="col-sm-2 col-form-label"
										title="Description"> Description
									</label>
									<div class="col-sm-10 px-0">
										<input id="borgDescription" class="form-control" placeholder="Description" type="text">
									</div>
								</div>
								<div class="form-group row">
									<div class="col-sm-2 col-form-label" ></div>
									<div class="col-sm-10 container">
										<div id="divBorgPoints" class="form-group row">
											<div class="col-2">
												<div class="col-form-label text-center wide" title="Final"> Final Stat </div>
											</div>
											<div class="col-2 pt-1 px-1">
											</div>
											<div class="col-6 px-1">
												<div class="col-form-label text-center wide" title="Total">
													<span id="borgPointsRemaining">10</span> left of <span id="borgPointsMax">10</span>
												</div>
											</div>
											<div class="col-2 pt-1 px-1">
											</div>
										</div>
									</div>
								</div>
								<div class="form-group row">
									<label for="borgHp" class="col-sm-2 col-form-label"
										title="Durability"> DUR
									</label>
									<div class="col-sm-10 container">
										<div class="form-group row">
											<div class="col-2">
												<label id="borgHp" class="col-form-label text-center wide" title="Durability"> 10 </label>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgHpMax" class="btn btn-dark wide stat-max" data-stat="Hp" title="Max Durability"> <i class="bi bi-chevron-bar-up"></i> </div>
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgHpUp" class="btn btn-dark wide stat-modify" data-mod="1" data-stat="Hp" title="+ Durability"> <i class="bi bi-chevron-up"></i> </div>
											</div>
											<div class="col-2 px-1">
												<input id="borgHpPts" class="form-control borg-stat" data-stat="Hp" placeholder="Durability" type="number" value="0">
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgHpDown" class="btn btn-dark wide stat-modify" data-mod="-1" data-stat="Hp" title="- Durability"> <i class="bi bi-chevron-down"></i> </div>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgHpMin" class="btn btn-dark wide stat-min" data-stat="Hp" title="Min Durability"> <i class="bi bi-chevron-bar-down"></i> </div>
											</div>
										</div>
									</div>
								</div>
								<div class="form-group row">
									<label for="borgSpeed" class="col-sm-2 col-form-label"
										title="Speed"> SPD
									</label>
									<div class="col-sm-10 container">
										<div class="form-group row">
											<div class="col-2">
												<label id="borgSpeed" class="col-form-label text-center wide" title="Speed"> 9 </label>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgSpeedMax" class="btn btn-dark wide stat-max" data-stat="Speed" title="Max Speed" > <i class="bi bi-chevron-bar-up"></i> </div>
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgSpeedUp" class="btn btn-dark wide stat-modify" data-mod="1" data-stat="Speed" title="+ Speed" > <i class="bi bi-chevron-up"></i> </div>
											</div>
											<div class="col-2 px-1">
												<input id="borgSpeedPts" class="form-control borg-stat" data-stat="Speed" placeholder="Speed" type="number" value="0">
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgSpeedDown" class="btn btn-dark wide stat-modify" data-mod="-1" data-stat="Speed" title="- Speed"> <i class="bi bi-chevron-down"></i> </div>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgSpeedMin" class="btn btn-dark wide stat-min" data-stat="Speed" title="Min Speed"> <i class="bi bi-chevron-bar-down"></i> </div>
											</div>
										</div>
									</div>
								</div>
								<div class="form-group row">
									<label for="borgDamage" class="col-sm-2 col-form-label"
										title="Weapon Damage"> DMG
									</label>
									<div class="col-sm-10 container">
										<div class="form-group row">
											<div class="col-2">
												<label id="borgDamage" class="col-form-label text-center wide" title="Weapon Damage"> 1 </label>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgDamageMax" class="btn btn-dark wide stat-max" data-stat="Damage" title="Max Weapon Damage"> <i class="bi bi-chevron-bar-up"></i> </div>
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgDamageUp" class="btn btn-dark wide stat-modify" data-mod="1" data-stat="Damage" title="+ Weapon Damage"> <i class="bi bi-chevron-up"></i> </div>
											</div>
											<div class="col-2 px-1">
												<input id="borgDamagePts" class="form-control borg-stat" data-stat="Damage" placeholder="Damage" type="number" value="0">
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgDamageDown" class="btn btn-dark wide stat-modify" data-mod="-1" data-stat="Damage" title="- Weapon Damage"> <i class="bi bi-chevron-down"></i> </div>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgDamageMin" class="btn btn-dark wide stat-min" data-stat="Damage" title="Min Weapon Damage"> <i class="bi bi-chevron-bar-down"></i> </div>
											</div>
										</div>
									</div>
								</div>
								<div class="form-group row">
									<label for="borgRange" class="col-sm-2 col-form-label"
										title="Weapon Range"> RNG
									</label>
									<div class="col-sm-10 container">
										<div class="form-group row">
											<div class="col-2">
												<label id="borgRange" class="col-form-label text-center wide" title="Weapon Range"> 1 </label>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgRangeMax" class="btn btn-dark wide stat-max" data-stat="Range" title="Max Weapon Range"> <i class="bi bi-chevron-bar-up"></i> </div>
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgRangeUp" class="btn btn-dark wide stat-modify" data-mod="1" data-stat="Range" title="+ Weapon Range"> <i class="bi bi-chevron-up"></i> </div>
											</div>
											<div class="col-2 px-1">
												<input id="borgRangePts" class="form-control borg-stat" data-stat="Range" placeholder="Range" type="number" value="0">
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgRangeDown" class="btn btn-dark wide stat-modify" data-mod="-1" data-stat="Range" title="- Weapon Range"> <i class="bi bi-chevron-down"></i> </div>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgRangeMin" class="btn btn-dark wide stat-min" data-stat="Range" title="Min Weapon Range"> <i class="bi bi-chevron-bar-down"></i> </div>
											</div>
										</div>
									</div>
								</div>
								<div class="form-group row">
									<label for="borgCooldown" class="col-sm-2 col-form-label"
										title="Weapon Cooldown"> CLD
									</label>
									<div class="col-sm-10 container">
										<div class="form-group row">
											<div class="col-2">
												<label id="borgCooldown" class="col-form-label text-center wide" title="Weapon Cooldown"> 9 </label>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgCooldownMax" class="btn btn-dark wide stat-max" data-stat="Cooldown" title="Max Weapon Cooldown"> <i class="bi bi-chevron-bar-up"></i> </div>
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgCooldownUp" class="btn btn-dark wide stat-modify" data-mod="1" data-stat="Cooldown" title="+ Weapon Cooldown"> <i class="bi bi-chevron-up"></i> </div>
											</div>
											<div class="col-2 px-1">
												<input id="borgCooldownPts" class="form-control borg-stat" data-stat="Cooldown" placeholder="Cooldown" type="number" value="0">
											</div>
											<div class="col-2 pt-1 px-0">
												<div id="borgCooldownDown" class="btn btn-dark wide stat-modify" data-mod="-1" data-stat="Cooldown" title="- Weapon Cooldown"> <i class="bi bi-chevron-down"></i> </div>
											</div>
											<div class="col-2 pt-1 px-1">
												<div id="borgCooldownMin" class="btn btn-dark wide stat-min" data-stat="Cooldown" title="Min Weapon Cooldown"> <i class="bi bi-chevron-bar-down"></i> </div>
											</div>
										</div>
									</div>
								</div>
								<div class="form-group row">
									<label for="borgProgram" class="col-sm-2 col-form-label"
										title="Program"> Program
									</label>
									<div class="col-sm-10 px-0">
										<select id="borgProgram" class="form-control"> </select> 
									</div>
								</div>
								<div class="form-group mt-1">
									<button id="submitSaveBorg" class="btn btn-success" style="width: fit-content; /*margin: auto;*/">Save Borg</button>
									<button id="submitResetBorg" class="btn btn-danger" style="width: fit-content; float: right; /*margin: auto;*/">Reset Points</button>
									<button id="submitRemoveLimit" class="btn btn-warning" style="width: fit-content; float: right; /*margin: auto;*/">Override Point Limit</button>
								</div>
							</div>
						</div>
						<div id="tblBorgsDiv">
							<button id="btnToggleBorgForm" data-target="divBorgForm" class="btn btn-success">Toggle Borg Form</button>
							<button id="btnManualUpdateBorgs" class="btn btn-info" hidden>Manual Update Table</button>
							<button id="btnDeleteAllBorgs" class="btn btn-danger">Delete All Borgs</button>
							<button id="displayArrayBorgs" class="btn btn-dark" hidden>console array</button>
							<table id="tblBorgs" data-table="borg" class="display">
								<thead>
									<tr>
										<th>Name</th>
										<th>Symbol</th>
										<th>Total Points</th>
										<th>Durability</th>
										<th>Speed</th>
										<th>Damage</th>
										<th>Range</th>
										<th>Cooldown</th>
										<th>Program</th>
										<th>Description</th>
										<th>CreatedBy</th>
										<th>Actions</th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<!-- === === === Programs === === === ===================================================================================================================================================================================================== -->
				<div id="sectionPrograms" class="sections" style="display: none;">
					<h3>Programs</h3>
					<p class="lead">
						Yes. It's programming for babies. You're basically coding.
					</p>
					<div id="" class="btn btn-info toggleable o100" data-target="divProgramMore">More...</div>
					<div id="divProgramMore" style="display: none;">
						- <span id="txtManualProgram"></span>
						<br> - <span id="txtManualPhase"></span>
						<br> - <span id="txtManualTick"></span>
						<span id="txtManualRound"></span>
						<script>
							const manualProgram = ["Program", "Program", "Programs are used by Borgs and are a set of instructions that tell the Game how a Borg should act during a Tick."];
							SetManual("txtManualProgram", manualProgram);
							const manualPhase = ["Phase", "Program", "There are 2 Phases: Movement and Action. Every Tick, if valid to run, the Game will run a Borg's Program."];
							SetManual("txtManualPhase", manualPhase);
							const manualTick = ["Tick", "Play", "Every tick the game will check if any borg can run it's Program's Phase. All valid Movements are run first followed by valid Actions. In the case of ties Player Borgs will be ran first."];
							SetManual("txtManualTick", manualTick);
							const manualRound = ["Round", "Play", "By default Borgs move and act once per round. Each round has 10 Ticks."];
							SetManual("txtManualRound", manualRound);
						</script>
					</div>
					<div id="divProgramForm" class="border rounded p-1 my-1" style="display: none;">
						<div class="col-12 container">
							<h4>Addition Legend: </h4>
							<h6>[] = Input </h6>
							<h6># = Number, % = Percentage, ?= = Comparison </h6>
							<h6>B = Borg, C = Cell, X = Any </h6>
							
							<div id="divProgramFormMain" class="border rounded p-1 my-1">
								<div class="container">
									<div class="form-group row">
										<label for="progName" class=" col-form-label" title="Program Name"> 
											<h4 class="d-inline">
												Program Name:
											</h4>
										</label>
										<div class=" px-0">
											<input id="progName" class="form-control" placeholder="Program Name" type="text">
										</div>
									</div>
									<div class="form-group row">
										<label for="progDescription" class=" col-form-label" title="Program Name"> 
											<h4 class="d-inline">
												Program Description:
											</h4>
										</label>
										<div class=" px-0">
											<input id="progDescription" class="form-control" placeholder="Program Description" type="text">
										</div>
									</div>
									<hr>
									<h4 class="d-inline">
										Movement:
									</h4>
									<!--Clear All Movement-->
									<div class="toggleable badge text-bg-danger" data-target="progMovClear" > - </div>
									<div id="progMovClear" class="prog-clear-apply badge text-bg-danger" data-target="progMovTop" data-scope="" style="display: none;"> Clear ALL </div>
									<div id="" class="prog-code border-indention" data-code ="[[[MOVEMENT]]]">
										
										<!--Movement Top Add-->
										<div class="toggleable badge text-bg-dark border-mute" data-target="progMovTopAdd"> + </div>
										<div id="progMovTopAdd" style="display: none;">
											<select id="progMovTopAddSelect" class="form-control prog-select">
												<option value="IF" selected>IF</option>
												<option value="MOVE_TO">Move towards [X]</option>
												<option value="MOVE_AWAY">Move away from [X]</option>
											</select> 
											<div class="prog-add-apply badge text-bg-success border-mute" data-target="progMovTopAdd" data-scope="[[[MOVEMENT]]]"> Add </div>
										</div>
										
										<!--Movement Body-->
										<div id="progMovTop">
											<span id="progMovTopAddSection"></span>
										</div>
									</div>
	
									<h4 class="d-inline">
										Action:
									</h4>
									
									<!--Clear All Action-->
									<div class="toggleable badge text-bg-danger" data-target="progClearAct" > - </div>
									<div id="progClearAct" class="prog-clear-apply badge text-bg-danger" data-target="progActTop" data-scope="" style="display: none;"> Clear ALL </div>
									<div class="prog-code border-indention" data-code ="[[[ACTION]]]">
										
										<!--Action Top Add-->
										<div class="toggleable badge text-bg-dark border-mute" data-target="progActTopAdd"> + </div>
										<div id="progActTopAdd" style="display: none;">
											<select id="progActTopAddSelect" class="form-control prog-select">
												<option value="IF" selected>IF</option>
												<option value="ATK">ATTACK</option>
											</select> 
											<div class="prog-add-apply badge text-bg-success border-mute" data-target="progActTopAdd" data-scope="[[[ACTION]]]"> Add </div>
										</div>
										<!--Action Body-->
										<div id="progActTop">
											<span id="progActTopAddSection"></span>
										</div>
									</div>
								</div>
								<div class="p-1">
									<div id="submitResetProg" class="btn btn-warning mb-1" > Reset </div>
									<div id="submitResetToDefProg" class="btn btn-warning mb-1" > Reset to Default </div>
									<div id="submitSaveProg" class="btn btn-success mb-1" > Save </div>
								</div>
							</div>
						</div>
					</div>
					<div id="tblProgsDiv" class="mt-1">
						<button id="btnToggleProgForm" data-target="divProgramForm" class="btn btn-success">Toggle Borg Form</button>
						<button id="btnDeleteAllPrograms" class="btn btn-danger">Delete All Programs</button>
						<button id="displayArrayPrograms" class="btn btn-dark" hidden>console array</button>
						<table id="tblProgs" data-table="prog" class="display">
							<thead>
								<tr>
									<th>Name</th>
									<th>Description</th>
									<th>Complexity</th>
									<th>CreatedBy</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
				
				<!-- === === === Levels === === === ===================================================================================================================================================================================================== -->
				<div id="sectionLevels" class="sections" style="display: none;">
					<h3>Levels</h3>
					<p class="">
						<span id="txtManualLevel"></span>
					</p>
					<div id="" class="btn btn-info toggleable o100" data-target="divLevelMore">More...</div>
					<div id="divLevelMore" style="display: none;">
						<span id="txtManualLevelDetails"></span>
						<br> <span id="txtManualCoordinates"></span>
						<script>
							const manualLevel = ["Level", "Level", "A Level determines what kind of game will be played. It has a Grid where enemy Borgs are placed and those elements set the challenge for the player."];
							SetManual("txtManualLevel", manualLevel);
							const manualLevelDetails = ["Level Details", "Level", "Each Level must have a Grid and at least one Enemy Borg. You set where each enemy Borg is as well as where you want to allow the Player Borg/s to start."];
							SetManual("txtManualLevelDetails", manualLevelDetails);
							const manualCoordinates = ["Coordinates", "Grid", "Grid Coordinates start at 0,0 located at the bottom left. So if a grid's dimensions are 3x3 then it's coordinates per corner are: [0,0] Bottom Left, [0,2] Bottom Right, [2,0] Upper Left, and [2,2] Upper Right."];
							SetManual("txtManualCoordinates", manualCoordinates);
						</script>
					</div>
					<div id="divLevelForm" class="border rounded p-1 mt-1" style="display: none;">
						<div class="container">
							<div class="form-group row">
								<label for="levelName" class="col-sm-2 col-form-label"
									title="Name"> Name
								</label>
								<div class="col-sm-10 px-0">
									<input id="levelName" class="form-control" placeholder="Name" type="text">
								</div>
							</div>
							<div class="form-group row">
								<label for="levelDescription" class="col-sm-2 col-form-label"
									title="Description"> Description
								</label>
								<div class="col-sm-10 px-0">
									<input id="levelDescription" class="form-control" placeholder="Description" type="text">
								</div>
							</div>
							<div class="form-group row">
								<label for="levelGridName" class="col-sm-2 col-form-label"
									title="Grid Name"> Grid Name
								</label>
								<div class="col-sm-10 px-0">
									<select id="levelGridName" class="form-control"> </select> 
								</div>
							</div>
							<div class="form-group row">
								<label for="levelMaxPoints" class="col-sm-2 col-form-label"
									title="Max Points"> Max Points
								</label>
								<div class="col-sm-10 px-0">
									<input id="levelMaxPoints" class="form-control" placeholder="Max Points" type="number">
								</div>
							</div>
							<div class="form-group row">
								<label for="levelMaxPlayerBorgs" class="col-sm-2 col-form-label"
									title="Max Player Borgs"> Max Player Borgs
								</label>
								<div class="col-sm-10 px-0">
									<input id="levelMaxPlayerBorgs" class="form-control" placeholder="Max Player Borgs" value="1" type="number">
								</div>
							</div>
							<div class="form-group row">
								<label for="levelFormGridPreview" class="col-sm-2 col-form-label"
									title="Grid Preview"> Grid Preview with Coordinates
									<button id="levelFormResetPreviewCells" class="btn btn-dark">Reset</button>
								</label>
								<div class="col-sm-10 px-0">
									<div id="levelFormGridPreview" class="border mt-2" style="width: fit-content;"> </div>
								</div>
							</div>
							<div id="" class="border rounded p-1 my-1">
								<div class="container">
									<div class="form-group row">
										<label class="col-sm-2 col-form-label"
											title="Player Starting Coordinates"> Player Starting Coordinates
										</label>
										<div class="col-sm-10 container px-0">
											<div class="form-group row">
												<div class="col-6">
													<input id="levelPlayerX0" data-id="0" class="level-form-player form-control" placeholder="x" type="number">
												</div>
												<div class="col-6">
													<input id="levelPlayerY0" class="form-control" placeholder="y" type="number">
												</div>
											</div>
										</div>
									</div>
									<div id="divLevelPlayerBorg">
										<div id="divLevelPlayerBorgEnd"></div>
									</div>
									<div id="btnAddLevelPlayerStart" class="btn btn-success mb-1" > Add Player Starting Coordinates </div>
								</div>
							</div>
							<div id="" class="border rounded p-1 my-1">
								<div class="container">
									<div class="form-group row">
										<label for="levelEnemyBorgs0" class="col-sm-2 col-form-label"
											title="Enemy Borg"> Enemy Borg
										</label>
										<div class="col-sm-10 px-0">
											<select id="levelEnemyBorgs0" data-id="0" class="level-form-enemy form-control"> </select> 
										</div>
									</div>
									<div class="form-group row">
										<label class="col-sm-2 col-form-label"
											title="Enemy Starting Coordinates"> Enemy Starting Coordinates
										</label>
										<div class="col-sm-10 container px-0">
											<div class="form-group row">
												<div class="col-6">
													<input id="levelEnemyX0" class="form-control" placeholder="x" type="number">
												</div>
												<div class="col-6">
													<input id="levelEnemyY0" class="form-control" placeholder="y" type="number">
												</div>
											</div>
										</div>
									</div>
									<div id="divLevelEnemyBorg">
										<div id="divLevelEnemyBorgEnd"></div>
									</div>
									<div id="btnAddBorgEnemy" class="btn btn-success mb-1" > Add Enemy Borg </div>
								</div>
							</div>
							<div class="p-1">
								<div id="submitSaveLevel" class="btn btn-success mb-1" > Save </div>
							</div>
						</div>
					</div>
					<div id="tblLevelsDiv" class="mt-1">
						<button id="btnToggleLevelForm" data-target="divLevelForm" class="btn btn-success">Toggle Level Form</button>
						<button id="btnManualUpdateLevels" class="btn btn-info" hidden>Manual Update Table</button>
						<button id="btnDeleteAllLevels" class="btn btn-danger">Delete All Levels</button>
						<button id="displayArrayLevels" class="btn btn-dark" hidden>console array</button>
						<table id="tblLevels" data-table="level" class="display">
							<thead>
								<tr>
									<th>Name</th>
									<th>Description</th>
									<th>Level Size</th>
									<th>Max Points</th>
									<th>Max Borgs</th>
									<th>CreatedBy</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
					<div>
						<div id="divLevelPreview" class="border rounded-2 p-2" style="width: fit-content;">
							<div id="levelPreview" class="border" style="width: fit-content;">

							</div>
						</div>
					</div>
				</div>
				
				<!-- === === === Grids === === === ===================================================================================================================================================================================================== -->
				<div id="sectionGrids" class="sections" style="display: none;">
					<h3>Grids</h3>
					<span id="txtManualGrid"></span>
					<script>
						const manualGrid = ["Grid", "Grid", "A Grids Dimensions are it's Width(X-Axis) and Height(Y-Axis). When talking about a Borg's coordinates, we mean where that Borg is in the grid denoted by [x,y]."];
						SetManual("txtManualGrid", manualGrid);
					</script>
					<div id="divGridForm" class="border rounded p-1 my-1" style="display: none;">
						<div class="container">
							<div class="form-group row">
								<label for="gridName" class="col-sm-2 col-form-label"
									title="Name"> Name
								</label>
								<div class="col-sm-10 px-0">
									<input id="gridName" class="form-control" placeholder="Name" type="text">
								</div>
							</div>
							<div class="form-group row">
								<label for="gridDescription" class="col-sm-2 col-form-label"
									title="Description"> Description
								</label>
								<div class="col-sm-10 px-0">
									<input id="gridDescription" class="form-control" placeholder="Description" type="text">
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-2 col-form-label"
									title="Dimensions"> Dimensions (Width x Height)
								</label>
								<div class="col-sm-10 container px-0">
									<div class="form-group row">
										<div class="col-6">
											<input id="gridMaxX" class="form-control" placeholder="Width" type="number" min="1" value="1">
										</div>
										<div class="col-6">
											<input id="gridMaxY" class="form-control" placeholder="Height" type="number" min="1" value="1">
										</div>
									</div>
								</div>
							</div>
							<div class="form-group row">
								<label for="gridCellsString" class="col-sm-2 col-form-label"
									title="Grid Cells"> Grid Cells
									<button id="gridFormResetPreviewCells" class="btn btn-dark">Reset</button>
									(0=Floor, 1=Wall, 2=Hole)
								</label>
								<div class="col-sm-10 px-0">
									<div id="divGridFormPreview" class="border rounded-2 p-2" style="width: fit-content;">
										<button id="gridFormApplyDimensionsAndText" class="btn btn-primary float-right">Apply Dimensions and Text</button>
										<br>
										<button id="btdGridFormDimEditAdd" class="btn btn-info mt-1">Show Add Row/Column</button>
										<button id="btdGridFormDimEditRmv" class="btn btn-info mt-1">Show Remove Row/Column</button>
										<div id="gridFormDimEditAdd" class="mt-1" style="display: none;">
											<button data-dir="3" data-mod="1" class="grid-form-dim-edit btn btn-success" >Add Row: Top</button>
											<button data-dir="4" data-mod="1" class="grid-form-dim-edit btn btn-success" >Add Row: Bottom</button>
											<button data-dir="1" data-mod="1" class="grid-form-dim-edit btn btn-success" >Add Column: Left</button>
											<button data-dir="2" data-mod="1" class="grid-form-dim-edit btn btn-success" >Add Column: Right</button>
										</div>
										<div id="gridFormDimEditRmv" class="mt-1" style="display: none;">
											<button data-dir="3" data-mod="-1" class="grid-form-dim-edit btn btn-warning">Remove Row: Top</button>
											<button data-dir="4" data-mod="-1" class="grid-form-dim-edit btn btn-warning">Remove Row: Bottom</button>
											<button data-dir="1" data-mod="-1" class="grid-form-dim-edit btn btn-warning">Remove Column: Left</button>
											<button data-dir="2" data-mod="-1" class="grid-form-dim-edit btn btn-warning">Remove Column: Right</button>
										</div>
										<div id="gridFormCellValDisplay" class="mt-1" style="display: block;">
											<button id="gridFormCellVal" class="btn btn-info">Cell Value: None</button>
											<button id="gridFormCellEditType" class="btn btn-info">Toggle Cell Edit: By Cell</button>
										</div>
										Current Cell (You can also use the number keys 0-3): <select id="gridFormCellType" class="form-control"> </select> 
										<div id="gridFormPreview" class="border mt-2" style="width: fit-content;"> </div>
									</div>
									<textarea id="gridCellsString" class="form-control"></textarea>
								</div>
							</div>
							<div class="p-1">
								<div id="submitSaveGrid" class="btn btn-success mb-1" > Save </div>
							</div>
						</div>
					</div>
					<div id="tblGridsDiv">
						<button id="btnToggleGridForm" data-target="divGridForm" class="btn btn-success">Toggle Grid Form</button>
						<button id="btnManualUpdateGrids" class="btn btn-info" hidden>Manual Update Table</button>
						<button id="btnDeleteAllGrids" class="btn btn-danger">Delete All Grids</button>
						<button id="displayArrayGrids" class="btn btn-dark" hidden>console array</button>
						<table id="tblGrids" data-table="grid" class="display">
							<thead>
								<tr>
									<th>Name</th>
									<th>Description</th>
									<th>Grid Size</th>
									<th>CreatedBy</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
					<div class="mt-2">
						<div id="divGridPreview" class="border rounded-2 p-2" style="width: fit-content;">
							<div id="gridPreview" class="border" style="width: fit-content;"> </div>
						</div>
					</div>
				</div>
				
				<!-- === === === Manual === === === ===================================================================================================================================================================================================== -->
				<div id="sectionManual" class="sections" style="display: none;">
					<h3>Manual</h3>
					<p class="lead">
						User Manual / FAQ / Glossary
					</p>
					<table id="tblManual" data-table="grid" class="display">
						<thead>
							<tr>
								<th>Name</th>
								<th>Type</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>

				<!-- === === === Settings === === === ===================================================================================================================================================================================================== -->
				<div id="sectionSettings" class="sections">
					*Some setting changes may require a reload
					<div id="" class="border-indention border-indention-r p-1 my-1">
						<div class="container">
							<div class="form-group row">
								<label for="newUserName" class="col-sm-2 col-form-label"
									title="User Name"> User Name
								</label>
								<div class="col-sm-8 px-0">
									<input id="newUserName" class="form-control" value="" type="text">
								</div>
								<div class="col-sm-2 px-0 text-center">
									<div id="btnUpdateUserName" class="btn btn-success mb-1" > Update User Name </div>
								</div>
							</div>
						</div>
					</div>
					<div id="" class="border-indention border-indention-r p-1 my-1">
						<div class="container">
							<div class="form-group row">
								<label for="teamColorPlayer" class="col-sm-2 col-form-label"
									title="Player Team Color"> Player Team Color
								</label>
								<div class="col-sm-8 px-0">
									<input id="teamColorPlayer" class="form-control" value="#FFFFFF" type="color">
								</div>
								<div class="col-sm-2 px-0 text-center">
									<div id="btnUpdateTeamColorPlayer" class="btn btn-success mb-1" > Update Player Team Color </div>
								</div>
							</div>
						</div>
					</div>
					<div id="" class="border-indention border-indention-r p-1 my-1">
						<div class="container">
							<div class="form-group row">
								<label for="teamColorEnemy" class="col-sm-2 col-form-label"
									title="Enemy Team Color"> Enemy Team Color
								</label>
								<div class="col-sm-8 px-0">
									<input id="teamColorEnemy" class="form-control" value="#FFFFFF" type="color">
								</div>
								<div class="col-sm-2 px-0 text-center">
									<div id="btnUpdateTeamColorEnemy" class="btn btn-success mb-1" > Update Enemy Team Color </div>
								</div>
							</div>
						</div>
					</div>
					<div id="" class="border-indention border-indention-r p-1 my-1">
						<div class="container">
							<div class="form-group row">
								<label for="setTogglePlaySelectDisplay" class="col-sm-2 col-form-label"
									title="PLAY Selection Toggle"> PLAY Selection Toggle
								</label>
								<div class="col-sm-8 px-0">
									<select id="setTogglePlaySelectDisplay" class="form-control"> 
										<option value="0" selected>Auto toggle Level and Borg selection before and after PLAY </option>
										<option value="1">DO NOT toggle Level and Borg selection before and after PLAY</option>
										<option value="2" style="display: none;">Toggle Level and Borg selection ONLY ONCE before PLAY</option>
									</select> 
								</div>
								<div class="col-sm-2 px-0 text-center">
									<div id="btnSetTogglePlaySelectDispay" class="btn btn-success mb-1" > Set New Toggle </div>
								</div>
							</div>
						</div>
					</div>
					<div id="" class="border-indention border-indention-r p-1 my-1">
						<div class="container">
							<div class="form-group row">
								<label for="setGameInterval" class="col-sm-2 col-form-label"
									title="PLAY Selection Toggle"> PLAY Round Time
								</label>
								<div class="col-sm-8 px-0">
									<select id="setGameInterval" class="form-control"> 
										<option value="50">0.5 second per round </option>
										<option value="100" selected>1 second per round </option>
										<option value="200">2 seconds per round </option>
									</select> 
								</div>
								<div class="col-sm-2 px-0 text-center">
									<div id="btnGameInterval" class="btn btn-success mb-1" > Set New Round Time </div>
								</div>
							</div>
						</div>
					</div>
					<div id="divImportExportClass" class="border-indention border-indention-r p-1 my-1">
						<div class="container">
							<div class="form-group row">
								<label for="setToggleExportAlert" class="col-sm-2 col-form-label"
									title="Import"> Import/Export
								</label>
								<div class="col-sm-8 px-0">
									<select id="setToggleExportAlert" class="form-control"> 
										<option value="0" selected>Show Import/Export Alerts </option> <!--the first time each browser refresh-->
										<option value="1">DO NOT Show Import/Export Alerts</option>
									</select> 
								</div>
								<div class="col-sm-2 px-0 text-center">
									<div id="btnSetToggleExportAlert" class="btn btn-success mb-1" > Set I/E Alerts Toggle </div>
								</div>
								<div class="col-sm-12 px-0">
									<textarea id="importClassString" rows="4" class="form-control"></textarea>
								</div>
								<div class="col-sm-12 px-0 text-center">
									<div id="btnImportClassString" class="btn btn-success mb-1" > Import Class String </div>
									<div id="btnReverse" class="btn btn-info mb-1" hidden> Reverse </div>
								</div>
							</div>
						</div>
					</div>
					<hr>
					<button id="btnManualCheckLevelProgress" class="btn btn-info">Manual Check Level Progress</button>
					<button id="btnResetUserData" class="btn btn-warning">Reset User Data</button>
					<button id="btnExportFullUserData" class="btn btn-primary">Export Full User Data</button>
					<button id="btnTestImport" class="btn btn-primary" hidden>Test Import</button>
					<hr>
					<button id="btnForceUpdateDefault" class="btn btn-warning">Force Update Defaults</button>
					<button id="btnDeleteAllClassObjects" class="btn btn-danger">Force Delete All</button>
					<hr>
				</div>

				<!-- Footer -->
				<div style="min-height: 5em;">
					<div id="TESTONLI" class="btn btn-success" style="display: none;">test</div>
					<div id="divDialog" title="test" style="display: none;">
						<p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span><span id="dialogText"></span></p>
					</div>
				</div>
			</div>
		</div>
		<div id="stickyMenu" > <i class="bi-list"></i> </div>
	</div>
	<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
	<script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
	<script src="https://cdn.datatables.net/2.1.8/js/dataTables.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script>
		//Using JQuery for convenience
		$(document).ready(function () {

			// === === === General Functions 1 === === === =====================================================================================================================================================================================================
			var isLogged = false;
			function ConLog(string, override = false){
				//isLogged = true; //Uncomment to show ALL Logs
				if(isLogged || override) console.log(string);
			}
			function SplitTrim(string, splitter = ","){ //ConLog(string);
				return string.split(splitter).map((c) => c.trim()); //.map(function(cb) { return cb.trim(); });
			}

			//Handling of dynamic html elements
			function HtmlRemoveToggleable(id, target, section = null, classTxt = ""){
				section ??= target;
				let sectionRemove = "		<div class=\"toggleable badge text-bg-dark border-mute\" data-target=\""+target+"Remove"+id+"\" > - </div>"
									+"		<div id=\""+target+"Remove"+id+"\" class=\"apply-removal badge text-bg-danger border-mute "+classTxt+"\" data-section=\""+section+"\"  data-target=\""+id+"\" style=\"display: none;\"> Remove </div>";
				return sectionRemove;
			}
			$(document).on("click", ".toggleable", function(event){
				let target = $(this).data("target");
				if ($('#'+target).hasClass("is-active")) {
					$('#'+target).removeClass("is-active");
					$('#'+target).hide();
				} else {
					$('#'+target).addClass("is-active");
					$('#'+target).css('display', 'inline-block');
				}
			});
			$(document).on("click", ".apply-removal", function(event){
				let section = $(this).data("section");
				let target = $(this).data("target");
				let progClass = $("."+section+"-"+target).each(function(){
					$(this).remove();
				});
			});

			//Set up for Settings. Allows users to access the settings tab to reset data in case of data errors.
			function ShowSectionSettings(){
				$('.sections').hide();
				$('#sectionSettings').show();
			}
			
			const actionUserData = "!U!";
			const actionUserDataInner = "!u!";
			const actionBorg = "!B!";
			const actionBorgInner = "!b!";
			const actionLevel = "!L!";
			const actionLevelInner = "!l!";
			const actionGrid = "!G!";
			const actionGridInner = "!g!";
			const actionCell = "!C!";
			const actionProgram = "!P!";
			const actionProgramInner = "!p!";
			const actionPath = "!^!";
			const devName = "ShitCode";
			const defaultProgramName = "Default Program";
			const defaultProgramDescription = "Keeps the enemy at the end of your Range";
			const defaultProgramCodeBlockMov = "[[[MOVEMENT]]], IF, HP_PCT, BORG_NEAR, Self, <=, 50, THEN:, MOVE_TO, BORG_NEAR, H, ELSE:, ENDIF;, IF, W/IN_RNG, BORG_NEAR, 2, >, THEN:, MOVE_TO, BORG_NEAR, 2, ELSE:, IF, W/IN_RNG, BORG_NEAR, 2, <, THEN:, MOVE_AWAY, BORG_NEAR, 2, ELSE:, ENDIF;, ENDIF;, ";
			const defaultProgramCodeBlockAct = "[[[ACTION]]], IF, W/IN_RNG, BORG_NEAR, 2, <=, THEN:, ATK, BORG_NEAR, 2, ELSE:, ENDIF;";
			const defaultProgramCodeBlock = defaultProgramCodeBlockMov + defaultProgramCodeBlockAct;
			const defaultProgramString = defaultProgramName+actionProgramInner+"1"+actionProgramInner+devName+actionProgramInner+defaultProgramDescription+actionProgramInner+defaultProgramCodeBlock;
			const codePhaseMov = "[[[MOVEMENT]]]";
			const codePhaseAct = "[[[ACTION]]]";
			const codeIfStart = "IF";
			const codeIfThen = "THEN:";
			const codeIfElse = "ELSE:";
			const codeIfEnd = "ENDIF;";
			const codeMoveTo = "MOVE_TO";
			const codeMoveAway = "MOVE_AWAY";
			const codeAtk = "ATK";
			const codeSetTarget = "SET_TARGET";
			const codeTargetDist = "TARGET_DISTANCE";
			const codeTargetStat = "TARGET_BORG_STAT";
			const codeWinRng = "W/IN_RNG";
			const codeCellNum = "CELL_NUM";
			const codeHpPct = "HP_PCT";
			const codeCondParStart = "(";
			const codeCondParEnd = ")";
			const codeCondAnd = "&&";
			const codeCondOr = "||";			


			// === === === User Data === === === =====================================================================================================================================================================================================			
			const storageUserData = "bbdb2025-storageUserData";
			const defLevelNameIntro0 = "DGL-01"; 
			const defBorgName0 = "Unit Borg";
			var userDataPrefsTickInterval = 100;
			const defUserDataUnlocks = defLevelNameIntro0 +actionUserDataInner+ defBorgName0 +actionUserDataInner+ defaultProgramName;
			const defaultUserDataString = "User"//devName//
				+actionUserData+"#FFFFFF"+actionUserData+"#FF0000"+actionUserData+"1"+actionUserData+userDataPrefsTickInterval+actionUserData+"0"+actionUserData+"0"+actionUserData+""+actionUserData+defUserDataUnlocks;
			//localStorage.setItem(storageUserData, defaultUserDataString); // Force Reset User Data
			var userDataName = ""; //devName; //
			var userDataTeamColorPlayer = "#FFFFFF"; 
			var userDataTeamColorEnemy = "#FF0000"; 
			var userDataMaxPoints = 1; 
			var overrideMaxPoints = userDataMaxPoints;
			var setTogglePlaySelectDisplay = 0; 
			var setToggleExportAlert = 0; 
			var arrUserDataUnlocksLevels = []; 
			var arrUserDataUnlocksBorgs = []; 
			var arrUserDataUnlocksPrograms = []; 
			var arrUserDataWonLevels = []; 

			function DisplayUserData(){
				$("#sidebarUserName").html(userDataName);
				$("#playDataUserName").html(userDataName);
				$("#newUserName").val(userDataName);
				
				$("#teamColorPlayer").val(userDataTeamColorPlayer);
				$("#teamColorEnemy").val(userDataTeamColorEnemy);

				$("#setGameInterval").val(userDataPrefsTickInterval);
				$("#playDataMaxPoints").html(userDataMaxPoints);
				$("#borgPointsMax").html(userDataMaxPoints);
				$("#borgPointsRemaining").html(userDataMaxPoints);
				overrideMaxPoints = userDataMaxPoints;

				$("#setTogglePlaySelectDisplay").val(setTogglePlaySelectDisplay); //ConLog("setTogglePlaySelectDisplay: "+setTogglePlaySelectDisplay);
				$("#setToggleExportAlert").val(setToggleExportAlert); 
			}
			function LoadUserData(override = null){ //ConLog("===LoadUserData: ");
				let storageString = localStorage.getItem(storageUserData); 
				storageString = storageString ? storageString : defaultUserDataString;//
				storageString = override == null ? storageString : override;//
				//storageString = defaultUserDataString; //Uncomment to force reset User Data

				let storageStringSplit = SplitTrim(storageString, actionUserData); //ConLog(storageUserData+", storageString: "+storageString, true);
				let sMax = storageStringSplit.length;
				let s = 0;
				userDataName = storageStringSplit[s++]; //ConLog("userDataName: "+userDataName); //devName; //
				userDataTeamColorPlayer = storageStringSplit[s++]; //ConLog("userDataTeamColorPlayer: "+userDataTeamColorPlayer);
				userDataTeamColorEnemy = storageStringSplit[s++]; //ConLog("userDataTeamColorEnemy: "+userDataTeamColorEnemy);
				userDataMaxPoints = storageStringSplit[s++]; //ConLog("userDataMaxPoints: "+userDataMaxPoints);
				userDataPrefsTickInterval = storageStringSplit[s++]; 
				userDataPrefsTickInterval = userDataPrefsTickInterval == "null" ? 100 : userDataPrefsTickInterval; //ConLog("userDataPrefsTickInterval: "+userDataPrefsTickInterval);
				setTogglePlaySelectDisplay = storageStringSplit[s++]; //ConLog("setTogglePlaySelectDisplay: "+setTogglePlaySelectDisplay);
				setToggleExportAlert = storageStringSplit[s++]; //ConLog("setToggleExportAlert: "+setToggleExportAlert);

				arrUserDataWonLevels = SplitTrim(storageStringSplit[sMax-2]);
				let tempUserDataUnlocks = SplitTrim(storageStringSplit[sMax-1], actionUserDataInner); //ConLog("tempUserDataUnlocks: "); ConLog(tempUserDataUnlocks);
				let u = 0;
				arrUserDataUnlocksLevels = SplitTrim(tempUserDataUnlocks[u++]);
				arrUserDataUnlocksBorgs = SplitTrim(tempUserDataUnlocks[u++]);
				arrUserDataUnlocksPrograms = SplitTrim(tempUserDataUnlocks[u++]);

				if(userDataName == null || userDataName == "") UpdateUserData(true,true);
				DisplayUserData();
			}
			function GetActionUnlocks(action){
				return (action == actionBorg ? arrUserDataUnlocksBorgs 
					: (action == actionLevel ? arrUserDataUnlocksLevels 
					: (action == actionProgram ? arrUserDataUnlocksPrograms 
					: null)));
			}
			function FindInUnlocks(action, findName){
				let arrTemp = GetActionUnlocks(action);
				for(let i=0; i<arrTemp.length;i++) if(findName == arrTemp[i]) return true;
				return false;
			}
			function AddToUserDataUnlocks(action, newUnlockName){
				let isUnlockedInUserData = FindInUnlocks(action, newUnlockName);
				if(!isUnlockedInUserData){
					let arrTemp = GetActionUnlocks(action);
					arrTemp.push(newUnlockName);
				}
			}
			function GetStringUserDataUnlocks() {
				let userDataUnlocks = "";//actionUserData;
				for(let i=0; i<arrUserDataUnlocksLevels.length;i++){
					userDataUnlocks += i>0 ? ", " : "";
					userDataUnlocks += arrUserDataUnlocksLevels[i];
				}
				userDataUnlocks += actionUserDataInner;
				for(let i=0; i<arrUserDataUnlocksBorgs.length;i++){
					userDataUnlocks += i>0 ? ", " : "";
					userDataUnlocks += arrUserDataUnlocksBorgs[i];
				}
				userDataUnlocks += actionUserDataInner;
				for(let i=0; i<arrUserDataUnlocksPrograms.length;i++){
					userDataUnlocks += i>0 ? ", " : "";
					userDataUnlocks += arrUserDataUnlocksPrograms[i];
				}
				//userDataUnlocks += actionUserData; //ConLog("GetStringUserDataUnlocks, userDataUnlocks: "+userDataUnlocks);
				return userDataUnlocks;
			}
			function IsLevelWon(findName){
				for(let i=0; i<arrUserDataWonLevels.length;i++) if(findName == arrUserDataWonLevels[i]) return true;
				return false;
			}
			function AddToUserDataWonLevels(levelName){
				if(!IsLevelWon(levelName)){
					arrUserDataWonLevels.push(levelName);
				}
			}
			function ClearUserDataWonLevels() {
				let userDataWonLevels = [];
				for(let i=0; i<arrUserDataWonLevels.length;i++) if(arrUserDataWonLevels[i] != "") userDataWonLevels.push(arrUserDataWonLevels[i]);
				return userDataWonLevels;
			}
			function GetStringUserDataWonLevels() {
				arrUserDataWonLevels = ClearUserDataWonLevels();
				let userDataWonLevels = "";//ConLog(arrUserDataWonLevels);
				for(let i=0; i<arrUserDataWonLevels.length;i++){
					if(arrUserDataWonLevels[i] != ""){
						userDataWonLevels += i>0 ? ", " : "";
						userDataWonLevels += arrUserDataWonLevels[i];
					}
				}
				//ConLog("userDataWonLevels: "+userDataWonLevels);
				return userDataWonLevels;
			}
			function GetUserData(){
				return userDataName 
						+actionUserData+ userDataTeamColorPlayer +actionUserData+ userDataTeamColorEnemy
						+actionUserData+ userDataMaxPoints +actionUserData+ userDataPrefsTickInterval
						+actionUserData+ setTogglePlaySelectDisplay +actionUserData+ setToggleExportAlert 
						+actionUserData+ GetStringUserDataWonLevels() +actionUserData+ GetStringUserDataUnlocks();
			}
			function UpdateUserData(isForReset = false, override = false){ //ConLog("===UpdateUserData, isForReset: "+isForReset);
				let isConfirmed = isForReset && !override ? window.confirm("User data will be restored to the default. Continue with User Reset?") : true;
				if (isConfirmed) {
					let userData = isForReset ? defaultUserDataString 
						: GetUserData();
					//ConLog("UpdateUserData, userData: "+userData);
					localStorage.setItem(storageUserData, userData);
					LoadUserData();
				}
				DisplayUserData();
			}
			function UpdateUserName(){ 
				let newUserName = $("#newUserName").val();
				if(newUserName != devName){
					userDataName = newUserName;
					UpdateUserData();
				}else alert("You can't be me.");
			}
			$("#btnUpdateUserName").click(function(){
				UpdateUserName();
			});
			$("#btnUpdateTeamColorPlayer").click(function(){
				userDataTeamColorPlayer = $("#teamColorPlayer").val(); ConLog("userDataTeamColorPlayer: "+userDataTeamColorPlayer);
				UpdateUserData();
			});
			$("#btnUpdateTeamColorEnemy").click(function(){
				userDataTeamColorEnemy = $("#teamColorEnemy").val(); ConLog("userDataTeamColorEnemy: "+userDataTeamColorEnemy);
				UpdateUserData();
			});
			$("#btnSetTogglePlaySelectDispay").click(function(){
				setTogglePlaySelectDisplay = $("#setTogglePlaySelectDisplay").val(); //ConLog("setTogglePlaySelectDisplay: "+setTogglePlaySelectDisplay);
				UpdateUserData();
			});
			$("#btnGameInterval").click(function(){
				userDataPrefsTickInterval = $("#setGameInterval").val(); //ConLog("setTogglePlaySelectDisplay: "+setTogglePlaySelectDisplay);
				UpdateUserData();
			});
			$("#btnSetToggleExportAlert").click(function(){
				setToggleExportAlert = $("#setToggleExportAlert").val(); //ConLog("setTogglePlaySelectDisplay: "+setTogglePlaySelectDisplay);
				UpdateUserData();
			});
			$("#marqDataErrorReminder").on("mouseover", function () {
				$(this).hide();
				$("#divDataErrorReminder").show();
			});
			
			LoadUserData();
			UpdateUserData();
			//ConLog("GetUserData: "+GetUserData());
			var isUserDev = false;



			// === === === Classes/Objects/Tables === === === =====================================================================================================================================================================================================================================================================================================================================

			//Using an Array to store each existing Class
			var arrBorgs = [];
			var arrPrograms = [];
			var arrLevels = [];
			var arrGrids = [];
			var arrCells = [];

			//Helpers for Class Object specific data
			function GetActionArray(action){ 
				return (action == actionBorg ? arrBorgs 
					: (action == actionLevel ? arrLevels 
					: (action == actionGrid ? arrGrids 
					: (action == actionCell ? arrCells 
					: (action == actionProgram ? arrPrograms 
					: null)))));
			}
			function ClearActionArray(action){ 
				if(action == actionBorg){
					arrBorgs = [];
				}else if(action == actionLevel){
					arrLevels = [];
				}else if(action == actionGrid){
					arrGrids = [];
				}else if(action == actionCell){
					arrCells = [];
				}else if(action == actionProgram){
					arrPrograms = [];
				}
			}
			function GetActionInner(action){
				return (action == actionBorg ? actionBorgInner 
					: (action == actionLevel ? actionLevelInner 
					: (action == actionGrid ? actionGridInner 
					: (action == actionProgram ? actionProgramInner 
					: (action == actionExport ? actionExportInner 
					: null)))));
			}
			function GetActionWord(action){
				return (action == actionBorg ? "Borg" 
					: (action == actionLevel ? "Level" 
					: (action == actionGrid ? "Grid" 
					: (action == actionCell ? "Cell" 
					: (action == actionProgram ? "Program" 
					: null)))));
			}
			function FindInActionArray(action, findName){
				let arrTemp = GetActionArray(action);
				for(let i=0; i<arrTemp.length;i++){
					if(findName == arrTemp[i].name){
						return arrTemp[i];
					}
				}
				return null;
			}
			function FindInArray(array, find, nameOnly = false){
				for(let i=0; i<array.length;i++){
					let flag = nameOnly ? array[i].name : array[i];
					if(find == flag){
						return array[i];
					}
				}
				return null;
			}
			function VerifyNameInArray(action, findName){
				let arrTemp = GetActionArray(action);
				let isNameFound = false;
				for(let i=0; i<arrTemp.length && !isNameFound;i++){ //if(action == actionBorg) ConLog("VerifyNameInArray, findName == arrTemp[i].name : "+findName+" == "+arrTemp[i].name);
					isNameFound = arrTemp[i] != null && findName == arrTemp[i].name;
				}
				if(isNameFound){
					findName = findName + "_COPY"; //if(action == actionBorg) ConLog("VerifyNameInArray, findName1:"+findName);
					findName = VerifyNameInArray(action, findName);
				}
				return findName;
			}			

			// === === === Database Class
			class DbTable {
				constructor() {
					this.detailsColCount = 4; //name, isUnlocked, createdBy, description
				}
				ImportDbString(detailsSplit, keepUnlock = false){ //Always update with ClassDetailString()
					//let detailsSplit = SplitTrim(stringClass, splitter); ConLog("class Borg detailsSplit: ");ConLog(detailsSplit);
					this.name = detailsSplit[0];//name;
					this.isUnlocked = keepUnlock ? this.isUnlocked : detailsSplit[1]; //unlocked;
					this.createdBy = detailsSplit[2]; //created by
					this.description = detailsSplit[3]; //desc;
				}
				DetailsToString(splitter){
					return this.name +splitter+ this.isUnlocked +splitter+ this.createdBy +splitter+ this.description +splitter;
				}
			}
			function ClassDetailString(action, name, description, isUnlocked = "1", createdBy = devName){
				isUnlocked ??= "1";
				createdBy ??= userDataName;
				return name +action+ isUnlocked +action+ createdBy +action+ description +action;
			}

			// === === === Borg Class Helpers
			const arrBorgStats = ["Hp", "Speed", "Damage", "Range", "Cooldown"];
			const arrBorgStatCodes = ["DUR", "SPD", "DMG", "RNG", "CLD"];
			//FTT = Five Ten Twenty Scaling. Completely Arbitrary. It totals to 100 at max stat.
			maxStatFTT = 9;
			function StatToPointsScaleFTT(stat, isTotal = true){
				//will return 100 if stat is 9
				stat = Number(stat); //ConLog("stat: "+stat);
				let lim1 = 4;
				let lim2 = 6;
				let lim3 = maxStatFTT;
				//let lim4 = 9;
				if(stat <= 0) return 0;
				else if(stat <= lim1) 	return !isTotal ? 5 : stat*5;
				else if(stat <= lim2) 	return !isTotal ? 10 : (lim1*5)+((stat-lim1)*10);
				else if(stat <= lim3) 	return !isTotal ? 20 : (lim1*5)+((lim2-lim1)*10)+((stat-lim2)*20);
				//else if(stat <= 9) 		return (lim1*5)+((lim2-lim1)*10)+((lim3-lim2)*20)+((stat-lim3)*30);

				/* //will return 100 if stat is 10
				else if(stat <= 4) return stat*5;
				else if(stat <= 8) return (4*5)+((stat-4)*10);
				else if(stat <= 10) return (4*5)+(4*10)+((stat-8)*20);
				//*/

				/*
				let returnVal = 0;
				else if(stat <= 4) returnVal = stat * 5;
				else if(stat <= 10) returnVal = stat * 10;
				return !isTotal ? returnVal 
								: returnVal + StatToPointsScaleFTT(stat - 1, true);
				//*/
				return null;
			}
			//console.log("StatToPointsScaleFTT: "+StatToPointsScaleFTT(maxStatFTT));
			function PointsToStatScaleFTT(pts){
				if(pts <= 0) return 0;
				for (let i = 0; i <= maxStatFTT; i++) {
					if(pts == StatToPointsScaleFTT(i)) return i;
				}
				return PointsToStatScaleFTT(pts-1);
			}
			function isStatScalingFTT(stat){
				let s = 0;
				if(stat == arrBorgStats[s++]){ }//HP
				else if(stat == arrBorgStats[s++]){ return true; }//Speed
				else if(stat == arrBorgStats[s++]){ }//Damage
				else if(stat == arrBorgStats[s++]){ }//Range
				else if(stat == arrBorgStats[s++]){ return true; }//Cooldown
				return false;
			}
			/*
			function StatToPointsScaleGeometric(stat, isTotal = true){
				return isTotal 	? ((2 ** stat) - 1) / (2 - 1) //Total Pts required
								: 2 ** (stat - 1); //Next Pts required; 
			}
			function PointsToStatScaleGeometric(pts){
				if(pts == 0) return 0;
				for (let i = 1; i <= 100; i++) {
					if(pts == StatToPointsScaleGeometric(i)) return i;
				}
				return PointsToStatScaleGeometric(pts-1);
			}
			//*/
			// === === === Borg Class
			class Borg extends DbTable{
				constructor(stringBorg) {//name, unlocked, desc, symbol, dur, spd, dmg, rng, cld, prog = defaultProgramName
					super(); 
					this.ImportStringToThis(stringBorg);
				}
				ImportStringToThis(stringBorg, keepUnlock = false){ //Always update with SaveFormToArray(action)
					let detailsSplit = SplitTrim(stringBorg, actionBorgInner); //ConLog("class Borg detailsSplit: ");ConLog(detailsSplit);
					this.ImportDbString(detailsSplit, keepUnlock);
					let d = this.detailsColCount;

					let borgSplit = SplitTrim(detailsSplit[d++]); 
					let b = 0;
					this.symbol = borgSplit[b++];//symbol;
					let prog = borgSplit[b++]; //ConLog("class Borg prog: "+prog);
					this.program = prog != null && prog != undefined && prog != "" ? prog : defaultProgramName;

					let statsGeneralSplit = SplitTrim(detailsSplit[d++]); 
					let g = 0;
					const ptsLimit = 100;
					let temp = statsGeneralSplit[g++]; temp ??= 0; 
					this.pts_hp = Math.min(temp, ptsLimit); 		temp = statsGeneralSplit[g++]; temp ??= 0; 
					this.pts_speed = Math.min(temp, ptsLimit); 		temp = statsGeneralSplit[g++]; temp ??= 0; 
					//pts_defense //damage reduction
					//pts_hp_regen
					//pts_dodge
					//pts_vision
					//effect resistance

					let statsActionSplit = SplitTrim(detailsSplit[d++]); 
					let a = 0;
					temp = statsActionSplit[a++]; temp ??= 0; 
					this.pts_damage = Math.min(temp, ptsLimit); 		temp = statsActionSplit[a++]; temp ??= 0; 
					this.pts_range = Math.min(temp, ptsLimit); 			temp = statsActionSplit[a++]; temp ??= 0; 
					this.pts_cooldown = Math.min(temp, ptsLimit); 		temp = statsActionSplit[a++]; temp ??= 0; 
					//pts_crit_chance
					//pts_crit_multi
					//pts_dot_chance
					//pts_dot_damage
					//pts_heal
					//all possible status effects

					this.AllocatePoints();
					this.position = null;
				}
				AllocateStat(type, pts = null, allocatePts = false){
					let s = 0;
					if(type == arrBorgStats[s++]){//Hp
						pts ??= this.pts_hp; 
						if(allocatePts) this.pts_hp = pts
						this.max_hp = 10+(5*pts);
						this.cur_hp = this.max_hp;
						return this.cur_hp;

					}else if(type == arrBorgStats[s++]){//Speed
						pts ??= this.pts_speed;
						if(allocatePts) this.pts_speed = pts
						this.base_speed = Math.max(0, 9 - PointsToStatScaleFTT(pts)); //ConLog("base_speed: "+this.base_speed);
						this.tick_speed = this.base_speed;
						return this.base_speed;

					}else if(type == arrBorgStats[s++]){//Damage
						pts ??= this.pts_damage;
						if(allocatePts) this.pts_damage = pts
						this.damage = 1+(1*pts);
						return this.damage;

					}else if(type == arrBorgStats[s++]){//Range
						pts ??= this.pts_range;
						if(allocatePts) this.pts_range = pts
						let scalingInterval = 2;
						let scalingRng = Math.max(0, (Math.floor((pts - scalingInterval) / scalingInterval)));
						this.range = 1+scalingRng;
						return this.range;

					}else if(type == arrBorgStats[s++]){//Cooldown
						pts ??= this.pts_cooldown;
						if(allocatePts) this.pts_cooldown = pts
						this.base_cooldown = Math.max(0, 9 - PointsToStatScaleFTT(pts)); //ConLog("base_cooldown: "+this.base_cooldown);
						this.tick_cooldown = this.base_cooldown;
						return this.base_cooldown;
					}
				}
				AllocatePoints(){
					let s = 0;
					this.AllocateStat(arrBorgStats[s++]);
					this.AllocateStat(arrBorgStats[s++]);
					this.AllocateStat(arrBorgStats[s++]);
					this.AllocateStat(arrBorgStats[s++]);
					this.AllocateStat(arrBorgStats[s++]);
					this.step = 1;
					//ConLog(this.name+" AllocatePoints:"); ConLog(this);
				}
				ExportPtsAsString(){
					return this.DetailsToString(actionBorgInner)+this.symbol+","+this.program
						+actionBorgInner+this.pts_hp+","+this.pts_speed
						+actionBorgInner+this.pts_damage+","+this.pts_range+","+this.pts_cooldown;
				}
				Duplicate(){
					let dupe = new Borg(this.ExportPtsAsString());
					dupe.AllocatePoints();
					return dupe;
				}
				DisplayStatsAsString(){
					return this.name+","+this.cur_hp+"/"+this.max_hp+","+this.base_speed+","+this.damage+","+this.range+","+this.cooldown;
				}
				GetStat(stat, isGetPoints = false){
					let s = 0;
					if(stat == arrBorgStats[s++]){ return isGetPoints ? this.pts_hp : this.max_hp;
					}else if(stat == arrBorgStats[s++]){ return isGetPoints ? this.pts_speed : this.base_speed;
					}else if(stat == arrBorgStats[s++]){ return isGetPoints ? this.pts_damage : this.damage;
					}else if(stat == arrBorgStats[s++]){ return isGetPoints ? this.pts_range : this.range;
					}else if(stat == arrBorgStats[s++]){ return isGetPoints ? this.pts_cooldown : this.base_cooldown; }
				}
				GetHpPercentage(){
					return (this.cur_hp / this.max_hp)*100;
				}
				GetTotalPoints(){
					return Number(this.pts_hp)+Number(this.pts_speed)+Number(this.pts_damage)+Number(this.pts_range)+Number(this.pts_cooldown);
				}
				IsAlive(){
					return this.cur_hp > 0;
				}
			}
			function FormToClassStringBorg(className = null){
				className ??= $('#borgName').val();
				let classObj = FindInActionArray(actionBorg, className);
				let classObjIsUnlocked = classObj != null ? classObj.isUnlocked : null;
				let classObjCreatedBy = classObj != null ? classObj.createdBy : null;
				let borgProgram = $('#borgProgram').val();
				let tempProgram = (borgProgram != null && borgProgram != "") ? borgProgram : defaultProgramName;
				let formToString = ClassDetailString(actionBorgInner, className, $('#borgDescription').val(), classObjIsUnlocked, classObjCreatedBy)
					+$('#borgSymbol').val()+","+tempProgram+actionBorgInner
					+$('#borgHpPts').val()+","+$('#borgSpeedPts').val()+actionBorgInner
					+$('#borgDamagePts').val()+","+ $('#borgRangePts').val()+","+ $('#borgCooldownPts').val();
				//ConLog("FormToClassStringBorg, formToString: "); ConLog(formToString);
				return formToString;
			}
			
			// === === === Program Class
			class Program extends DbTable{
				arrCodeBlocks = [];
				constructor(stringProgram) {//name, desc, unlocked, stringCodeBlocks
					super(); 
					this.ImportStringToThis(stringProgram);
				}
				ImportStringToThis(stringProgram, keepUnlock = false){ //Always update with SaveFormToArray(action)
					let programSplit = SplitTrim(stringProgram, actionProgramInner); //ConLog("new Program, stringProgram: "+stringProgram);
					this.ImportDbString(programSplit, keepUnlock);

					let p = this.detailsColCount;
					this.arrCodeBlocks = SplitTrim(programSplit[p]);//SplitTrim(stringCodeBlocks);
					//ConLog(programSplit[3]); ConLog(this.arrCodeBlocks);
				}
				GetCodeBlockString(){ //ConLog("GetCodeBlockString: "); ConLog(this.arrCodeBlocks);
					let stringReturn = "";
					for(let i=0; i<this.arrCodeBlocks.length; i++){
						stringReturn += i>0 ? ", " : "";
						stringReturn += this.arrCodeBlocks[i];
					}
					return stringReturn;
				}
				ToString(){
					let stringReturn = this.DetailsToString(actionProgramInner);
					for(let i=0; i<this.arrCodeBlocks.length; i++){
						stringReturn += i>0 ? ", " : "";
						stringReturn += this.arrCodeBlocks[i];
					}
					return stringReturn;
				}
				GetComplexity(){
					let arr = this.arrCodeBlocks;
					let complexity = arr.length;
					complexity = 0;
					for(let i=0; i<arr.length; i++){
						if(arr[i] == codeCondAnd  || arr[i] == codeCondOr 
								|| arr[i] == codeIfThen || arr[i] == codeIfElse || arr[i] == codeIfEnd){
							complexity++;
						}
					}
					return complexity;
				}
				Duplicate(){
					let dupe = new Program(this.ToString());
					return dupe;
				}
			}
			//Get the String equivalent of the form created Program
			function GetCurrentProgramString(){ //ConLog("GetCurrentProgramString: ");
				let tempProgString = "";
				let progClass = $('.prog-code').map(function() {return $(this);}).get();
				for(let i=0; i<progClass.length;i++){
					let txt = progClass[i].data("code");
					txt = (txt == "prog-select" ? progClass[i].find(":selected").val() 
						: (txt == "prog-val" ? progClass[i].val() 
						: txt));
					tempProgString += i>0 ? ", " : "";
					tempProgString += txt;
				}
				return tempProgString;
			}
			function FormToClassStringProgram(className = null){
				className ??= $('#progName').val();
				let classObj = FindInActionArray(actionProgram, className);//ConLog(classObj);
				let classObjIsUnlocked = classObj != null ? classObj.isUnlocked : null;
				let classObjCreatedBy = classObj != null ? classObj.createdBy : null;
				
				let formToString = ClassDetailString(actionProgramInner, className, $('#progDescription').val(), classObjIsUnlocked, classObjCreatedBy)+
					GetCurrentProgramString();
				return formToString;
			}

			// === === === Level Classes
			//Coordinates Class to store each Coordinates 
			class Coordinate {
				constructor(x, y) {
					this.x = x;
					this.y = y;
				}
				ToString(){
					return this.x+","+this.y
				}
				isEqual(other){
					return this.x == other.x && this.y == other.y;
				}
				isEqualInt(x, y){
					return this.x == x && this.y == y;
				}
				Round() {
					this.x = Math.round(this.x);
					this.y = Math.round(this.y);
					return this;
				}
			}
			//CellType Class to store each CellType's data
			class CellType {
				constructor(id, name, bg, border, passable = true, opaque = false, healPercent = 0) {
					this.dbid = id;
					this.name = name;
					this.background = bg;
					this.border = border;
					this.isPassable = passable;
					this.isOpaque = opaque;
					this.healPercent = healPercent;
				}
				ToString(){
					return this.dbid+","+this.name+","+this.background+","+this.border+","+this.isPassable+","+this.isOpaque;
				}
			}
			//Convert Grid Cells as String to 2D Array
			function StringCellsTo2dArray(stringCells, maxCoordinates){ //ConLog("StringCellsTo2dArray("+maxCoordinates.ToString()+"): "+stringCells);
				let cell2d = [];
				let arrStringCells = SplitTrim(stringCells);
				let indexStringCells = 0;
				for(let y=maxCoordinates.y-1; y>=0; y--){
					for(let x=0; x<maxCoordinates.x; x++){
						cell2d[x] ??= [];
						let cell = indexStringCells < arrStringCells.length  ? arrStringCells[indexStringCells++] : 0;
						cell2d[x][y] = cell;
					}
				}
				return cell2d;
			}
			//GameGrid Class to store each Grid's data 
			class Grid extends DbTable{
				constructor(stringGameGrid) {//name, desc, maxPBorgs, maxPts, maxX, maxY, playerX, playerY, stringEnemyTeam, stringCells, id = null
					super(); 
					this.ImportStringToThis(stringGameGrid);
				}
				ImportStringToThis(stringGameGrid, keepUnlock = false){ //Always update with SaveFormToArray(action)
					let detailsSplit = SplitTrim(stringGameGrid, actionGridInner); //ConLog(stringGameGrid);
					this.ImportDbString(detailsSplit, keepUnlock); //ConLog(detailsSplit);

					let d = this.detailsColCount;
					let gridSplit = SplitTrim(detailsSplit[d++]); //ConLog(gridSplit);
					let m = 0;
					this.maxCoordinates = new Coordinate(gridSplit[m++], gridSplit[m++]);

					this.cell2d = [];
					this.cell2d = StringCellsTo2dArray(detailsSplit[d++], this.maxCoordinates);
				}
				ExportCellsAsString(isFormatted = false){
					let cellString = ""; //ConLog("ExportCellsAsString, "); ConLog(this);
					for(let y=this.maxCoordinates.y-1; y>=0; y--){
						for(let x=0; x<this.maxCoordinates.x; x++){
							cellString += this.cell2d[x][y]+",";
						}
						cellString += isFormatted ? "\r\n" : "";
					}
					let countSlices = isFormatted ? -3 : -1;
					let stringReturn = cellString.slice(0, countSlices); 
					return stringReturn;
				}
				ExportGridDetailsAsString(){
					let stringReturn = this.DetailsToString(actionGridInner)+this.maxCoordinates.ToString();
					return stringReturn;
				}
				ExportAsString(){
					return this.ExportGridDetailsAsString()+actionGridInner
							+this.ExportCellsAsString();
				}
				Duplicate(){
					let dupe = new Grid(this.ExportAsString()); //ConLog("Duplicate: "); ConLog(dupe);
					return dupe;
				}
			}
			function GetFormGridCellsString(){
				return $('#gridCellsString').val().replace('\r\n','').replace(' ','');
			}
			function FormToClassStringGrid(className = null){
				className ??= $('#gridName').val();
				let classObj = FindInActionArray(actionGrid, className);
				let classObjIsUnlocked = classObj != null ? classObj.isUnlocked : null;
				let classObjCreatedBy = classObj != null ? classObj.createdBy : null;
				let formToString = ClassDetailString(actionGridInner, className, $('#gridDescription').val(), classObjIsUnlocked, classObjCreatedBy)
					+$('#gridMaxX').val()+","+$('#gridMaxY').val()+""
					+actionGridInner+GetFormGridCellsString();
				//ConLog(formToString);
				return formToString;
			}
			//Level Class to store each Level's data 
			class Level extends DbTable{
				constructor(stringLevel) {//name, desc, maxPBorgs, maxPts, maxX, maxY, playerX, playerY, stringEnemyTeam, stringCells, id = null
					super(); 
					this.ImportStringToThis(stringLevel);
				}
				ImportStringToThis(stringLevel, keepUnlock = false){ //Always update with SaveFormToArray(action)
					let detailsSplit = SplitTrim(stringLevel, actionLevelInner);
					this.ImportDbString(detailsSplit, keepUnlock);

					let d = this.detailsColCount;
					let levelSplit = SplitTrim(detailsSplit[d++]); //ConLog(levelSplit);
					let m = 0;
					this.maxPoints = levelSplit[m++]; //maxPts;
					this.maxPlayerBorgs = levelSplit[m++]; //maxPBorgs;
					
					this.gridName = detailsSplit[d++];

					this.arrPlayerBorgPos = []; //[new Coordinate(levelSplit[8], levelSplit[9]), new Coordinate(levelSplit[10], levelSplit[11])]; 
					this.ImportPlayerTeamString(detailsSplit[d++]);

					this.arrEnemyBorgNames = []; //Default Enemy Borg/s
					this.arrEnemyBorgPos = []; //Default Enemy Position/s
					this.ImportEnemyTeamString(detailsSplit[d++]);

					if(detailsSplit[d] != null) this.ImportLevelUnlocks(detailsSplit[d++]); //Levels to Unlock after winning
					//ConLog("ImportStringToThis, FINAL: ");ConLog(this);
				}
				ImportPlayerTeamString(stringPlayerTeam){ 
					let playerBorgPosSplit = SplitTrim(stringPlayerTeam); //ConLog(levelSplit);
					let isAxisY = false;
					let tempAxisX = null;
					playerBorgPosSplit.forEach(axis => {
						if(isAxisY)
							this.arrPlayerBorgPos.push(new Coordinate(tempAxisX, axis));
						else
							tempAxisX = axis;
						isAxisY = !isAxisY;
					});
				}
				ImportEnemyTeamString(stringEnemyTeam){ //ConLog("ImportEnemyTeamString, stringEnemyTeam: "+stringEnemyTeam);
					this.arrEnemyBorgNames = [];
					this.arrEnemyBorgPos = [];
					let arrEnemyTeam = SplitTrim(stringEnemyTeam, actionBorg);
					for(let i=0; i<arrEnemyTeam.length; i++){
						let arrEnemy = SplitTrim(arrEnemyTeam[i]); 
						this.arrEnemyBorgNames.push(arrEnemy[0]);
						this.arrEnemyBorgPos.push(new Coordinate(arrEnemy[1], arrEnemy[2]));
					}
				}
				ImportLevelUnlocks(stringLevelUnlocks){ 
					this.arrLevelUnlocks = [];
					let arrLevelsU = SplitTrim(stringLevelUnlocks);
					for(let i=0; i<arrLevelsU.length; i++){
						if(arrLevelsU[i] != null) this.arrLevelUnlocks.push(arrLevelsU[i]);
					}
				}
				ExportLevelUnlocksAsString(){
					let stringReturn = "";
					if(this.arrLevelUnlocks != null){
						for(let i=0; i<this.arrLevelUnlocks.length; i++){
							stringReturn += i>0 ? ", " : "";
							stringReturn += this.arrLevelUnlocks[i];
						}
					}
					return stringReturn;
				}
				ExportEnemyTeamAsString(namesOnly = false){
					let stringReturn = "";
					for(let i=0; i<this.arrEnemyBorgNames.length; i++){
						stringReturn += i > 0 ? actionBorg : "";
						stringReturn += this.arrEnemyBorgNames[i];
						stringReturn += namesOnly ? "" : ", "+this.arrEnemyBorgPos[i].ToString();
					}
					return stringReturn;
				}
				ExportPlayerTeamAsString(){
					let stringReturn = "";
					for(let i=0; i<this.arrPlayerBorgPos.length; i++){
						stringReturn += i > 0 ? ", " : "";
						stringReturn += this.arrPlayerBorgPos[i].ToString();
					}
					return stringReturn;
				}
				ExportLevelDetailsAsString(){
					let stringReturn = this.DetailsToString(actionLevelInner)+this.maxPoints+","+this.maxPlayerBorgs;
					return stringReturn;
				}
				ExportAsString(){
					return this.ExportLevelDetailsAsString()+actionLevelInner
							+this.gridName+actionLevelInner
							+this.ExportPlayerTeamAsString()+actionLevelInner
							+this.ExportEnemyTeamAsString()+actionLevelInner
							+this.ExportLevelUnlocksAsString();
				}
				Duplicate(){
					let dupe = new Level(this.ExportAsString()); //ConLog("Duplicate: "); ConLog(dupe);
					return dupe;
				}
			}
			//Get the String equivalent of the Playert Starting coords in the Level form
			function GetLevelPlayerTeamString(){ //ConLog("GetLevelEnemyTeamString: ");
				let stringReturn = "";
				let levelFormPlayer = $('.level-form-player').map(function() {return $(this);}).get();
				for(let i=0; i<levelFormPlayer.length;i++){
					let eId = levelFormPlayer[i].data("id");
					let levelPlayerPosX = levelFormPlayer[i].val();
					let levelPlayerPosY = $("#levelPlayerY"+eId).val();
					stringReturn += (i == 0 ? "" : ", ");
					stringReturn += levelPlayerPosX+","+levelPlayerPosY;
					//ConLog("GetLevelEnemyTeamString, stringReturn: levelPlayerPosX+","+levelPlayerPosY);
				}
				return stringReturn;
			}
			//Get the String equivalent of the Level Enemy/ies in the Level form
			function GetLevelEnemyTeamString(){ //ConLog("GetLevelEnemyTeamString: ");
				let stringReturn = "";
				let levelFormEnemy = $('.level-form-enemy').map(function() {return $(this);}).get();
				for(let i=0; i<levelFormEnemy.length;i++){
					let eId = levelFormEnemy[i].data("id");
					let levelEnemyName = levelFormEnemy[i].find(":selected").val();
					let levelEnemyPosX = $("#levelEnemyX"+eId).val();
					let levelEnemyPosY = $("#levelEnemyY"+eId).val();
					stringReturn += (i == 0 ? "" : actionBorg);
					stringReturn += levelEnemyName+", "+levelEnemyPosX+","+levelEnemyPosY;
					//ConLog("GetLevelEnemyTeamString, stringReturn: "+levelEnemyName+", "+levelEnemyPosX+","+levelEnemyPosY);
				}
				return stringReturn;
			}
			function GetLevelUnlocksString(noPrefix = false){ 
				let stringReturn = "";

				//TODO when player made levels can have unlockable levels
				
				return stringReturn;
			}
			function FormToClassStringLevel(className = null){
				className ??= $('#levelName').val();
				let classObj = FindInActionArray(actionLevel, className);
				let classObjIsUnlocked = classObj != null ? classObj.isUnlocked : null;
				let classObjCreatedBy = classObj != null ? classObj.createdBy : null;
				let formToString = ClassDetailString(actionLevelInner, className, $('#levelDescription').val(), classObjIsUnlocked, classObjCreatedBy)
					+$('#levelMaxPoints').val()+","+$('#levelMaxPlayerBorgs').val()
					+actionLevelInner+$('#levelGridName').find(":selected").val()
					+actionLevelInner+GetLevelPlayerTeamString()//$('#levelPlayerX0').val()+","+$('#levelPlayerY0').val()+","+
					+actionLevelInner+GetLevelEnemyTeamString()
					+actionLevelInner+GetLevelUnlocksString();
				//ConLog(formToString);
				return formToString;
			}
			
			
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// === === === Defaults Initialization === === === =====================================================================================================================================================================================================
			var arrDefaultBorgs = [];
			var arrDefaultLevels = [];
			var arrDefaultGrids = [];
			var arrDefaultPrograms = [];

			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// === === === Program Initialization === === === 
			arrDefaultPrograms.push(defaultProgramString);

			const defProgramName1 = "Turret";
			const defProgram1 = defProgramName1+actionProgramInner+"1"+actionProgramInner+devName+actionProgramInner+"Just shoot it."+actionProgramInner+"[[[MOVEMENT]]], "+defaultProgramCodeBlockAct;
			arrDefaultPrograms.push(defProgram1);
			const defProgramName2 = "All Gas No Brakes";
			const defProgram2 = defProgramName2+actionProgramInner+"2"+actionProgramInner+devName+actionProgramInner+"De ja vu."+actionProgramInner+"[[[MOVEMENT]]], IF, W/IN_RNG, BORG_NEAR, 2, >, THEN:, MOVE_TO, BORG_NEAR, 2, ELSE:, ENDIF;, [[[ACTION]]], IF, W/IN_RNG, BORG_NEAR, 2, <=, THEN:, ATK, BORG_NEAR, 2, ELSE:, ENDIF;";
			arrDefaultPrograms.push(defProgram2);

			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// === === === Borg Initialization === === === name, unlocked, desc, symbol, 		dur, spd, 		dmg, rng, cld, 		program
			
			//const defBorgName0 = "Unit Borg";
			let defDetails = ClassDetailString(actionBorgInner, defBorgName0, "Basic");
			const defBorg0 = defDetails+" U "+actionBorgInner+" 0, 0 "+actionBorgInner+" 0, 0, 0";
			arrDefaultBorgs.push(defBorg0);

			const defBorgName1 = "RNG-P2";
			defDetails = ClassDetailString(actionBorgInner, defBorgName1, "PURE RNG 2", "0");
			const defBorg1 = defDetails+" R "+actionBorgInner+" 0, 0 "+actionBorgInner+" 0, 4, 0";
			arrDefaultBorgs.push(defBorg1);
			
			const defBorgName2 = "RNG-P3";
			defDetails = ClassDetailString(actionBorgInner, defBorgName2, "PURE RNG 3", "0");
			const defBorg2 = defDetails+" R "+actionBorgInner+" 0, 0 "+actionBorgInner+" 0, 6, 0";
			arrDefaultBorgs.push(defBorg2);

			const defBorgName3 = "RNG-P4";
			defDetails = ClassDetailString(actionBorgInner, defBorgName3, "PURE RNG 4", "0");
			const defBorg3 = defDetails+" R "+actionBorgInner+" 0, 0 "+actionBorgInner+" 0, 8, 0";
			arrDefaultBorgs.push(defBorg3);

			const defBorgName4 = "RNG-P5-I5H";
			defDetails = ClassDetailString(actionBorgInner, defBorgName4, "Almost PURE RNG 5", "0");
			const defBorg4 = defDetails+" R "+actionBorgInner+" 0, 0 "+actionBorgInner+" 0, 10, 5";
			arrDefaultBorgs.push(defBorg4);

			const defBorgName5 = "MAIN10-HP";
			defDetails = ClassDetailString(actionBorgInner, defBorgName5, "6-2-2", "0");
			const defBorg5 = defDetails+" A "+actionBorgInner+" 6, 0 "+actionBorgInner+" 2, 2, 0";
			arrDefaultBorgs.push(defBorg5);

			const defBorgName6 = "borgDMG-I5H";
			defDetails = ClassDetailString(actionBorgInner, defBorgName6, "2-6-2", "0");
			const defBorg6 = defDetails+" B "+actionBorgInner+" 2, 0 "+actionBorgInner+" 6, 2, 0";
			arrDefaultBorgs.push(defBorg6);

			const defBorgName7 = "borgRNG-I5H";
			defDetails = ClassDetailString(actionBorgInner, defBorgName7, "2-2-6", "0");
			const defBorg7 = defDetails+" C "+actionBorgInner+" 2, 0 "+actionBorgInner+" 2, 6, 0";
			arrDefaultBorgs.push(defBorg7);

			const defBorgName8 = "Sanic";
			defDetails = ClassDetailString(actionBorgInner, defBorgName8, "Gotta go fast", "0");
			const defBorg8 = defDetails+" S, "+defProgramName2+actionBorgInner+" 1, 15 "+actionBorgInner+" 4, 0, 0";
			arrDefaultBorgs.push(defBorg8);

			const defBorgName9 = "Sniper_v1";
			defDetails = ClassDetailString(actionBorgInner, defBorgName9, "Headshot", "0");
			const defBorg9 = defDetails+" S, "+defProgramName1+actionBorgInner+" 0, 0 "+actionBorgInner+" 2, 18, 0";
			arrDefaultBorgs.push(defBorg9);

			const defBorgName10 = "Typo_T";
			defDetails = ClassDetailString(actionBorgInner, defBorgName10, "spill the T.", "0");
			const defBorg10 = defDetails+" T, "+defaultProgramName+actionBorgInner+" 0, 0 "+actionBorgInner+" 4, 0, 10";
			arrDefaultBorgs.push(defBorg10);

			const defBorgName11 = "Typo_I";
			defDetails = ClassDetailString(actionBorgInner, defBorgName11, "why I oughta'.", "0");
			const defBorg11 = defDetails+" I, "+defaultProgramName+actionBorgInner+" 4, 10 "+actionBorgInner+" 0, 0, 0";
			arrDefaultBorgs.push(defBorg11);

			const defBorgName12 = "Typo_H";
			defDetails = ClassDetailString(actionBorgInner, defBorgName12, "jesus H christ.", "0");
			const defBorg12 = defDetails+" H, "+defaultProgramName+actionBorgInner+" 7, 5 "+actionBorgInner+" 0, 0, 5";
			arrDefaultBorgs.push(defBorg12);

			const defBorgName13 = "Typo_C";
			defDetails = ClassDetailString(actionBorgInner, defBorgName13, "i C you.", "0");
			const defBorg13 = defDetails+" C, "+defaultProgramName+actionBorgInner+" 0, 0 "+actionBorgInner+" 0, 4, 10";
			arrDefaultBorgs.push(defBorg13);

			const defBorgNameIntro0 = "borgH-D.v2";
			defDetails = ClassDetailString(actionBorgInner, defBorgNameIntro0, "2-2-0", "0");
			const defBorgIntro0 = defDetails+" R "+actionBorgInner+" 2, 0 "+actionBorgInner+" 2, 0, 0";
			arrDefaultBorgs.push(defBorgIntro0);

			const defBorgNameIntro1 = "borgH-R";
			defDetails = ClassDetailString(actionBorgInner, defBorgNameIntro1, "1-0-1", "0");
			const defBorgIntro1 = defDetails+" R "+actionBorgInner+" 0, 0 "+actionBorgInner+" 0, 4, 0";
			arrDefaultBorgs.push(defBorgIntro1);

			const defBorgNameIntro2 = "borgH-D";
			defDetails = ClassDetailString(actionBorgInner, defBorgNameIntro2, "1-1-0", "0");
			const defBorgIntro2 = defDetails+" R "+actionBorgInner+" 1, 0 "+actionBorgInner+" 1, 0, 0";
			arrDefaultBorgs.push(defBorgIntro2);
			
			
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// === === === Grid Initialization === === ===
			const defGridName0 = "3x3";
			let defGridCells = "0,0,0, "+"0,1,0, "+"0,0,0";
			defDetails = ClassDetailString(actionGridInner, defGridName0, "smol");
			const defGridA = defDetails+" 3,3 "+actionGridInner+defGridCells;
			arrDefaultGrids.push(defGridA);	

			const defGridName1 = "5x5";
			defGridCells = "0";
			defDetails = ClassDetailString(actionGridInner, defGridName1, "Bot Arena.", "0");
			const defGrid1 = defDetails+" 5,5 "+actionGridInner+defGridCells;
			arrDefaultGrids.push(defGrid1);

			const defGridName2 = "7x7";
			defGridCells = "0,0,0,0,0,0,0, 0,1,1,0,1,1,0, 0,1,0,0,0,1,0, 0,0,0,0,0,0,0, 0,1,0,0,0,1,0, 0,1,1,0,1,1,0, 0,0,0,0,0,0,0";
			defDetails = ClassDetailString(actionGridInner, defGridName2, "Cover and Chasms.", "0");
			const defGrid2 = defDetails+" 7,7 "+actionGridInner+defGridCells;
			arrDefaultGrids.push(defGrid2);		
						
			const defGridName3 = "9x9";
			defGridCells = "1,3,0,0,0,0,0,3,1, "+"3,1,1,1,0,1,1,1,3, "+"0,1,0,0,0,0,0,1,0, "+"0,0,0,2,2,2,0,0,0, "+"2,1,0,0,3,0,0,1,2, "+"0,0,0,2,2,2,0,0,0, "+"0,1,0,0,0,0,0,1,0, "+"3,1,1,1,0,1,1,1,3, "+"1,3,0,0,0,0,0,3,1";
			defDetails = ClassDetailString(actionGridInner, defGridName3, "test");
			const defGrid3 = defDetails+" 9,9 "+actionGridInner+defGridCells;
			arrDefaultGrids.push(defGrid3);
			
			const defGridName4 = "OGOL-T";
			defGridCells = "2,2,2,2,2,2,2,0,2,2,2,2,0,2,0,0,2,0,2,2,2,2,2,2,0,2,0,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,2,0,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2";
			defDetails = ClassDetailString(actionGridInner, defGridName4, "Tight Font");
			const defGrid4 = defDetails+" 12,6 "+actionGridInner+defGridCells;
			arrDefaultGrids.push(defGrid4);

			const defGridName5 = "OGOL-S";
			defGridCells = "0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,0,0,0,1,0,0,0,1,0,0,1,1,1,0,1,1,1,0,0,0,1,0,0,1,1,1,0,1,0,1,0,1,1,1,0, "
						  +"0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, "
						  +"0,2,2,2,0,2,2,2,0,2,2,2,0,2,2,2,0,0,2,0,0,0,2,0,2,0,2,0,2,0,2,2,2,0,0,2,2,2,0,2,2,2,0,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0";
			defDetails = ClassDetailString(actionGridInner, defGridName5, "Spaced Font");
			const defGrid5 = defDetails+" 17,9 "+actionGridInner+defGridCells;
			arrDefaultGrids.push(defGrid5);

			const defGridName6 = "Split";
			defGridCells = "2,2,2,2,2,2,3,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,3";
			defDetails = ClassDetailString(actionGridInner, defGridName6, "Hallway");
			const defGrid6 = defDetails+" 13,2 "+actionGridInner+defGridCells;
			arrDefaultGrids.push(defGrid6);
			
			/*const defGridNameE = "Shooting Range";
			defGridCells = "0,1,1,1,1,1,1,0,0,0,0,0,2,0,1,1,1,0,1,1,1,1,1,0,0,2,2,0,1,1,0,1,1,1,1,1,0,0,2,2,2,0,1,0,1,1,1,1,1,0,0,2,2,2,2,0,0,1,1,1,1,1,1,0,2,2,2,2,2,0";
			defDetails = ClassDetailString(actionGridInner, defGridNameE, "Duck!");
			const defGridE = defDetails+" 7,7 "+actionGridInner+defGridCells;
			arrDefaultGrids.push(defGridE);//*/


			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// === === === Level Initialization === === ===

			//[Floating Game Levels]
			var fGameLevels = "";
			const fGameLevelsUnlock = "0";

			/*const defLevelNameA = "Smol";
			let defLevelBorgs = defBorgName0+", 2,1 ";//defLevelPos1;
			defDetails = ClassDetailString(actionLevelInner, defLevelNameA, "smol");
			const defLevelA = defDetails+" 1,1 "+actionLevelInner+defGridName0+actionLevelInner+" 0,1, "+actionLevelInner+defLevelBorgs;
			arrDefaultLevels.push(defLevelA);
			//*/

			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			const defLevelName0 = "Main";
			fGameLevels = defLevelName0;
			defLevelBorgs = defBorgName7+", 0,6 "+actionBorg+defBorgName7+", 8,6 ";
			defDetails = ClassDetailString(actionLevelInner, defLevelName0, "Where it all began.", fGameLevelsUnlock);
			const defLevel0 = defDetails+" 20,2 "+actionLevelInner+defGridName3+actionLevelInner+" 0,2, 2,2, 3,2, 4,2, 5,2, 6,2, 8,2, "+actionLevelInner+defLevelBorgs;
			arrDefaultLevels.push(defLevel0);

			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			const defLevelName1 = "Skyscrapper";
			fGameLevels += ", "+defLevelName1;
			defLevelBorgs = defBorgName13+", 0,3 "+actionBorg+defBorgName1+", 2,1 "+actionBorg+defBorgName1+", 4,1 "+actionBorg+defBorgName1+", 5,4 "
				+actionBorg+defBorgName4+", 7,1 "+actionBorg+defBorgName3+", 7,3 "+actionBorg+defBorgName3+", 7,5 ";
			defDetails = ClassDetailString(actionLevelInner, defLevelName1, "Watch your step.", fGameLevelsUnlock);
			const defLevel1 = defDetails+" 15,1 "+actionLevelInner+defGridName4+actionLevelInner+" 2,3, 2,4, 3,4, "+actionLevelInner+defLevelBorgs;
			arrDefaultLevels.push(defLevel1);

			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			const defLevelName2 = "Typography";
			fGameLevels += ", "+defLevelName2;
			defLevelBorgs = defBorgName13+", 2,2 "+actionBorg+defBorgName13+", 3,2 "+actionBorg+defBorgName2+", 6,2 "+actionBorg+defBorgName2+", 10,2 "
				+actionBorg+defBorgName10+", 1,5 "+actionBorg+defBorgName10+", 1,6 "+actionBorg+defBorgName10+", 3,5 "+actionBorg+defBorgName10+", 3,6 "
				+actionBorg+defBorgName11+", 5,6 "+actionBorg+defBorgName11+", 7,6 "+actionBorg+defBorgName12+", 10,5 "+actionBorg+defBorgName12+", 10,7 ";
			defDetails = ClassDetailString(actionLevelInner, defLevelName2, "That's me.", fGameLevelsUnlock);
			const defLevel2 = defDetails+" 20,4 "+actionLevelInner+defGridName5+actionLevelInner+" 0,0, 4,0, 8,0, 12,0, 16,0,  0,4, 4,4, 8,4, 12,4, 16,4,  0,8, 4,8, 8,8, 12,8, 16,8, "+actionLevelInner+defLevelBorgs;
			arrDefaultLevels.push(defLevel2);

			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			const defLevelName3 = "Intersection";
			fGameLevels += ", "+defLevelName3;
			defLevelBorgs = defBorgName8+", 0,0 "+actionBorg+defBorgName9+", 11,0 ";
			defDetails = ClassDetailString(actionLevelInner, defLevelName3, "Get your priorities straight.", fGameLevelsUnlock);
			const defLevel3 = defDetails+" 8,1 "+actionLevelInner+defGridName6+actionLevelInner+" 6,0, "+actionLevelInner+defLevelBorgs;
			arrDefaultLevels.push(defLevel3);
			
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			/*const defLevelNameE = "The Range";
			defLevelBorgs = defBorgName2+", 6,5 "+actionBorg+defBorgName0+", 6,3 "+actionBorg+defBorgName0+", 6,1 ";
			defDetails = ClassDetailString(actionLevelInner, defLevelNameE, "Duck!");
			const defLevelE = defDetails+" 10,1 "+actionLevelInner+defGridNameE+actionLevelInner+" 0,6, 1,0, "+actionLevelInner+defLevelBorgs;
			arrDefaultLevels.push(defLevelE);
			//*/
			
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 

			//[Default Game Levels]
			const defLevelNameIntro3 = "DGL-04"; 
			defLevelBorgs = defBorgNameIntro1+", 0,3 "+actionBorg+defBorgNameIntro2+", 6,3 ";
			defDetails = ClassDetailString(actionLevelInner, defLevelNameIntro3, "Center of attention", "0");
			const defLevelIntro3 = defDetails+" 8,1 "+actionLevelInner+defGridName2+actionLevelInner+" 3,3, "+actionLevelInner+defLevelBorgs+actionLevelInner+fGameLevels;
			arrDefaultLevels.push(defLevelIntro3);
			
			const defLevelNameIntro2 = "DGL-03"; 
			defLevelBorgs = defBorgNameIntro0+", 6,3 ";//s:0,3  t:6,3
			defDetails = ClassDetailString(actionLevelInner, defLevelNameIntro2, "Actual cover", "0");
			const defLevelIntro2 = defDetails+" 4,1 "+actionLevelInner+defGridName2+actionLevelInner+" 0,3, "+actionLevelInner+defLevelBorgs+actionLevelInner+defLevelNameIntro3;
			arrDefaultLevels.push(defLevelIntro2);
			
			const defLevelNameIntro1 = "DGL-02"; 
			defLevelBorgs = defBorgName1+", 2,1 ";
			defDetails = ClassDetailString(actionLevelInner, defLevelNameIntro1, "The Target is armed but cornered", "0");
			const defLevelIntro1 = defDetails+" 2,1 "+actionLevelInner+defGridName0+actionLevelInner+" 0,1, "+actionLevelInner+defLevelBorgs+actionLevelInner+defLevelNameIntro2;
			arrDefaultLevels.push(defLevelIntro1);
			
			/*const defLevelNameIntro0 = "DGL-01";*/ 
			defLevelBorgs = defBorgName0+", 4,2 ";
			defDetails = ClassDetailString(actionLevelInner, defLevelNameIntro0, "first");
			const defLevelIntro0 = defDetails+" 1,1 "+actionLevelInner+defGridName1+actionLevelInner+" 0,2, "+actionLevelInner+defLevelBorgs+actionLevelInner+defLevelNameIntro1;
			arrDefaultLevels.push(defLevelIntro0);
			
			var storageLevelUnlocksDefault = [];
			storageLevelUnlocksDefault.push(defLevelNameIntro0);
			storageLevelUnlocksDefault.push(defLevelNameIntro1);
			storageLevelUnlocksDefault.push(defLevelNameIntro2);
			storageLevelUnlocksDefault.push(defLevelNameIntro3);


			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			function FindInDefaults(action, findName){
				let arrTemp = (action == actionBorg ? arrDefaultBorgs 
							: (action == actionLevel ? arrDefaultLevels 
							: (action == actionGrid ? arrDefaultGrids 
							: (action == actionProgram ? arrDefaultPrograms 
							: null))));
				let inner = GetActionInner(action);
				//ConLog(arrTemp);
				for(let i=0; i<arrTemp.length;i++){
					let temp = SplitTrim(arrTemp[i], inner);
					//ConLog("findName("+findName+") == temp[0]("+temp[0]+")");
					if(findName == temp[0]) return true;
				} 
				return false;
			}
			

			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 




			


			// === === === Tables
			//Using Datatables for convenience
			let tblBorgs = new DataTable('#tblBorgs', 
			{
				scrollX: true,
				columnDefs: [
					//{ target: 3, visible: false, searchable: false },
					//{ target: 6, visible: false, searchable: false }
				]
			});
			let tblSelectionBorgs = new DataTable('#tblSelectionBorgs', 
			{
				scrollX: true,
				columnDefs: [
					//{ target: 3, visible: false, searchable: false },
					//{ target: 6, visible: false, searchable: false },
					{ target: -1, visible: false, searchable: false }
				]
			});
			let tblProgs = new DataTable('#tblProgs', 
			{
				scrollX: true,
				columnDefs: [
					//{ target: 2, visible: false, searchable: false }
				]
			});
			let tblSelectionProgs = new DataTable('#tblSelectionProgs', 
			{
				scrollX: true,
				columnDefs: [
					//{ target: 2, visible: false, searchable: false }
				]
			});
			let tblLevels = new DataTable('#tblLevels', 
			{
				autoWidth: false,
				scrollX: true,
				columnDefs: [
					//{ width: '100%', targets: "_all" }
					//{"className": "dt-center", "targets": "_all"}
					//{ target: 2, visible: false, searchable: false },
					//{ target: 5, visible: false, searchable: false }
				]
			});
			tblLevels.columns.adjust().draw();
			let tblSelectionLevels = new DataTable('#tblSelectionLevels', 
			{
				scrollX: true,
				columnDefs: [
					{ target: -1, visible: false, searchable: false }
				]
			});
			let tblGrids = new DataTable('#tblGrids', 
			{
				scrollX: true,
				columnDefs: [
					//{ target: 2, visible: false, searchable: false },
					//{ target: 5, visible: false, searchable: false }
				]
			});

			// User Manual setup
			let tblManual = new DataTable('#tblManual', 
			{
				scrollX: true,
				pageLength: 100,
				autoWidth: false
			});
			
			/*
			const manualProgram = ["Program", "Program", "Programs are used by Borgs and are a set of instructions that tell the Game how a borg sould act during a Tick."];
			arrManualText.push(manualProgram);
			const manualPhase = ["Phase", "Program", "There are 2 Phases: Movement and Action. Every Tick, if valid to run, the Game will run a Borg's Program."];
			arrManualText.push(manualPhase);
			const manualTick = ["Tick", "Play", "Every tick the game will check if any borg can run it's Program's Phase. All valid Movements are run first followed by valid Actions. In the case of ties Player Borgs will be ran first."];
			arrManualText.push(manualTick);
			const manualRound = ["Round", "Play", "By default Borgs move and act once per round. Each round has 10 Ticks."];
			arrManualText.push(manualRound);	
			//*/

			for(let i=0; i<arrManualText.length;i++){
				//ConLog("arrItems[i]: ");ConLog(arrItems[i]);
				if(arrManualText[i] != null){//
					let maunalDesc = arrManualText[i][2];
					if(arrManualText[i].length >= 4){
						maunalDesc += arrManualText[i][2] + "<ul>";
						for (let j = 3; j < arrManualText[i].length; j++) {
							maunalDesc += "<li>"+arrManualText[i][j]+"</li>"
						}
						maunalDesc += "</ul>";
					}
					let columnData = 
						[{
							0: "<span id=\""+"\">"+arrManualText[i][0]+"</span>",
							1: "<span id=\""+"\">"+arrManualText[i][1]+"</span>",
							2: "<span id=\""+"\">"+maunalDesc+"</span>"
						}];
					tblManual.rows.add(columnData);
				}
			}
			//tblManual.draw();
			tblManual.columns.adjust();

			
			










			// === === === Borgs === === === =====================================================================================================================================================================================================================================================================================================================================
			var formTempBorg = StringToClass(actionBorg, defBorg0).Duplicate();//ConLog("formTempBorg: "); ConLog(formTempBorg);
			const maxBorgPointsOverride = 9001; //Number.MAX_SAFE_INTEGER;
			
			function BorgFormModifyStat(stat, newPtsVal, mod = 1){
				let ifValid = false; //ConLog("newPtsVal: "+newPtsVal, true);
				let newStatVal = formTempBorg.AllocateStat(stat, newPtsVal, true);
				let oldPtsVal = parseInt($("#borg"+stat+"Pts").val());
				let ptsRemaining = parseInt($("#borgPointsRemaining").html());
				let absPtsVal = Math.abs(newPtsVal - oldPtsVal) * mod; //ConLog("absPtsVal: "+absPtsVal, true);
				if(mod < 0 || newPtsVal == 0 || (absPtsVal) <= ptsRemaining){
					$("#borg"+stat+"Pts").val(newPtsVal); 
					$("#borg"+stat).html(newStatVal); //ConLog("formTempBorg: "); ConLog(formTempBorg);
					ifValid = true;
				}//else{ alert("Invalid point allocation."); }
				let ptsMaxCurrent = parseInt($("#borgPointsMax").html());
				let formTempBorgPtsTotal = formTempBorg.GetTotalPoints();
				$("#borgPointsRemaining").html(ptsMaxCurrent - formTempBorgPtsTotal); //ConLog(ptsMaxCurrent+" - "+formTempBorgPtsTotal);
				return ifValid;
			}

			// Borg Pts create/edit
			$(".stat-max").click(function(){
				let stat = $(this).data("stat");
				let ptsRemaining = parseInt($("#borgPointsRemaining").html());
				let ptsVal = Number($("#borg"+stat+"Pts").val());
				if(overrideMaxPoints == maxBorgPointsOverride){
					ptsVal += 10;
				}else if(parseInt(ptsVal)){
					ptsVal = parseInt(ptsVal) ? parseInt(ptsVal)+ptsRemaining : ptsRemaining;
				}else{
					ptsVal = isStatScalingFTT(stat) ? Math.min(100, ptsRemaining) : ptsRemaining;
				}
				//$("#borgPointsRemaining").html(ptsRemaining - ptsVal);
				BorgFormModifyStat(stat, ptsVal);
				let s = 0;
				/*
				if(stat == arrBorgStats[s++]){ formTempBorg.pts_hp = ptsVal;
				}else if(stat == arrBorgStats[s++]){ formTempBorg.pts_speed = ptsVal;
				}else if(stat == arrBorgStats[s++]){ formTempBorg.pts_damage = ptsVal;
				}else if(stat == arrBorgStats[s++]){ formTempBorg.pts_range = ptsVal;
				}else if(stat == arrBorgStats[s++]){ formTempBorg.pts_cooldown = ptsVal; }
				//*/
			});
			$(".stat-modify").click(function(){ 
				let ptsMax = overrideMaxPoints;
				let ptsRemaining = parseInt($("#borgPointsRemaining").html());
				let mod = Number($(this).data("mod"));
				let stat = $(this).data("stat");
				let isStatScaleGeometric = stat == "Speed" || stat == "Cooldown";
				let ptsVal = Number($("#borg"+stat+"Pts").val());
				let isValidPlus = mod > 0 && ptsVal < ptsMax && ptsRemaining > 0;
				let isValidMinus = mod < 0 && ptsVal > 0 && ptsRemaining >= 0;
				/*ConLog(mod+" > 0 && "+ptsVal+" < "+ptsMax+" && "+ptsRemaining+" > 0");
				ConLog(mod+" < 0 && "+ptsVal+" > 0 && "+ptsRemaining+" >= 0");
				ConLog(isValidPlus+" || "+isValidMinus);//*/
				if(isValidPlus || isValidMinus){
					let defaultVal = mod > 0 ? 1 : 0;
					let newRemaining = ptsRemaining - mod;
					let newPtsVal = parseInt(ptsVal) ? parseInt(ptsVal)+mod : defaultVal;
					BorgFormModifyStat(stat, newPtsVal, mod);
				}//else{ alert("Invalid point allocation."); }
				//if(!ptsVal) $("#borg"+stat+"Pts").val(0);
			});
			$(".stat-min").click(function(){
				let stat = $(this).data("stat");
				let newRemaining = Number($("#borg"+stat+"Pts").val());
				newRemaining = parseInt(newRemaining) ? parseInt(newRemaining) : 0;
				let ptsRemaining = parseInt($("#borgPointsRemaining").html());
				//$("#borgPointsRemaining").html(ptsRemaining + newRemaining);
				//$("#borg"+stat+"Pts").val(0);
				BorgFormModifyStat(stat, 0);
			});
			$(".borg-stat").change( function() {
				let ptsVal = parseInt($(this).val());
				let ptsMax = overrideMaxPoints;
				let ptsRemaining = parseInt($("#borgPointsRemaining").html());
				let arrBorgPts = $(".borg-stat");
				let sumPts = 0;
				arrBorgPts.each( function(i) { sumPts += Number($(this).val()); } );
				let newRemaining = ptsMax-sumPts;
				if(ptsVal < 0){
					alert("Pts cannot be negative.");
					$(this).val(0);
				}else if(newRemaining - ptsVal < 0){
					$(this).val(0);
					alert("Not enough stat points. ("+newRemaining+"/"+ptsMax+")");
				}else{
					let stat = $(this).data("stat");
					BorgFormModifyStat(stat, $(this).val());
				}
			});
			function BorgFormPtsReset(){
				for(let i=0; i<arrBorgStats.length;i++){
					let stat = arrBorgStats[i];
					//let newRemaining = $("#borg"+stat+"Pts").val();
					$("#borg"+stat+"Pts").val(0);
				}
				$("#borgPointsRemaining").html(overrideMaxPoints);
				formTempBorg = StringToClass(actionBorg, defBorg0).Duplicate();
				for(let i=0; i<arrBorgStats.length;i++){
					$("#borg"+arrBorgStats[i]+"Pts").val(formTempBorg.GetStat(arrBorgStats[i], true)); //pts
					$("#borg"+arrBorgStats[i]).html(formTempBorg.GetStat(arrBorgStats[i]));
				}
			}
			$("#submitResetBorg").click(function(){
				let isConfirmed = window.confirm("Reset Borg Form?");
				if (isConfirmed) {
					BorgFormPtsReset()
				}
			});
			function BorgFormGetPtsUsed(isForUpdate = false){
				let ptsRemaining = overrideMaxPoints;//userDataMaxPoints
				for(let i=0; i<arrBorgStats.length;i++){
					ptsRemaining -= $("#borg"+arrBorgStats[i]+"Pts").val(); 
				}
				$("#borgPointsRemaining").html(ptsRemaining);
			}
			$("#submitRemoveLimit").click(function(){
				let isPointOverriden = overrideMaxPoints == maxBorgPointsOverride;
				if(isPointOverriden){
					//$("#divBorgPoints").show();
					overrideMaxPoints = userDataMaxPoints;
					BorgFormGetPtsUsed(true); //BorgFormPtsReset();
					$(this).html("Override Point Limit");
				}else{
					let isConfirmed = true;//window.confirm("Returning from override will reset the Borg form. Proceed?");
					if (isConfirmed) {
						//$("#divBorgPoints").hide();
						overrideMaxPoints = maxBorgPointsOverride; 
						$("#borgPointsRemaining").html(overrideMaxPoints);
						$(this).html("Return Point Limit");
					}
				}
				$("#borgPointsMax").html(overrideMaxPoints);
			});
			
			function GenerateSelectBorgs(selectedBorg = "", defTxt = "Select Enemy Borg"){
				let selectBorgs = selectedBorg == "" ? "<option value=\"n/a\" selected disabled>"+defTxt+"</option>" 
									: "<option value=\""+selectedBorg+"\" selected>"+selectedBorg+"</option>" ;
				//ConLog("GenerateSelectBorgs, arrBorgs: ");ConLog(arrBorgs);
				for(let i=0; i<arrBorgs.length;i++){
					selectBorgs += arrBorgs[i].isUnlocked == 1 ? "<option value=\""+arrBorgs[i].name+"\">"+arrBorgs[i].name+"</option>" : "";
				}
				//ConLog("GenerateSelectBorgs, selectBorgs: "+selectBorgs);
				return selectBorgs;
			}
			
			$("#btnBorgStatLegend").click(function(){
				if ($('#divBorgStatLegend').hasClass("is-active")) {
					$('#divBorgStatLegend').removeClass("is-active");
					$('#divBorgStatLegend').slideUp();
				}
				else {
					$('#divBorgStatLegend').addClass("is-active");
					$('#divBorgStatLegend').slideDown();
				}//*/
			});
			
			
















			// === === === Programs === === === =====================================================================================================================================================================================================
			//Used to determine ids in the Program Form
			var progID = 1;

			//Get Number of Parameters per Code Block
			function GetNumParams(code){
				return (code == codeCellNum || code == codeHpPct ? 4 
					: (code == codeWinRng ? 3 
					: (code == codeMoveTo || code == codeMoveAway || code == codeAtk ? 2 
					: 0)));
			}

			//Controls w/in the Program Form
			function ClearCodeBlock(target){
				$("#"+target)[0].outerHTML = "<div id=\""+target+"\"><span id=\""+target+"AddSection\"></span></div>";
			}
			$("#divProgramForm").on("click", ".prog-clear-apply", function(event){
				let target = $(this).data("target");
				ClearCodeBlock(target);
			});

			//Create Code Block Parameter Select options
			const selectOptTargeting = "Options:Targeting";
			const selectOptRelOperators = "Options:Relational_Operators";
			const codeTargetNearest = "BORG_NEAR";
			const codeTargetFarthest = "BORG_FAR";
			const codeTargetHpPercHighest = "BORG_DUR%_H";
			const codeTargetHpPercLowest = "BORG_DUR%_L";
			const codeTargetHpFlatHighest = "BORG_DURflat_H";
			const codeTargetHpFlatLowest = "BORG_DURflat_L";
			const codeTargetDurHighest = "BORG_DUR_H";
			const codeTargetDurLowest = "BORG_DUR_L";
			const codeTargetSpdHighest = "BORG_SPD_H";
			const codeTargetSpdLowest = "BORG_SPD_L";
			const codeTargetDmgHighest = "BORG_DMG_H";
			const codeTargetDmgLowest = "BORG_DMG_L";
			const codeTargetRngHighest = "BORG_RNG_H";
			const codeTargetRngLowest = "BORG_RNG_L";
			const codeTargetCldHighest = "BORG_CLD_H";
			const codeTargetCldLowest = "BORG_CLD_L";
			function CreateCodeBlockParameterSelect(origProgID, paramCount, options){
				let codeSelectId = "<select id=\"prog"+origProgID+"Param"+paramCount+"\" class=\"form-control prog-code prog-select\" data-code =\"prog-select\">";
				if(options == selectOptRelOperators){
					// Options - Relational Operators
					return codeSelectId 
						+"		<option value=\"<\" selected> < </option>"
						+"		<option value=\"<=\"> <= </option>"
						+"		<option value=\"==\"> = </option>"
						+"		<option value=\">=\"> >= </option>"
						+"		<option value=\">\"> > </option>"
						+"		<option value=\"!=\"> not = </option>"
						+"	</select> ";
				}else if(options == selectOptTargeting){
					// Options - Targeting
					let optTargeting = codeSelectId 
									+"		<option value=\""+codeTargetNearest+"\" selected>Nearest</option>"
									+"		<option value=\""+codeTargetFarthest+"\">Farthest</option>";
					optTargeting += "		<option value=\""+codeTargetHpPercHighest+"\">Highest Current DUR(%)</option>";
					optTargeting += "		<option value=\""+codeTargetHpFlatHighest+"\">Highest Current DUR</option>";
					for (let i = 0; i < arrBorgStatCodes.length; i++) {
						let statCode = arrBorgStatCodes[i];
						let statText = i == 0 ? "Max " + statCode : statCode;
						optTargeting += "	<option value=\"BORG_"+statCode+"_H\">Highest "+statText+"</option>"
					}
					optTargeting += "		<option value=\""+codeTargetHpPercLowest+"\">Lowest Current DUR(%)</option>";
					optTargeting += "		<option value=\""+codeTargetHpFlatLowest+"\">Lowest Current DUR</option>";
					for (let i = 0; i < arrBorgStatCodes.length; i++) {
						let statCode = arrBorgStatCodes[i];
						let statText = i == 0 ? "Max " + statCode : statCode;
						optTargeting += "	<option value=\"BORG_"+statCode+"_L\">Lowest "+statText+"</option>"
					}
					return optTargeting + "</select> ";
				}
			}
			//Create a new Block of Code based on the selection
			$("#divProgramForm").on("click", ".prog-add-apply", function(event){
				let target = $(this).data("target");
				let scope = $(this).data("scope");
				CreateNewCodeBlock(target, scope);
			});
			function CreateNewCodeBlock(target, scope, overrideCode = ""){//ConLog("Apply the code block, target: #"+target+", scope: "+scope+", overrideCode: "+overrideCode+", origProgID: "+progID);
				let origProgID = progID++; 
				let selectedCode = overrideCode != "" ? overrideCode : $("#"+target+"Select").find(":selected").val();
				let isScopeCondition = scope == "ConditionLogical" || scope == "ConditionRelational";
				
				//Keep the old section
				let newSection = "<span id=\""+target+"Section\"></span>"; //ConLog("newSection: "+newSection);

				//Prefix, Remove of this code block
				let sectionRemove = HtmlRemoveToggleable(origProgID, "prog");
									//"		<div class=\"toggleable badge text-bg-dark border-mute\" data-target=\"prog"+origProgID+"Remove\" > - </div>"
									//+"		<div id=\"prog"+origProgID+"Remove\" class=\"apply-removal badge text-bg-danger border-mute\" data-section=\"prog\"  data-target=\""+origProgID+"\" style=\"display: none;\"> Remove </div>";
				let codeSelectId = "		<select id=\"prog"+origProgID+"Param";
				let codeSelect =						"\" class=\"form-control prog-code prog-select\" data-code =\"prog-select\">";

				//Append new code block
				let paramCount = 1;
				if(selectedCode == codeIfStart){
					// Code: IF
					newSection += "	<div class=\"prog-code prog-"+origProgID+"\" data-code =\""+codeIfStart+"\">"
								+		sectionRemove
								+"		 IF ( "
								+"		<div class=\"border rounded border-info p-1 prog-condition\">"
								//+"			<!-- Add Reset Conditions because initial Add does not remain-->"
								//+"			<div class=\"toggleable badge text-bg-danger\" data-target=\"prog"+origProgID+"Clear\" style=\"display: none;\"> - </div>"
								//+"			<div id=\"prog"+origProgID+"Clear\" class=\"prog-clear-apply badge text-bg-danger\" data-target=\"prog"+origProgID+"\" style=\"display: none;\"> Clear IF </div>";
					newSection +="			<!--IF Conditions-->"
								+ 			CreateAddCodeBlockButton(progID++, "ConditionLogical")
								+"		</div>"
								+"		)"
								+"		<div class=\"prog-code border-indention\" data-code =\""+codeIfThen+"\">"
								+"			THEN ...<br>";
					newSection +="			<!--Then code block-->"
								+ 			CreateAddCodeBlockButton(progID++, scope)
								+"		</div>"
								+"		<div class=\"prog-code border-indention\" data-code =\""+codeIfElse+"\">"
								+"			ELSE ...<br>";
					newSection +="			<!--Else code block-->"
								+ 			CreateAddCodeBlockButton(progID++, scope)
								+"		</div>"
								+"		<!--Default 2: IF End-->"
								+"		<span id=\""+origProgID+"\" class=\"prog-code\" data-code =\""+codeIfEnd+"\"></span>"
								+"	</div>";
				}else if(isScopeCondition){
					// Logical Operators
					let tempBody = (selectedCode == codeCondAnd ? " AND " 
								: (selectedCode == codeCondOr ? " OR " 
								: "ERROR"));

					if(selectedCode == codeWinRng){
						// Code: Within Range
						tempBody = 			CreateCodeBlockParameterSelect(origProgID, paramCount++, selectOptTargeting)
									+		codeSelectId + (paramCount++) + codeSelect
									+"			<option value=\"2\" selected>Enemy</option>"
									+"			<option value=\"1\">Ally</option>"
									+"		</select> "
									+"		distance is "
									+		CreateCodeBlockParameterSelect(origProgID, paramCount++, selectOptRelOperators)
									+"		Range";
					}else if(selectedCode == codeCellNum){
						// Code: Cell Number
						tempBody = 			CreateCodeBlockParameterSelect(origProgID, paramCount++, selectOptTargeting)
									+		codeSelectId + (paramCount++) + codeSelect
									+"			<option value=\"2\" selected>Enemy</option>"
									+"			<option value=\"1\">Ally</option>"
									+"			<option value=\"Self\">Self</option>"
									+"		</select> "
									+"		 is "
									+		CreateCodeBlockParameterSelect(origProgID, paramCount++, selectOptRelOperators)
									+`		<input id=\"prog` + origProgID + `Param` + (paramCount++) + `\" type=\"number\" min=\"0\" max=\"10\" class=\"form-control prog-code\" data-code =\"prog-val\" style=\"display: inline; width: 3.6em; padding-right: 1px !important;\">`
									+"		 cells away "
									+"		</select> ";
					}else if(selectedCode == codeHpPct){
						// Code: HP Percent
						tempBody = 			CreateCodeBlockParameterSelect(origProgID, paramCount++, selectOptTargeting)
									+		codeSelectId + (paramCount++) + codeSelect
									+"			<option value=\"2\" selected>Enemy</option>"
									+"			<option value=\"1\">Ally</option>"
									+"			<option value=\"Self\">Self</option>"
									+"		</select> "
									+"		HP is "
									+		CreateCodeBlockParameterSelect(origProgID, paramCount++, selectOptRelOperators)
									+`		<input id=\"prog` + origProgID + `Param` + (paramCount++) + `\" type=\"number\" min=\"1\" max=\"100\" class=\"form-control prog-code\" data-code =\"prog-val\" style=\"display: inline; width: 3.6em; padding-right: 1px !important;\">`
									+"		 %";
					}
					newSection += "	<div class=\"border rounded border-info p-1 prog-"+origProgID+" prog-condition prog-code\" data-code =\""+selectedCode+"\" style=\"width: fit-content;\">"
								+		sectionRemove
								+		tempBody
								+"	</div>";
				}else{
					// Return Codes 
					let tempBody = "";
					let borderColor = "";
					if(selectedCode == codeMoveTo || selectedCode == codeMoveAway){
						// Code: Move to/away
						borderColor = "primary";
						tempBody += (selectedCode == codeMoveTo ? "Move towards" 
									: (selectedCode == codeMoveAway ? "Move away from" 
									: "ERROR"));
						tempBody += CreateCodeBlockParameterSelect(origProgID, paramCount++, selectOptTargeting)
									+codeSelectId + (paramCount++) + codeSelect
									+"			<option value=\"2\" selected>Enemy</option>"
									+"			<option value=\"1\">Ally</option>"
									+"			<option value=\"H\">Healing</option>";
					}else if(selectedCode == codeAtk){
						// Code: Attack
						borderColor = "danger";
						tempBody += "		Attack "
									+CreateCodeBlockParameterSelect(origProgID, paramCount++, selectOptTargeting)
									+codeSelectId + (paramCount++) + codeSelect
									+"			<option value=\"2\" selected>Enemy</option>"
									+"			<option value=\"1\">Ally</option>";
					}else{
						//ERROR
						tempBody = "Error: "+selectedCode;
					}
					newSection += 	"	<div class=\" border rounded border-"+borderColor+" p-1 prog-"+origProgID+" prog-code\" data-code =\""+selectedCode+"\" style=\"width: fit-content;\">"
									+		sectionRemove 
									+		tempBody
									+"		</select> "
									+"	</div>";
				}

				//Postfix, Add of new code block if applicable
				newSection += (selectedCode == "IF" || isScopeCondition) ? CreateAddCodeBlockButton(origProgID, scope) : "";
				$('#'+target).removeClass("is-active");
				$('#'+target).hide();
				$("#"+target+"Section")[0].outerHTML = newSection;
			}
			function CreateAddCodeBlockButton(tempProgID, scope){//ConLog("scope: "+scope);
				let tempBody = "";
				let tempPostfix = "	<span id=\"prog"+tempProgID+"AddSection\"></span>";
				if(scope == "[[[MOVEMENT]]]"){
					tempBody += "		<option value=\""+codeIfStart+"\" selected> IF </option>"
								//+"		<option value=\""+codeStop+"\"> STOP </option>"
								+"		<option value=\""+codeMoveTo+"\"> Move towards [X] </option>"
								+"		<option value=\""+codeMoveAway+"\"> Move away from [X] </option>"; 
				}else if(scope == "[[[ACTION]]]"){
					tempBody += "		<option value=\""+codeIfStart+"\" selected> IF </option>"
								+"		<option value=\""+codeAtk+"\"> ATTACK </option>"; 
								//+"		<option value=\""+codeSetTarget+"\"> Set Target </option>"; 
				}else if(scope == "ConditionRelational"){
					scope = "ConditionLogical"; //if adding to Relational then only be able to add Logical Operators
					tempBody += "		<option value=\""+codeCondAnd+"\"> AND </option>"
								+"		<option value=\""+codeCondOr+"\"> OR </option>"; 
				}else if(scope == "ConditionLogical"){
					scope = "ConditionRelational"; //if adding to Logical then only be able to add Relational Operators
					tempBody += "		<option value=\""+codeCondParStart+"\" hidden> () </option>"
								+"		<option value=\""+codeWinRng+"\" selected> [X] is [?=] Range </option>"
								+"		<option value=\""+codeCellNum+"\"> [X] is [# of C] away </option>" //[X] is [# of C] from [X]
								+"		<option value=\""+codeHpPct+"\"> [B] HP is [?=] [%] </option>"; 
					tempPostfix = "	<div id=\"prog"+tempProgID+"\" class=\"prog-condition\">"
								+		tempPostfix
								+"	</div>";
				}
				return "	<div class=\"toggleable prog-"+tempProgID+" badge text-bg-dark border-mute\" data-target=\"prog"+tempProgID+"Add\"> + </div>"
						+"	<div id=\"prog"+tempProgID+"Add\" class=\"prog-"+tempProgID+"\" style=\"display: none;\">"
						+"		<select id=\"prog"+tempProgID+"AddSelect\" class=\"form-control prog-select\">"
						+			tempBody
						+"		</select> "
						+"		<div class=\"prog-add-apply badge text-bg-success border-mute\" data-target=\"prog"+tempProgID+"Add\" data-scope=\""+scope+"\"> Add </div>"
						+"	</div>"
						+	tempPostfix; 
			}

			//DisplayProgram, sub-functions
			function GetCodeConditionScope(code, scopeDefault){
				return (code == codeCondAnd || code == codeCondAnd ? "ConditionLogical" 
				: (code == codeWinRng || code == codeCellNum || code == codeHpPct ? "ConditionRelational" 
				: scopeDefault));
			}
			function DisplayCodeBlock(currentTarget, currentScope, code, arrProgCodes, i){
				if(code != codePhaseMov && code != codePhaseAct){ //ConLog("DisplayCodeBlock START, arrProgCodes[i="+i+"]: "+code);
					let origProgID = progID;
					CreateNewCodeBlock(currentTarget, currentScope, code);

					//Set Code Block Parameters
					let numParams = GetNumParams(code);
					if(numParams > 0){
						let arrParams = [];
						for (let j = 0; j < numParams; j++) {
							arrParams.push(arrProgCodes[++i]);
						}			
						let idParent = progID - 1;	
						for (let j = 1; j <= arrParams.length; j++) {
							$("#prog"+idParent+"Param"+j).val(arrParams[j-1]); //ConLog("DisplayCodeBlock, #prog"+idParent+"Param"+j+", "+code+": "+arrParams[j-1]);
						}				
					}
					
					//If the code is IF then start to split the Program per section contained in the IF
					if(code == codeIfStart){
						i++;//Skip codeIfStart
						let parentIdCond = origProgID+1;
						while(arrProgCodes[i] != codeIfThen && i < arrProgCodes.length) {
							let currCode = arrProgCodes[i];
							i = DisplayCodeBlock("prog"+parentIdCond+"Add", GetCodeConditionScope(currCode, currentScope), currCode, arrProgCodes, i);
							i++;
						}
						i++;//Skip codeIfThen
						let parentIdThen = origProgID+2;
						while(arrProgCodes[i] != codeIfElse && i < arrProgCodes.length) {
							let currCode = arrProgCodes[i];
							i = DisplayCodeBlock("prog"+parentIdThen+"Add", GetCodeConditionScope(currCode, currentScope), currCode, arrProgCodes, i);
							i++;
						}
						i++;//Skip codeIfElse
						let parentIdElse = origProgID+3;
						while(arrProgCodes[i] != codeIfEnd && i < arrProgCodes.length) {
							let currCode = arrProgCodes[i];
							i = DisplayCodeBlock("prog"+parentIdElse+"Add", GetCodeConditionScope(currCode, currentScope), currCode, arrProgCodes, i);
							i++;
						}
					}
				}
				return i;
			}
			function DisplayProgramCodeBlock(progString = defaultProgramCodeBlock){//ConLog("DisplayProgramCodeBlock: "+progString);
				let arrProgCodes = SplitTrim(progString);//
				let currentScope = "ERR";
				let currentTarget = "ERR";
				for (let i = 0; i < arrProgCodes.length; i++) {
					let code = arrProgCodes[i].trim(); //ConLog("arrProgCodes[i="+i+"] \""+code+"\" ==================");//+", "+arrProgCodes);
					currentScope = (code == codePhaseMov ? codePhaseMov 
									: (code == codePhaseAct ? codePhaseAct : currentScope));
					currentTarget = (code == codePhaseMov ? "progMovTopAdd" 
									: (code == codePhaseAct ? "progActTopAdd" : currentTarget)); //ConLog("currentScope: "+currentScope); ConLog("currentTarget: "+currentTarget);
					if(currentScope != "ERR" && currentTarget != "ERR"){
						let origIndex = code != codePhaseMov && code != codePhaseAct ? i : null;
						i = DisplayCodeBlock(currentTarget, currentScope, code, arrProgCodes, i);
						currentTarget = origIndex != null ? "prog"+origIndex+"Add" : currentTarget;
					}
				}
			}
			//DisplayProgram, Display the selected Program in the Create/Edit Form, if none selected then load Default Program
			function DisplayProgram(index = null){
				let tempName = index != null ? arrPrograms[index].name : defaultProgramName;
				let tempDesc = index != null ? arrPrograms[index].description : defaultProgramDescription;
				let tempCodeBlock = index != null ? arrPrograms[index].GetCodeBlockString() : defaultProgramCodeBlock;
				$('#progName').val(tempName);
				$('#progDescription').val(tempDesc);
				DisplayProgramCodeBlock(tempCodeBlock);
			}
			function ResetProgEditForm(msg = "Are you sure you want to start from scratch?"){
				let isConfirmed = window.confirm(msg);
				if (isConfirmed) {
					ClearCodeBlock("progMovTop");
					ClearCodeBlock("progActTop");
					$('#progName').val("");
					$('#progDescription').val("");
					progID = 1;
				}
				return isConfirmed;
			}
			$("#submitResetProg").click(function(){ ResetProgEditForm(); });
			$("#submitResetToDefProg").click(function(){
				if (ResetProgEditForm("Are you sure you want to start from scratch and load the default program?")) {
					DisplayProgram();
				}
			});



			








			// === === === Grid === === === =====================================================================================================================================================================================================
			var formPreviewGrid = StringToClass(actionGrid, defGrid1).Duplicate();//ConLog("formPreviewGrid: "); ConLog(formPreviewGrid);
			formPreviewGrid.maxCoordinates = new Coordinate(1, 1);
			formPreviewGrid.cell2d = StringCellsTo2dArray("", formPreviewGrid.maxCoordinates);
			var loadGridDefaultCellValType = 0;
			var formGridEditType = 0;
			var formGridEditByLineStart = null;
			var formGridEditByLineEnd = null;
			$("#btdGridFormDimEditAdd").click(function(){
				if ($(this).hasClass("is-active")) {
					$(this).removeClass("is-active");
					$("#gridFormDimEditAdd").hide();
				}
				else {
					$(this).addClass("is-active");
					$("#gridFormDimEditAdd").show();
				}//*/
			});
			$("#btdGridFormDimEditRmv").click(function(){
				if ($(this).hasClass("is-active")) {
					$(this).removeClass("is-active");
					$("#gridFormDimEditRmv").hide();
				}
				else {
					$(this).addClass("is-active");
					$("#gridFormDimEditRmv").show();
				}//*/
			});
			function GetGridFormPreviewAsString(dir = 0, mod = 0){ //ConLog("GetGridFormPreviewAsString: ");
				//Set the Array of Cells based on the HTML Preview
				let stringCell2D = $('.grid-form-cell').map(function() {return $(this);}).get(); //ConLog("GetGridFormPreviewAsString, stringCell2D: "); ConLog(stringCell2D);
				let arrCell2D = [];
				for(let i=0; i<stringCell2D.length;i++){
					let type = stringCell2D[i].data("type"); //ConLog("stringCell2D["+i+"]: "+type);
					type = type == undefined || type == "undefined" ? 0 : type;
					arrCell2D.push(type);
				}

				//Set Preview Dimensions
				//dir: 1=West, 2=East, 3=North, 4=South, 
				let origMaxX = formPreviewGrid.maxCoordinates.x;
				let origMaxY = formPreviewGrid.maxCoordinates.y;
				let maxX = dir == 1 || dir == 2 ? (origMaxX + (1 * mod)) : origMaxX;
				let maxY = dir == 3 || dir == 4 ? (origMaxY + (1 * mod)) : origMaxY;
				/*
				ConLog("formPreviewGrid.maxCoordinates: "+formPreviewGrid.maxCoordinates.ToString());
				ConLog("origMaxX = "+origMaxX+", origMaxY = "+origMaxY);
				ConLog("maxX, maxY("+maxX+", "+maxY+")");//*/
				let isValidDir = (dir > 0 && mod != 0) && maxX > 0 && maxY > 0;
				if(isValidDir){
					$("#gridMaxX").val(maxX);
					$("#gridMaxY").val(maxY);
					formPreviewGrid.maxCoordinates = new Coordinate(maxX, maxY);
					//ConLog("dir = "+dir+", mod = "+mod);
				}

				let startArrCell2D = 0;
				let currentCellType = $("#gridFormCellType").find(":selected").val(); //
				//North & South dimension edits
				if(dir == 3 || dir == 4){
					if(isValidDir){
						for(let i=0; i < maxX;i++){
							let newDiv = document.createElement("div");
							//newDiv.setAttribute("id", "tempDiv"+i);
							$(newDiv).data("type", 0);
							//let newType = 0; //$(newDiv);
							if(dir == 3 && mod < 0) { arrCell2D.shift(); }
							if(dir == 3 && mod > 0) { arrCell2D.unshift(currentCellType); startArrCell2D++; }
							if(dir == 4 && mod < 0) { arrCell2D.pop(); }
							if(dir == 4 && mod > 0) { arrCell2D.push(currentCellType); }
						}
					}
				}

				let stringGridFormPreviewCell2D = "";
				let hasStringStarted = false;
				let diagDist = null; 
				let arrGridEditLerp = null;
				let isEditLineComplete = formGridEditType == 1 && formGridEditByLineStart != null;
				//Set Array of Cells to edit if Cell Edit Type is "By Line"
				if(isEditLineComplete){
					diagDist = GetDiagonalDistance(formGridEditByLineStart, formGridEditByLineEnd); 
					arrGridEditLerp = GetAimGridPath(formGridEditByLineStart, formGridEditByLineEnd, diagDist, false);
					arrGridEditLerp.unshift(formGridEditByLineStart); //ConLog("By Line of Cells, arrGridEditLerp: "); ConLog(arrGridEditLerp);
				}

				//Set Added Top Row
				for (let i = 0; i < startArrCell2D; i++) {
					let type = arrCell2D[i];
					stringGridFormPreviewCell2D += type+", ";
					hasStringStarted = true;
				}

				//Set Orig Map Cells
				let c = startArrCell2D;
				for(let y=origMaxY-1; y>=0; y--){
					if(isValidDir && dir == 1 && mod > 0){ //ConLog(0+" added west");
						hasStringStarted = true;
						stringGridFormPreviewCell2D += c > startArrCell2D ? ", "+currentCellType : currentCellType;
					}
					for(let x=0; x<origMaxX; x++){
						//ConLog("x("+x+"), origMaxX - 1("+(origMaxX - 1)+"),");
						let isValidRemoveRowCol = (isValidDir && mod < 0 && !((dir == 1 && x == 0) || (dir == 2 && x == (origMaxX - 1))));
						if(mod >= 0 || isValidRemoveRowCol){
							let type = arrCell2D[c];
							if(isEditLineComplete){ 
								for (let i = 0; i < arrGridEditLerp.length; i++) {
									if(arrGridEditLerp[i].isEqualInt(x, y)){
										type = currentCellType; //break;
									}
								}
							}
							if(type != undefined && type != "undefined"){
								stringGridFormPreviewCell2D += hasStringStarted && (c > startArrCell2D || (dir == 1 && c == startArrCell2D)) ? ", " : "";
								stringGridFormPreviewCell2D += type;//type == undefined || type == "undefined" ? 0 : type;
								hasStringStarted = true;
							}
						}
						c++;
						//ConLog("stringGridFormPreviewCell2D mid ("+x+", "+y+"): "+stringGridFormPreviewCell2D);
					}
					if(isValidDir && dir == 2 && mod > 0){ //ConLog(0+" added east");
						stringGridFormPreviewCell2D += ", "+currentCellType;
					}
				}
				
				//Set Added Bottom Row
				for (let i = c; i < arrCell2D.length; i++) {
					let type = arrCell2D[i];
					if(type != undefined && type != "undefined") stringGridFormPreviewCell2D += ", "+type;
				}

				/*//Incomplete one array/string solution
				if(isValidDir && dir == 1 && mod > 0) {
					ConLog("0 Add West");
					stringGridFormPreviewCell2D += "0";
				}
				for(let i=0; i<arrCell2D.length;i++){
					let isValidCol = mod >= 0 && (i % maxX) != 0;
					let isValidWest = isValidDir && dir == 1 && (i != 0 && (i % maxX) == 0);
					let isValidEast = isValidDir && dir == 2 && (i % maxX) == 0;
					//ConLog(i+" modulo "+maxX+" = "+((i % maxX)));
					//ConLog(!isValidDir+" || ("+isValidDir+" && ("+isValidWest+" || "+isValidEast+"))");
					//* /
					if(!isValidDir || (isValidDir && (!isValidWest || !isValidEast))){
						let type = arrCell2D[i];//stringCell2D[i].data("type");
						stringGridFormPreviewCell2D += i>0 || (dir == 1 && i == 0) ? ", " : "";
						stringGridFormPreviewCell2D += type;//type == undefined || type == "undefined" ? 0 : type;
						ConLog(type);
						if((isValidWest || isValidEast)){ //isValidDir2 && i > 0
							ConLog(0+" added");
							stringGridFormPreviewCell2D += ", 0";
						}
					}
				}
				if(isValidDir && dir == 2 && mod > 0) {
					ConLog("0 Add East");
					stringGridFormPreviewCell2D += ", 0";
				}
				//*/

				//ConLog("stringGridFormPreviewCell2D END: "+stringGridFormPreviewCell2D);
				return stringGridFormPreviewCell2D;
			}
			function SetGridCellsString(gridCellsString = null){ //ConLog("SetGridCellsString, gridCellsString: "+gridCellsString);
				let maxX = formPreviewGrid.maxCoordinates.x;
				let maxY = formPreviewGrid.maxCoordinates.y;
				let arrCell2D = gridCellsString == null ? "" : SplitTrim(gridCellsString);
				let i=0;
				gridCellsDisplay = "";
				for(let y=maxY-1; y>=0; y--){
					for(let x=0; x<maxX; x++){
						gridCellsDisplay += gridCellsString == null ? "0" : arrCell2D[i++];
						gridCellsDisplay += ",";
					}
					gridCellsDisplay += "\r\n";
				}
				return gridCellsDisplay.slice(0, -3); 
			}
			function GridFormPreviewUpdateDimensions(){
				let maxX = Number($("#gridMaxX").val());
				let maxY = Number($("#gridMaxY").val());
				formPreviewGrid.maxCoordinates = new Coordinate(maxX, maxY);
			}
			function UpdateGridCellsString(gridCellsString){
				$("#gridCellsString").val(gridCellsString);
				$('#gridCellsString').attr('rows', (formPreviewGrid.maxCoordinates.y));
			}
			function GridFormSyncTextToPreview(){
				//ConLog("Set Grid Preview");
				GridFormPreviewUpdateDimensions();
				//ConLog("GetFormGridCellsString: "); ConLog(GetFormGridCellsString());
				formPreviewGrid.cell2d = StringCellsTo2dArray(GetFormGridCellsString(), formPreviewGrid.maxCoordinates);
				LoadGrid(formPreviewGrid, "#gridFormPreview");

			}
			function GridFormSyncPreviewAndText(isReset = false, isReverse = false){ //ConLog("GridFormSyncPreviewAndText, isReset="+isReset+", isReverse="+isReverse);
				let gridTemp = FindInActionArray(actionGrid, $("#gridName").val()); //ConLog("gridTemp: "); ConLog(gridTemp);
				formPreviewGrid = isReset && gridTemp != null ? gridTemp.Duplicate() : formPreviewGrid;

				//Set Grid Preview
				if(!isReset && !isReverse) GridFormSyncTextToPreview();

				//Set Grid String
				//ConLog("Set Grid String");
				let tempGridCellsString = (!isReset || isReverse ? GetGridFormPreviewAsString() 
										: (isReset && gridTemp != null ? gridTemp.ExportCellsAsString() 
										: null)); //ConLog("tempGridCellsString: "); ConLog(tempGridCellsString);
				let gridCellsString = gridTemp != null && isReset && !isReverse 
										? gridTemp.ExportCellsAsString(true) 
										: SetGridCellsString(tempGridCellsString); //ConLog("gridCellsString: "); ConLog(gridCellsString);
				UpdateGridCellsString(gridCellsString);

				//Set Grid Preview
				if(isReset || isReverse) GridFormSyncTextToPreview();
			}
			$("#gridFormResetPreviewCells").click(function(){
				let isConfirmed = window.confirm("If you have an Grid designed and you change the dimensions values then applying changes will jumble your design. Continue Apply?");
				if (isConfirmed) {
					GridFormSyncPreviewAndText(true);
				}
			});
			$("#gridFormApplyDimensionsAndText").click(function(){
				let isConfirmed = window.confirm("If you have an Grid designed and you change the dimensions values then applying changes will jumble your design. Continue Apply?");
				if (isConfirmed) {
					GridFormSyncPreviewAndText();
				}
			});
			
			//Edit Cell click
			$(document).on("click", ".grid-form-cell", function(event){
				let currentCellType = $("#gridFormCellType").find(":selected").val(); //ConLog("grid-form-cell to "+currentCellType);
				let testX = $(this).data("x"); 
				let testY = $(this).data("y"); 
				$(this).data("type", currentCellType);
				//let testType = $(this).data("type"); //ConLog("testType: "+testType);
				let isEditLineComplete = formGridEditType == 1 && formGridEditByLineStart != null;
				if(formGridEditType == 0 || (isEditLineComplete)){
					formGridEditByLineEnd = new Coordinate(testX, testY); //ConLog("formGridEditByLineEnd: "+formGridEditByLineEnd.ToString());

					//For by Cell Edit type
					GridFormSyncPreviewAndText(false, true);

					formGridEditByLineStart = null;
					formGridEditByLineEnd = null;

				}else if(formGridEditType == 1){
					formGridEditByLineStart = new Coordinate(testX, testY); //ConLog("formGridEditByLineStart: "+formGridEditByLineStart.ToString());
				}
			});
			$(document).keypress(function (e) {
				let key = e.keyCode || e.charCode;
				let keyNumPressed = key - 48;
				if (keyNumPressed >= 0 && keyNumPressed <= 3) {//key >= 48 && key <= 57
					let origCellVal = $("#gridFormCellType").find(":selected").val();
					keyNumPressed = keyNumPressed == origCellVal ? 0 : keyNumPressed;
					$('#gridFormCellType').val(keyNumPressed).change();
				}
			});
			
			//Add/Remove Row/Col
			$(".grid-form-dim-edit").click(function(){
				UpdateGridCellsString(SetGridCellsString(GetGridFormPreviewAsString($(this).data("dir"), $(this).data("mod"))));
				GridFormSyncTextToPreview();
			});
			function GridFormUpdateCellVal(cellValType){
				//ConLog("GridFormUpdateCellVal: loadGridDefaultCellValType to "+loadGridDefaultCellValType);
				loadGridDefaultCellValType = cellValType; //Show Coords
				LoadGrid(formPreviewGrid, "#gridFormPreview");
			}
			const cvNone = "Cell Value: None";
			const cvCoords = "Cell Value: Coordinates";
			const cvTypeID = "Cell Value: Cell Type ID";
			$("#gridFormCellVal").click(function(){
				if($(this).html() == cvNone){
					$(this).html(cvCoords);
					GridFormUpdateCellVal(1); //Show Coords
				}else if($(this).html() == cvCoords){
					$(this).html(cvTypeID);
					GridFormUpdateCellVal(2); //Show IDs
				}else if($(this).html() == cvTypeID){
					$(this).html(cvNone);
					GridFormUpdateCellVal(0); //Show None
				}
			});
			$("#gridFormCellEditType").click(function(){
				let tceByCell = "Toggle Cell Edit: By Cell";
				let tceByLine = "Toggle Cell Edit: By Line of Cells";
				if($(this).html() == tceByCell){
					$(this).html(tceByLine);
					formGridEditType = 1;
				}else if($(this).html() == tceByLine){
					$(this).html(tceByCell);
					formGridEditType = 0;
				}
				formGridEditByLineStart = null;
				formGridEditByLineEnd = null;
			});
			function GenerateSelectGrids(selectedGrid = ""){
				let selectGrids = selectedGrid == "" ? "<option value=\"n/a\" selected disabled>Select Grid</option>" 
									: "<option value=\""+selectedGrid+"\" selected>"+selectedGrid+"</option>" ;
				//ConLog("GenerateSelectGrids, arrGrids: ");ConLog(arrGrids);
				for(let i=0; i<arrGrids.length;i++){
					selectGrids += arrGrids[i].isUnlocked == 1 ? "<option value=\""+arrGrids[i].name+"\">"+arrGrids[i].name+"</option>" : "";
				}
				//ConLog("GenerateSelectGrids, selectGrids: "+selectGrids);
				return selectGrids;
			}
			
			arrCells = [new CellType(0, "Floor","#555","#666"), 
						new CellType(1, "Wall","#222","#333", false, true), 
						new CellType(2, "Hole","#000","#000", false), 
						new CellType(3, "Heal 25%","#198754","#ccc", true, false, 25)];
			function FindCellType(typeID){
				for(let i=0; i<arrCells.length; i++)
					if(arrCells[i].dbid == typeID)
						return arrCells[i];
				return arrCells[0];
			}
			function GenerateSelectCells(selectedCell = ""){
				let selectCells = selectedCell == "" ? "<option value=\"0\" selected disabled>Select Cell</option>" 
									: "<option value=\""+selectedCell+"\" selected>"+selectedCell+"</option>" ;
				//ConLog("GenerateSelectCells, arrCells: ");ConLog(arrCells);
				for(let i=0; i<arrCells.length;i++){
					selectCells += true ? "<option value=\""+arrCells[i].dbid+"\">"+arrCells[i].name+" ("+arrCells[i].dbid+")</option>" : "";//arrCells[i].isUnlocked == 1
				}
				//ConLog("GenerateSelectCells, selectCells: "+selectCells);
				return selectCells;
			}








			// === === === Levels === === === =====================================================================================================================================================================================================
			function FindLevel(levelName){//ConLog("LoadLevel ("+levelName+", "+divID+") START"); ConLog("1levelName: #tblLevelsName"+levelName);
				levelName = ( parseInt(levelName) || parseInt(levelName) === 0 ? $("#tblLevelsName"+parseInt(levelName)).text() : levelName);
				for(let i=0; i<arrLevels.length;i++)
					if(levelName == arrLevels[i].name)
						return arrLevels[i];
				return null;
			}
			function LevelFormGridPreview(){
				let grid = FindInActionArray(actionGrid, $('#levelGridName').val());
				while ($("#gridFormCellVal").html() != cvCoords) {
					$("#gridFormCellVal").click();
				}
				LoadGrid(grid, "#levelFormGridPreview");
			}
			$('#levelGridName').on('change', function() {
				LevelFormGridPreview();
			});
			$("#levelFormResetPreviewCells").click(function(){
				LevelFormGridPreview();
			});
			
			//Controls w/in the Program Form
			var levelBorgCountPlayer = 1;
			function AddBorgLevelFormPlayer(selectedBorg = ""){
				let sectionRemove = HtmlRemoveToggleable(levelBorgCountPlayer, "levelP", "level-p");
				let returnHtml = 
					"<div class=\"form-group row level-p-"+levelBorgCountPlayer+"\">"+
					"	<label class=\"col-sm-2 col-form-label\""+
					"		title=\"Player Starting Coordinates\"> Player Starting Coordinates"+sectionRemove+
					"	</label>"+
					"	<div class=\"col-sm-10 container px-0\">"+
					"		<div class=\"form-group row\">"+
					"			<div class=\"col-6\">"+
					"				<input id=\"levelPlayerX"+levelBorgCountPlayer+"\" data-id=\""+levelBorgCountPlayer+"\" class=\"level-form-player form-control\" placeholder=\"x\" type=\"number\">"+
					"			</div>"+
					"			<div class=\"col-6\">"+
					"				<input id=\"levelPlayerY"+levelBorgCountPlayer+"\" class=\"form-control\" placeholder=\"y\" type=\"number\">"+
					"			</div>"+
					"		</div>"+
					"	</div>"+
					"</div>"+
					"<div id=\"divLevelPlayerBorgEnd\"></div>";
				levelBorgCountPlayer++;
				$("#divLevelPlayerBorgEnd")[0].outerHTML = returnHtml;
			}
			$("#btnAddLevelPlayerStart").click(function(){
				AddBorgLevelFormPlayer();
			});
			var levelBorgCountEnemy = 1;
			function AddBorgLevelFormEnemy(selectedBorg = ""){
				let sectionRemove = HtmlRemoveToggleable(levelBorgCountEnemy, "levelE", "level-e");
				let returnHtml = 
					"<div class=\"form-group row level-e-"+levelBorgCountEnemy+"\">"+
					"	<label for=\"levelEnemyBorgs"+levelBorgCountEnemy+"\" class=\"col-sm-2 col-form-label\""+
					"		title=\"Enemy Borg\"> Enemy Borg"+sectionRemove+
					"	</label>"+
					"	<div class=\"col-sm-10 px-0\">"+
					"		<select id=\"levelEnemyBorgs"+levelBorgCountEnemy+"\" data-id=\""+levelBorgCountEnemy+"\" class=\"level-form-enemy form-control\">"+GenerateSelectBorgs(selectedBorg)+"</select> "+
					"	</div>"+
					"</div>"+
					"<div class=\"form-group row level-e-"+levelBorgCountEnemy+"\">"+
					"	<label class=\"col-sm-2 col-form-label\""+
					"		title=\"Enemy Starting Coordinates\"> Enemy Starting Coordinates"+
					"	</label>"+
					"	<div class=\"col-sm-10 container px-0\">"+
					"		<div class=\"form-group row\">"+
					"			<div class=\"col-6\">"+
					"				<input id=\"levelEnemyX"+levelBorgCountEnemy+"\" class=\"form-control\" placeholder=\"x\" type=\"number\">"+
					"			</div>"+
					"			<div class=\"col-6\">"+
					"				<input id=\"levelEnemyY"+levelBorgCountEnemy+"\" class=\"form-control\" placeholder=\"y\" type=\"number\">"+
					"			</div>"+
					"		</div>"+
					"	</div>"+
					"</div>"+
					"<div id=\"divLevelEnemyBorgEnd\">"+"</div>";
				levelBorgCountEnemy++;
				$("#divLevelEnemyBorgEnd")[0].outerHTML = returnHtml;
			}
			$("#btnAddBorgEnemy").click(function(){
				AddBorgLevelFormEnemy();
			});








			






			// === === === General Functions 2 === === === =====================================================================================================================================================================================================
			
			//When Debugging, use this function to display each data in it's Array
			function DisplayArr(action){
				let arrForDisplay = GetActionArray(action);
				for(let i=0; i<arrForDisplay.length; i++){
					if(action == actionBorg){
						ConLog("arrBorgs["+i+"]: "+arrForDisplay[i].ExportPtsAsString(), true);
						ConLog("arrBorgs["+i+"]: "+arrForDisplay[i].DisplayStatsAsString(), true);
					}else if(action == actionLevel){
						ConLog("arrLevels["+i+"]: "+arrForDisplay[i].ExportLevelDetailsAsString(), true);
					}else if(action == actionGrid){
						ConLog("arrGrids["+i+"]: "+arrForDisplay[i].ExportAsString(), true);
						ConLog("arrGrids["+i+"]: "+arrForDisplay[i].ExportCellsAsString(), true);
					}else if(action == actionCell){
						ConLog("arrCells["+i+"]: "+arrForDisplay[i].ToString(), true);
					}else if(action == actionProgram){
						ConLog("arrPrograms["+i+"]: "+arrForDisplay[i].ToString(), true);
					}
				}
			}
			$("#displayArrayBorgs").click(function(){
				DisplayArr(actionBorg);
			});
			$("#displayArrayLevels").click(function(){ //ConLog("displayArrayLevels");
				DisplayArr(actionLevel);
				DisplayArr(actionCell);
			});
			$("#displayArrayGrids").click(function(){
				DisplayArr(actionGrid);
			});
			$("#displayArrayPrograms").click(function(){
				DisplayArr(actionProgram);
			});


			//Display in the Edit Form based on object in Table/Array
			function DisplayInFormEdit(action, index){//ConLog("DisplayInFormEdit START");
				let actionWord = GetActionWord(action);
				if (ResetProgEditForm("Are you sure you want to overwrite the current "+actionWord+" form with the selected "+actionWord+"? ")) {
					if(action == actionBorg){
						//Edit an existing Borg. Place all it's stats to the Borg Edit Form and re-calculate remaining points   
						let borgName = $("#tblBorgsName"+index).html();
						let borgForEdit = FindInActionArray(actionBorg, borgName); ConLog("borgForEdit: "); ConLog(borgForEdit);
						formTempBorg = borgForEdit.Duplicate();
						$("#borgName").val(borgName);
						$("#borgDescription").val(borgForEdit.description);
						$("#borgSymbol").val(borgForEdit.symbol);
						$("#borgProgram").val(borgForEdit.program);
						
						//*let newPtsRemaining = parseInt($("#borgPointsMax").html());
						for(let i=0; i<arrBorgStats.length;i++){
							//let pts = $("#tblBorgs"+arrBorgStats[i]+index).data("pts");
							//pts = pts >= 0 ? pts : 0;
							//newPtsRemaining = newPtsRemaining - pts;
							$("#borg"+arrBorgStats[i]+"Pts").val(borgForEdit.GetStat(arrBorgStats[i], true)); //pts
							$("#borg"+arrBorgStats[i]).html(borgForEdit.GetStat(arrBorgStats[i]));
						}
						let newPtsRemaining = overrideMaxPoints - borgForEdit.GetTotalPoints();
						$("#borgPointsRemaining").html(newPtsRemaining);

					}else if(action == actionProgram){
						DisplayProgram(index);

					}else if(action == actionLevel){
						let levelForEditName = $("#tblLevelsName"+index).html();
						let levelForEdit = arrLevels[index]; ConLog("levelForEdit: "); ConLog(levelForEdit); //ConLog(levelForEdit.ExportAsString());
						$("#levelName").val(levelForEditName);
						$("#levelDescription").val(levelForEdit.description);
						$("#levelMaxPoints").val(levelForEdit.maxPoints);
						$("#levelMaxPlayerBorgs").val(levelForEdit.maxPlayerBorgs);

						levelBorgCountPlayer = 0;
						$("#divLevelPlayerBorg").html("<div id=\"divLevelPlayerBorgEnd\">"+"</div>");
						for (let i = 0; i < levelForEdit.arrPlayerBorgPos.length; i++) {
							let origID = levelBorgCountPlayer;
							if(i > 0) AddBorgLevelFormPlayer();
							else levelBorgCountPlayer++;
							$("#levelPlayerX"+origID).val(levelForEdit.arrPlayerBorgPos[i].x);
							$("#levelPlayerY"+origID).val(levelForEdit.arrPlayerBorgPos[i].y);
						}
						levelBorgCountEnemy = 0;
						$("#divLevelEnemyBorg").html("<div id=\"divLevelEnemyBorgEnd\">"+"</div>");
						for (let i = 0; i < levelForEdit.arrEnemyBorgNames.length; i++) {
							//let eBorg = levelForEdit.arrEnemyBorgNames[i];
							let origID = levelBorgCountEnemy;
							if(i > 0) AddBorgLevelFormEnemy();
							else levelBorgCountEnemy++;
							$("#levelEnemyX"+origID).val(levelForEdit.arrEnemyBorgPos[i].x);
							$("#levelEnemyY"+origID).val(levelForEdit.arrEnemyBorgPos[i].y);
							$("#levelEnemyBorgs"+origID).val(levelForEdit.arrEnemyBorgNames[i]);
						}
						$("#levelGridName").html(GenerateSelectGrids(levelForEdit.gridName));
						$("#levelFormResetPreviewCells").click();

					}else if(action == actionGrid){
						let gridForEditName = $("#tblGridsName"+index).html();
						let gridForEdit = arrGrids[index]; //ConLog("gridForEdit: "); ConLog(gridForEdit.ExportAsString());
						$("#gridName").val(gridForEditName);
						$("#gridDescription").val(gridForEdit.description);
						$("#gridMaxX").val(gridForEdit.maxCoordinates.x);
						$("#gridMaxY").val(gridForEdit.maxCoordinates.y);
						formPreviewGrid = gridForEdit;
						$("#gridFormResetPreviewCells").click();
					}
				}
			}
			
			//Update data of Borg Table based on the Borg Array, optionally save Borgs to Storage
			function UpdateTable(tableID){//ConLog("UpdateBorgTable START");
				let tblData = $(tableID).data("table");
				let tblForUpdate = (tableID == "#tblBorgs" ? tblBorgs 
								: (tableID == "#tblSelectionBorgs" ? tblSelectionBorgs 
								: (tableID == "#tblLevels" ? tblLevels 
								: (tableID == "#tblSelectionLevels" ? tblSelectionLevels 
								: (tableID == "#tblProgs" ? tblProgs 
								: (tableID == "#tblSelectionProgs" ? tblSelectionProgs 
								: (tableID == "#tblGrids" ? tblGrids 
								: null)))))));
				tblForUpdate.clear().draw();
				let action = 	(tblData == "borg" ? actionBorg 
								: (tblData == "level" ? actionLevel 
								: (tblData == "grid" ? actionGrid 
								: (tblData == "prog" ? actionProgram 
								: null))));
				let arrItems = 	GetActionArray(action); //ConLog("UpdateTable, arrItems: "); ConLog(arrItems);
				for(let i=0; i<arrItems.length;i++){
					//ConLog("arrItems[i]: ");ConLog(arrItems[i]);
					if(arrItems[i] != null && (arrItems[i].isUnlocked > 0 || isUserDev)){//
						let isDefault = FindInDefaults(action, arrItems[i].name);
						if(action == actionBorg) arrItems[i].AllocatePoints();
						let attrDisabled = "";
						let htmlBtnPreview = "<button class=\"tbl-preview btn btn-success\" data-action=\""+action+"\" data-index=\""+i+"\">Preview</button> ";
						let htmlBtnEdit = action == actionLevel && !(arrItems[i].createdBy == userDataName || IsLevelWon(arrItems[i].name)) ? "" 
										: "<button class=\"tbl-edit btn btn-info\" data-action=\""+action+"\" data-index=\""+i+"\""+attrDisabled+">Edit</button> ";
						let htmlBtnDelete = isDefault ? "" : " <button class=\"tbl-delete btn btn-danger\" data-action=\""+action+"\" data-index=\""+i+"\""+attrDisabled+">Delete</button>";
						//attrDisabled = arrItems[i].createdBy == userDataName ? "" : "disabled";
						let htmlBtnExport = arrItems[i].createdBy != userDataName ? "" : "<button class=\"tbl-export btn btn-info\" data-action=\""+action+"\" data-index=\""+i+"\""+attrDisabled+">Export</button> ";
						let colActions = (tableID == "#tblBorgs" ? htmlBtnEdit + htmlBtnDelete + htmlBtnExport 
										: (tableID == "#tblLevels" ? htmlBtnPreview + htmlBtnEdit + htmlBtnDelete + htmlBtnExport
										: (tableID == "#tblGrids" ? htmlBtnPreview + htmlBtnEdit + htmlBtnDelete + htmlBtnExport
										: (tableID == "#tblProgs" ? htmlBtnEdit + htmlBtnDelete + htmlBtnExport
										: "n/a"))));
						let columnData = null;
						
						let tableIDString = tableID.replace("#", "");
						if(action == actionBorg){
							let borg = arrBorgs[i];
								columnData = 
								[{
									0: "<span id=\""+tableIDString+"Name"+i+"\">"+borg.name+"</span>",
									1: "<span id=\""+tableIDString+"Symbol"+i+"\">"+borg.symbol+"</span>",
									2: "<span id=\""+tableIDString+"TtlPts"+i+"\">"+borg.GetTotalPoints()+"</span>",
									3: "<span id=\""+tableIDString+"Hp"+i+"\" data-pts=\""+borg.pts_hp+"\">"+borg.max_hp+"</span>",
									4: "<span id=\""+tableIDString+"Speed"+i+"\" data-pts=\""+borg.pts_speed+"\">"+borg.base_speed+"</span>",
									5: "<span id=\""+tableIDString+"Damage"+i+"\" data-pts=\""+borg.pts_damage+"\">"+borg.damage+"</span>",
									6: "<span id=\""+tableIDString+"Range"+i+"\" data-pts=\""+borg.pts_range+"\">"+borg.range+"</span>",
									7: "<span id=\""+tableIDString+"Cooldown"+i+"\" data-pts=\""+borg.pts_cooldown+"\">"+borg.base_cooldown+"</span>",
									8: "<span id=\""+tableIDString+"Program"+i+"\">"+borg.program+"</span>",
									9: "<span id=\""+tableIDString+"Description"+i+"\">"+borg.description+"</span>",
									10: "<span id=\""+tableIDString+"CreatedBy"+i+"\">"+borg.createdBy+"</span>",
									11: colActions
								}];
						} else if(action == actionLevel){
							let level = arrLevels[i]; //ConLog("level.gridName: "+level.gridName); ConLog(arrGrids);
							let grid = FindInActionArray(actionGrid, level.gridName);
							columnData = 
								[{
									0: "<span id=\""+tableIDString+"Name"+i+"\">"+level.name+"</span>",
									1: "<span id=\""+tableIDString+"Description"+i+"\">"+level.description+"</span>",
									2: "<span id=\""+tableIDString+"MaxCoord"+i+"\">["+grid.maxCoordinates.x+","+grid.maxCoordinates.y+"]</span>",
									3: "<span id=\""+tableIDString+"MaxPoints"+i+"\">"+level.maxPoints+"</span>",//
									4: "<span id=\""+tableIDString+"MaxPlayerBorgs"+i+"\">"+level.maxPlayerBorgs+"</span>",
									5: "<span id=\""+tableIDString+"CreatedBy"+i+"\">"+level.createdBy+"</span>",
									6: colActions
								}];
						} else if(action == actionGrid){
							let grid = arrGrids[i];
							columnData = 
								[{
									0: "<span id=\""+tableIDString+"Name"+i+"\">"+grid.name+"</span>",
									1: "<span id=\""+tableIDString+"Description"+i+"\">"+grid.description+"</span>",
									2: "<span id=\""+tableIDString+"MaxCoord"+i+"\" data-x=\""+grid.maxCoordinates.x+"\" data-y=\""+grid.maxCoordinates.y+"\">["+grid.maxCoordinates.x+","+grid.maxCoordinates.y+"]</span>",
									3: "<span id=\""+tableIDString+"CreatedBy"+i+"\">"+grid.createdBy+"</span>",
									4: colActions
								}];
						} else if(action == actionProgram){
							let program = arrPrograms[i];
							columnData = 
								[{
									0: "<span id=\""+tableIDString+"Name"+i+"\">"+program.name+"</span>",
									1: "<span id=\""+tableIDString+"Description"+i+"\">"+program.description+"</span>",
									2: "<span id=\""+tableIDString+"Complexity"+i+"\">"+program.GetComplexity()+"</span>",
									3: "<span id=\""+tableIDString+"CreatedBy"+i+"\">"+program.createdBy+"</span>",
									4: colActions
								}];
						} 
						tblForUpdate.rows.add(columnData);
					}
				}
				
				tblForUpdate.draw();
			}
			//Update data of Table based on the Array, optionally save to Storage
			function UpdateAllClassTables(action){//ConLog("UpdateAllBorgTables START: "+action);
				if(action == actionBorg){
					UpdateTable("#tblBorgs");
					UpdateTable("#tblSelectionBorgs");
				}else if(action == actionLevel){
					UpdateTable("#tblLevels");
					UpdateTable("#tblSelectionLevels");
				}else if(action == actionGrid){
					UpdateTable("#tblGrids");
				}else if(action == actionProgram){
					UpdateTable("#tblProgs");
					let optionsPrograms = "<option value=\""+defaultProgramName+"\" selected disabled>Select a Program, otherwise uses Default Program</option>";
					for(let i=0; i<arrPrograms.length;i++){
						optionsPrograms += "<option value=\""+arrPrograms[i].name+"\">"+arrPrograms[i].name+"</option>";
					}
					$("#borgProgram").html(optionsPrograms);
				}else if(action == "sectionManual"){
					tblManual.draw();
					tblManual.columns.adjust();
				}
			}
			const actionExport = "!E!";
			const actionExportInner = "!e!";
			function ExportComponentCount(action){
				return (action == actionLevel ? 2
					: (action == actionBorg || action == actionProgram ? 1 
					: 0));
			}
			function SetExportComponent(action, arrComponents, forExport){
				let countComponent = ExportComponentCount(action);
				for (let c = 0; c < countComponent; c++) {
					arrComponents[c] ??= [];
					let component = (c == 0 && action == actionBorg ? forExport.program
									: (c == 1 && action == actionLevel ? forExport.gridName 
									: (c == 0 && action == actionLevel ? forExport.ExportEnemyTeamAsString(true) 
									: "")));
					//ConLog("SetExportComponent, "+action+", component: "+component);
					if(!arrComponents[c].find((d) => d == component)){ arrComponents[c].push(component); }
				}
				//ConLog("SetExportComponent, "+action+", arrComponents: "); ConLog(arrComponents);
				return arrComponents;
			}
			//Export a String of Names formatted for Importing incuding all of their components
			var arrExportContainer = [];
			function ExportNamesToClassStringRecursive(action, stringNames, isInitial = true, ignoreComponents = false){ //TO DO GRID EXPORT =================================
				//Each recursion of the export will be separated by actionExport
				let exportString = isInitial ? "" : actionExport;
				//To Start off, the Export will store the Class type using the action of that Class.
				exportString += action + actionExportInner;

				//Extract the data of each expected cllass to export
				let arrTempContainer = [];
				//arrTempContainer.push(actionExportInner);
				let exportComponentsAction2 = (action == actionLevel ? actionBorg : null);
				let arrComponents = [];
				let arrComponents2 = [];
				let arrDuplicate = [];
				let arrNames = SplitTrim(stringNames, action); //ConLog("===========ExportNamesToClassString, stringNames, "+action+": "+stringNames);
				for(let i=0; i<arrNames.length;i++){
					let found = FindInArray(arrDuplicate, arrNames[i]);//arrComponents.find((d) => d == component);
					//ConLog(arrDuplicate);ConLog(arrNames[i]);ConLog(found);
					if(found == null){
						arrDuplicate.push(arrNames[i]);
						let forExport = FindInActionArray(action, arrNames[i]); //ConLog(action+", forExport: "+arrNames[i]); ConLog(forExport);
						if(forExport != null){
							forExport = forExport.Duplicate();
							if(!isInitial && !ignoreComponents) forExport.isUnlocked = 0;
							let forExportString = i>0 ? action : "";
							forExportString += (action == actionBorg ? forExport.ExportPtsAsString() 
											: (action == actionLevel ? forExport.ExportAsString() 
											: (action == actionGrid ? forExport.ExportAsString() 
											: (action == actionProgram ? forExport.ToString() 
											: "")))); //ConLog(action+", exportString: "+exportString);
							arrTempContainer.push(forExportString);
							exportString += forExportString;

							if(!ignoreComponents){
								//For each Class object check for any Component classes.
								arrComponents = SetExportComponent(action, arrComponents, forExport);
							}
						}
					}
				}
				
				if(!ignoreComponents){
					//Make sure that the components of the Parents are exported first. 
					let countComponent = ExportComponentCount(action); //ConLog("arrComponents: "); ConLog(arrComponents);
					for (let c = 0; c < countComponent; c++) {
						let exportStringComponents = "";
						let exportComponentsAction = (c == 0 && action == actionBorg ? actionProgram
													: (c == 1 && action == actionLevel ? actionGrid 
													: (c == 0 && action == actionLevel ? actionBorg 
													: "")));
						//ConLog("ExportNamesToClassStringRecursive, "+action+", arrComponents["+c+"]: "); ConLog(arrComponents[c]);
						for(let i=0; i < arrComponents[c].length; i++){
							let component = arrComponents[c][i];
							exportStringComponents += (i == 0 ? "" : exportComponentsAction);
							exportStringComponents += component;
						}
						//ConLog("ExportNamesToClassStringRecursive(exportComponentsAction["+exportComponentsAction+"], exportStringComponents["+exportStringComponents+"], false)"); 
						exportString += exportComponentsAction == "" ? "" : ExportNamesToClassStringRecursive(exportComponentsAction, exportStringComponents, false);
					}
				}

				//After the components of the Parents are exported, only then Export the Parent classes. 
				//exportString = exportString.substring(3); ConLog("return exportString: "+exportString);//isInitial ? exportString : actionExport+exportString;
				if(arrExportContainer.length > 0){ 
					arrExportContainer.push(actionExport); }
				arrExportContainer.push(action);
				arrExportContainer.push(actionExportInner);
				arrTempContainer.forEach(temp => {
					arrExportContainer.push(temp);
				});
				let useExportContainer = true;
				if(isInitial && useExportContainer) {
					exportString = "";
					arrExportContainer.forEach(temp => {
						exportString += temp;
					});
					arrExportContainer = [];
				}
				return exportString;
			}
			function ReverseString(str) {
				return (str === '') ? '' : ReverseString(str.substr(1)) + str.charAt(0);
			}
			function ExportNamesToClassString(action, stringNames, isInitial = true){
				arrExportContainer = [];
				return ReverseString(ExportNamesToClassStringRecursive(action, stringNames, isInitial));
			}
			//Returns the entire Array as a String
			function ArrayToString(action, isNameOnly = false, isForExport = false) {//ConLog("ArrayToString START: "+action);
				let exportStringNames = "";
				let finalList = "";
				let arrTemp = GetActionArray(action);
				for(let i=0; i<arrTemp.length;i++){
					if(arrTemp[i] != null){
						if(!isNameOnly){
							finalList += i>0 ? action : "";
							finalList += (action == actionBorg ? arrTemp[i].ExportPtsAsString() 
										: (action == actionLevel ? arrTemp[i].ExportAsString() 
										: (action == actionGrid ? arrTemp[i].ExportAsString() 
										: (action == actionProgram ? arrTemp[i].ToString() 
										: ""))));
						}else{
							exportStringNames += i>0 ? action : "";
							exportStringNames += arrTemp[i].name;
						}
					}
				}
				finalList = !isNameOnly ? finalList : exportStringNames;
				//finalList = !isForExport ? finalList : ExportNamesToClassString(action, exportStringNames);
				//ConLog("ArrayToString ("+action+")["+arrTemp.length+"]: "+finalList);
				return finalList;
			}
			function ExportFullUserData(){
				arrExportContainer = [];
				let finalString = actionUserData + actionExportInner + GetUserData() 
								//*
								+ ExportNamesToClassStringRecursive(actionProgram, ArrayToString(actionProgram, true), false, true)
								+ ExportNamesToClassStringRecursive(actionBorg, ArrayToString(actionBorg, true), false, true)
								+ ExportNamesToClassStringRecursive(actionGrid, ArrayToString(actionGrid, true), false, true)
								+ ExportNamesToClassStringRecursive(actionLevel, ArrayToString(actionLevel, true), false, true);//*/
				return ReverseString(finalString);
			}
			$("#btnExportFullUserData").click(function(){
				alert("I suggest setting the Import/Export Alert to DO NOT SHOW beforehand when importing Full User Data.");
				let fullUserData = (ExportFullUserData());//ReverseString
				$("#importClassString").val(fullUserData);
			});
			//Since the Storage will be text based we need a quick way to convert from String to the Object Class
			function StringToClass(action, string) { //ConLog("StringToClass Start: "+string);
				if(action == actionBorg){
					return new Borg(string);
				}else if(action == actionLevel){
					return new Level(string);
				}else if(action == actionGrid){
					return new Grid(string);
				}else if(action == actionProgram){
					return new Program(string);
				}
			}
			//Convert Class String to Class Array then add to Array
			function InsertClassStringIntoArray(action, classString, isCopy = false){ //ConLog("InsertClassStringIntoArray (action "+action+")(isCopy, "+isCopy+") Start: "+classString);
				let newClass = StringToClass(action, classString);
				let arrForAppend = GetActionArray(action);
				newClass.name = VerifyNameInArray(action, newClass.name);
				newClass.createdBy = isCopy ? userDataName : newClass.createdBy;
				newClass.isUnlocked = (newClass.isUnlocked == 0 && newClass.createdBy == userDataName) ? 1 : newClass.isUnlocked;
				if(arrForAppend != null) arrForAppend.push(newClass);
				else alert("Error: InsertClassStringIntoArray["+action+"]");
			}
			//Insert the Class Objects in Array into Storage
			const storageBorgs = "bbdb2025-storageBorgs";
			const storageLevels = "bbdb2025-storageLevels";
			const storageGrids = "bbdb2025-storageGrids";
			const storagePrograms = "bbdb2025-storagePrograms";
			function InsertArrayIntoStorage(action, reloadStorageString = false){ //ConLog("InsertArrayIntoStorage, action: "+action); ConLog(arrLevels);
				let storageItem = (action == actionBorg ? storageBorgs 
								: (action == actionLevel ? storageLevels 
								: (action == actionGrid ? storageGrids 
								: (action == actionProgram ? storagePrograms 
								: null))));
				localStorage.setItem(storageItem, ArrayToString(action));
				if(reloadStorageString) StorageStringToArray(storageItem);
				UpdateAllClassTables(action);
			}
			const flagOverwrite = "Overwrite";
			const flagNew = "Create New";
			const flagCopy = "Create Copy";
			const flagReset = "Create New Default";
			var arrImportStrings = null;
			var isResetOngoing = false;
			function UpdateClassStringInArray2(flag, action, classString){ //ConLog("flag: "+flag)
				//ConLog("UpdateClassStringInArray2, "+flag+", "+action+": "+classString);
				let splitter = GetActionInner(action);
				let className = SplitTrim(classString, splitter)[0]; //ConLog(action+"className: "+className);
				if(flag == flagOverwrite){
					let classForSave = FindInActionArray(action, className); //ConLog("UpdateClassStringInArray2, classForSave: ");ConLog(classForSave);
					classForSave.ImportStringToThis(classString, true);
				}else if(flag == flagNew || flag == flagCopy || flag == flagReset){
					let isImport = arrImportStrings != null && arrImportStrings.length > 0;
					InsertClassStringIntoArray(action, classString, (flag == flagCopy && !isImport));
				}
				InsertArrayIntoStorage(action);
				if(flag != flagReset && !isResetOngoing) {
					let classSaved = FindInActionArray(action, className);
					let alertClassText = classSaved.isUnlocked == 0 ? "[Locked]" : className;
					
					if(setToggleExportAlert == "0"){
						alert(" "+flag+" completed for "+alertClassText);
					} 
				}
				CheckImportString();
			}
			//Update an existing Class object in an Array, otherwise add it in the Array
			function UpdateClassStringInArray(action, classString, isOverwrite = false, isReset = false){ //ConLog("UpdateClassStringInArray Start "+classString);
				let splitter = GetActionInner(action);
				let className = SplitTrim(classString, splitter)[0]; //ConLog(action+" className: "+className);
				let classForSave = FindInActionArray(action, className); //ConLog("classForSave: ");ConLog(classForSave);
				//let insertIfNotFound = insertIfNotFound || (classForSave != null && classForSave.createdBy != userDataName);
				let isDefault = FindInDefaults(action, className);
				//if(isOverwrite){  ConLog("isOverwrite: "+classString); ConLog(classForSave);}
				let flag = null;
				if(isReset){
					flag = flagReset;
					isResetOngoing = true;
				}
				if(classForSave != null && (isOverwrite || !isDefault || classForSave.createdBy == userDataName)){
					//Update Existing
					//let isConfirmed = !isOverwrite ? window.confirm("Name is already in use. Saving will overwrite the existing data. Continue Save?") : isOverwrite;
					if(isOverwrite){
						flag = flagOverwrite;
					}else if(!isReset){
						$('#divDialog').attr('title', 'Update Alert!');
						$("#dialogText").html("Name("+className+") is already in use. You can overwrite the existing data or save a copy.");
						$("#divDialog").dialog({
							resizable: false,
							height: "auto",
							width: 400,
							modal: true,
							buttons: 
								{
									"Overwrite": function() {
										$( this ).dialog( "close" );
										UpdateClassStringInArray2(flagOverwrite, action, classString);
									},
									"Create Copy": function() {
										$( this ).dialog( "close" );
										UpdateClassStringInArray2(flagCopy, action, classString);
									},
									Cancel: function() {
										$( this ).dialog( "close" );
										CheckImportString();
									}
								}
						});
					}
				}else if(!isReset){//insertIfNotFound
					//Create New
					if(classForSave != null) {
						alert("Cannot edit "+className+". Created copy instead.");
						flag = flagCopy;
					}else{
						flag = flagNew;
					}
				}

				if(flag != null){
					//ConLog("UpdateClassStringInArray2("+flag+", "+action+", "+classString+")");
					UpdateClassStringInArray2(flag, action, classString);
				}
			}
			function CheckImportString(){
				//ConLog("CheckImportString, arrImportStrings: "); ConLog(arrImportStrings);
				if(arrImportStrings != null && arrImportStrings.length > 0){
					let initialImport = arrImportStrings.shift();
					UpdateClassStringInArray(initialImport[0], initialImport[1]);
				}
			}
			function ImportFromExportString(exportString){
				arrImportStrings = [];
				exportString = ReverseString(exportString); //ConLog("ImportFromExportString, exportString: "+exportString);
				let arrExports = SplitTrim(exportString, actionExport); //ConLog("arrExports: ");ConLog(arrExports);
				arrExports.forEach(exportSubString => {
					let arrExportContents = SplitTrim(exportSubString, actionExportInner);
					let action = arrExportContents[0];
					if(action != actionUserData){
						let inner = GetActionInner(action);
						let arrExportClasses = SplitTrim(arrExportContents[1], action); //ConLog("arrExportClasses: ");ConLog(arrExportClasses);
						arrExportClasses.forEach(classString => { //ConLog("ImportFromExportString, classString: ");ConLog(classString);
							let classObj = SplitTrim(classString, inner); 
							let isDefault = FindInDefaults(action, classObj[0]);
							//ConLog("classObj, "+isDefault+": ");ConLog(classObj);
							if(!isDefault) { 
								let tempArr = [action, classString];
								arrImportStrings.push(tempArr);
							}//else ConLog(classObj[0] + " is default");
						});
					}else{
						//ConLog("arrExportContents[1]: "+arrExportContents[1]);
						LoadUserData(arrExportContents[1]);
						UpdateUserData();
					}
				});
				if(arrImportStrings.length > 0){
					let initialImport = arrImportStrings.shift(); //ConLog("initialImport: "); ConLog(initialImport);
					UpdateClassStringInArray(initialImport[0], initialImport[1]); //ConLog("Exporting: "+classObj[0]); 
				}
			}
			$("#btnImportClassString").click(function(){
				//ConLog($("#importClassString").val());
				ImportFromExportString($("#importClassString").val());
			});
			$("#btnReverse").click(function(){
				$("#importClassString").val(ReverseString($("#importClassString").val()));
			});
			$("#btnTestImport").click(function(){
				//ImportFromExportString(ArrayToString(actionBorg, true));
			});
			//Save data in a form to the appropriate Array 
			function SaveFormToArray(action){ 
				let classNameId = (action == actionBorg ? "#borgName" 
								: (action == actionProgram ? "#progName" 
								: (action == actionLevel ? "#levelName" 
								: (action == actionGrid ? "#gridName" 
								: null))));
				let className = $(classNameId).val();
				if(className == null || className == ""){
					alert("ERR, SaveFormToArray: Name required");
				}else if(className.includes(",")){
					alert("ERR, SaveFormToArray: Cannot use comma(,) in Name");
				}else{
					let formToString = "";
					if(action == actionBorg){
						formToString = FormToClassStringBorg();
					}else if(action == actionProgram){
						formToString = FormToClassStringProgram();
					}else if(action == actionLevel){
						formToString = FormToClassStringLevel();
					}else if(action == actionGrid){
						formToString = FormToClassStringGrid();
					}
					//ConLog("formToString: "+formToString);
					UpdateClassStringInArray(action, formToString);
					//Update Affected Selects
					if(action == actionBorg){
						$("#levelEnemyBorgs0").html(GenerateSelectBorgs());
					}else if(action == actionProgram){
					}else if(action == actionLevel){
					}else if(action == actionGrid){
						$("#levelGridName").html(GenerateSelectGrids());
					}
				}//*/
			}
			$("#submitSaveBorg").click(function(){
				let errMsg = null;
				if($("#borgName").val() == "") errMsg = "Name is required.";
				if(errMsg != null) alert(errMsg);
				else SaveFormToArray(actionBorg);
			});
			$("#submitSaveProg").click(function(){
				let errMsg = null;
				if($("#progName").val() == "") errMsg = "Name is required.";
				if(errMsg != null) alert(errMsg);
				else SaveFormToArray(actionProgram);
			});
			$("#submitSaveLevel").click(function(){
				let errMsg = null;
				ConLog($("#levelName").val());
				if($("#levelName").val() == "") errMsg = "Name is required.";
				else if($("#levelGridName").find(":selected").val() == "n/a") errMsg = "Grid is required.";
				else if($("#levelMaxPoints").val() == "") errMsg = "Max Points is required.";
				else if($("#levelMaxPlayerBorgs").val() == "") errMsg = "Max Player Borgs is required.";
				else if($("#levelPlayerX0").val() == "" || $("#levelPlayerY0").val() == "") errMsg = "At least one Player Borg position is required.";
				else if($("#levelPlayerX0").val() == "" || $("#levelPlayerY0").val() == "") errMsg = "At least one Player Borg position is required.";
				
				if(errMsg != null) alert(errMsg);
				else SaveFormToArray(actionLevel);
			});
			$("#submitSaveGrid").click(function(){
				let errMsg = null;
				if($("#gridName").val() == "") errMsg = "Name is required.";
				if(errMsg != null) alert(errMsg);
				else SaveFormToArray(actionGrid);
			});

			//Update Array based on data in Storage
			function StorageStringToArray(storageItem, overrideString = "") {
				let storageString = localStorage.getItem(storageItem); //ConLog("StorageStringToArray PRE, "+storageItem+": "+storageString);
				storageString = storageString ? storageString : overrideString; //ConLog("StorageStringToArray POST, "+storageItem+": "+storageString);
				if(storageString){
					let action = (storageItem == storageBorgs ? actionBorg 
									: (storageItem == storageLevels ? actionLevel 
									: (storageItem == storageGrids ? actionGrid 
									: (storageItem == storagePrograms ? actionProgram 
									: null))));
					ClearActionArray(action);
					
					let storageStringSplit = SplitTrim(storageString, action); //ConLog("StorageStringToArray storageStringSplit, "+storageItem+": "+storageStringSplit);
					for(let i=0; i<storageStringSplit.length;i++){
						//ConLog("storageStringSplit["+i+"]: "); ConLog(storageStringSplit[i]);
						if(storageStringSplit[i] != null) InsertClassStringIntoArray(action, storageStringSplit[i]);
					}
					/*if(action == actionBorg) {ConLog("StorageStringToArray final array , "+storageItem+" arrBorgs: "); ConLog(arrBorgs)}
					else if(action == actionLevel) {ConLog("StorageStringToArray final array , "+storageItem+" arrLevels: "); ConLog(arrLevels)}
					else if(action == actionProgram) {ConLog("StorageStringToArray final array , "+storageItem+" arrPrograms: "); ConLog(arrPrograms)};
					//*/
				}
			}
			
			//Delete All In Array based on action
			function DeleteAllInArray(action){
				let msgAction = (action == actionBorg ? "Borgs" 
								: (action == actionLevel ? "Levels" 
								: (action == actionGrid ? "Grids" 
								: (action == actionProgram ? "Programs" 
								: ""))));
				let isConfirmed = window.confirm("All "+msgAction+" will be deleted permanently. Continue Deletion?");
				if (isConfirmed) {
					ClearActionArray(action);
					localStorage.removeItem('storage'+msgAction);
					InsertArrayIntoStorage(action);
					UpdateUserData(true, true);
				}
			};
			$("#btnDeleteAllBorgs").click(function(){
				DeleteAllInArray(actionBorg);
			});
			$("#btnDeleteAllPrograms").click(function(){
				DeleteAllInArray(actionProgram);
			});
			$("#btnDeleteAllLevels").click(function(){
				DeleteAllInArray(actionLevel);
			});
			$("#btnDeleteAllGrids").click(function(){
				DeleteAllInArray(actionGrid);
			});
			// Force Update
			$("#btnDeleteAllClassObjects").click(function(){
				let isConfirmed = window.confirm("All data will be deleted permenently. Continue Forced Deletion?");
				if (isConfirmed) {
					DeleteAllInArray(actionBorg);
					DeleteAllInArray(actionProgram);
					DeleteAllInArray(actionGrid);
					DeleteAllInArray(actionLevel);
					$("#btnForceUpdateDefault").click();
				}
			});
			//Using index delete from an Array
			function DeleteFromArray(action, index){ //ConLog("DeleteFromArray START");
				let isConfirmed = window.confirm("This will be deleted permanently. Continue Deletion?");
				if (isConfirmed) {
					let arrToDeleteFrom = GetActionArray(action);
					let storageItem = (action == actionBorg ? storageBorgs 
									: (action == actionLevel ? storageLevels 
									: (action == actionGrid ? storageGrids 
									: (action == actionProgram ? storagePrograms 
									: null))));
					arrToDeleteFrom[index] = null;
					InsertArrayIntoStorage(action, true);
					//StorageStringToArray(storageItem);
					//UpdateAllClassTables(action);
				}
			} 

			//Update Table Functions
			var hasExportedOnce = false;
			$(document).on("click", ".tbl-export", function(event){
				let action = $(this).data("action");
				let tempArr = GetActionArray(action);
				let forExport = tempArr[$(this).data("index")]; //ConLog(forExport);
				$("#importClassString").val(ExportNamesToClassString(action, forExport.name));
				ShowSectionSettings();
				const importClassString = document.getElementById("importClassString");
				importClassString.focus();
				importClassString.select();
				$("#divImportExportClass").addClass("border border-light rounded-3");
				setTimeout(function () {
					$("#divImportExportClass").removeClass("border border-light rounded-3");
					if(!hasExportedOnce && setToggleExportAlert == "0"){
						hasExportedOnce = true;
						alert("Copy the export sting. The importer must Paste this string in the same textarea.");
					} 
				}, 100);
			});
			$(document).on("click", ".tbl-edit", function(event){
				let action = $(this).data("action");
				let actionWord = GetActionWord(action);
				let divForm = "#div"+actionWord+"Form";
				$(divForm).addClass("is-active");
				$(divForm).slideDown();//.show();
				DisplayInFormEdit(action, $(this).data("index"));
			});
			$(document).on("click", ".tbl-delete", function(event){
				DeleteFromArray($(this).data("action"), $(this).data("index"));
			});
			$(document).on("click", ".tbl-preview", function(event){
				let action = $(this).data("action");
				//let classObj = FindLevel($(this).data("index"));
				if(action == actionLevel){
					loadGridDefaultCellValType = 0;
					LoadLevel(arrLevels[$(this).data("index")], "#levelPreview");
				} else if(action == actionGrid){
					LoadGrid(arrGrids[$(this).data("index")]);
				}
			});
			// Manually update Table Data
			function ManualUpdate(action){
				DisplayArr(action);
				InsertArrayIntoStorage(action);
			}
			$("#btnManualUpdateBorgs").click(function(){ 
				//ConLog("Borg count: "+arrBorgs.length);
				ManualUpdate(actionBorg);
			});
			$("#btnManualUpdateLevels").click(function(){ 
				//ConLog("Level count: "+arrLevels.length);
				ManualUpdate(actionLevel);
			});
			






















			
			// === === === PLAY === === === ===================================================================================================================================================================================================== -->
			$("#btnPlaySelectionBorgs").click(function(){
				if ($('#divSelectionBorgs').hasClass("is-active")) {
					$('#divSelectionBorgs').removeClass("is-active");
					$('#divSelectionBorgs').slideUp();
				}
				else {
					$('#divSelectionBorgs').addClass("is-active");
					$('#divSelectionBorgs').slideDown();
					UpdateAllClassTables(actionBorg);
				}//*/
			});
			$("#btnPlaySelectionLevels").click(function(){
				hasSelectedLevel = setTogglePlaySelectDisplay == 1 && false; 
				if ($('#divSelectionLevels').hasClass("is-active")) {
					$('#divSelectionLevels').removeClass("is-active");
					$('#divSelectionLevels').slideUp();
				}
				else {
					$('#divSelectionLevels').addClass("is-active");
					$('#divSelectionLevels').slideDown();
					UpdateAllClassTables(actionLevel);
				}//*/
			});
			function ClearViewSelection(exemption = ""){
				$('.div-selection').removeClass("is-active");
				$('.div-selection').slideUp();
				if(exemption != ""){
					let tblToUpdate = exemption == actionBorg ? '#divSelectionBorgs' : ""; //ConLog("tblToUpdate: "+tblToUpdate);
					$(tblToUpdate).addClass("is-active");
					$(tblToUpdate).show();
					UpdateAllClassTables(exemption);
				}

			}
			let hasSelectedLevel = false;
			let hasSelectedBorg = true;//Set to true to disable auto hide
			let hasSelectedProg = false;
			var playLevelMaxPoints = 0;
			var playLevelMaxPlayerBorgs = 0;
			//When a Level row is selected set the Level as the current Level for Play 
			tblSelectionLevels.on('click', 'tbody tr', (e) => {
				let classList = e.currentTarget.classList;
				tblSelectionLevels.rows('.selected').nodes().each((row) => row.classList.remove('selected'));
				classList.add('selected');
				let txtSelectedLevelName = e.currentTarget.cells[0].getElementsByTagName('*')[0].innerHTML;
				$("#playSelectedLevel").val(txtSelectedLevelName); //ConLog("Selected Level: "+txtSelectedLevelName);
				if(!hasSelectedLevel){
					let tempLevel = FindInActionArray(actionLevel, txtSelectedLevelName);
					playLevelMaxPoints = tempLevel.maxPoints;
					playLevelMaxPlayerBorgs = tempLevel.maxPlayerBorgs;
					$("#playLevelSelectedLevel").html(txtSelectedLevelName);
					$("#playLevelMaxPoints").html(playLevelMaxPoints);
					$("#playLevelMaxPlayerBorgs").html(tempLevel.maxPlayerBorgs);
					$("#playLevelMaxPoints2").html(playLevelMaxPoints);
					$("#playLevelMaxPlayerBorgs2").html(tempLevel.maxPlayerBorgs);
					hasSelectedLevel = setTogglePlaySelectDisplay == 1; //Set to true to disable auto hide
					ClearViewSelection(actionBorg);
				}
				let level = FindLevel(txtSelectedLevelName);
				LoadLevel(level);
			});
			//When a Borg row is selected set the Borg as the current Borg for Play 
			tblSelectionBorgs.on('click', 'tbody tr', (e) => {
				let classList = e.currentTarget.classList;
				if (classList.contains('selected')) {
					classList.remove('selected');
				} else {
					//tblSelectionBorgs.rows('.selected').nodes().each((row) => row.classList.remove('selected'));//Remove to allow multiple Borgs
					classList.add('selected');
				}
				let txtSelectedBorgName = "";//e.currentTarget.cells[0].getElementsByTagName('*')[0].innerHTML;
				let rows = tblSelectionBorgs.rows('.selected').data();
				for(let i=0; i<rows.length;i++){   
					txtSelectedBorgName += i>0 ? ", " : "";
					txtSelectedBorgName += new DOMParser().parseFromString(rows[i][0], "text/xml").firstChild.innerHTML;
				}
				$("#playSelectedBorg").val(txtSelectedBorgName); //ConLog("Selected Borg: "+txtSelectedBorgName);
				if(!hasSelectedBorg){
					//hasSelectedBorg = setTogglePlaySelectDisplay == 1; //Set to true to disable auto hide
					ClearViewSelection();
				}
			});


			var isGamePaused = true;
			var isGameEnded = false;
			var gameLevel = null;
			var gameGrid = null;
			var gameRound = 0;
			var gameTick = 0;
			var gameInterval = null;
			const maxGameTicks = 10;
			const maxGameRounds = 100;
			var gameGridData = null; //array of all the grid points
			var arrGameTeamPrefix = [];
			arrGameTeamPrefix.push("0");
			arrGameTeamPrefix.push("P");
			arrGameTeamPrefix.push("E");
			var countMaxTeams = 3;
			var countMaxGameBorgs = 0;
			var arrGameBorgs = [];
			var arrGameBorgPrograms = [];
			var arrGameBorgTrailAim = [];
			var arrGameTeamHpPools = [];
			var arrGameTargetPathAim = [];
			var arrGameTargetPathMove = [];
			for(let i=0; i<countMaxTeams;i++){
				arrGameBorgs.push([]);
				arrGameTeamHpPools.push(0);
				arrGameTargetPathAim.push(null);
				arrGameTargetPathMove.push(null);
				arrGameBorgTrailAim.push([]);
			}
			arrGameBorgTrailAim.push([]);//extra for Max team count
			
			//Find game Borg detail based on return code
			//1 = Borg Class, 2 = Team Prefix, 3 = Team Index, 4 = Borg Index, 5 = GameBorgSymbol
			function FindBorgViaCoordinates(coordinates, returnCode = 1, ignoreDeadBorg = false, checkName = null){
				let occupantBorg = null;
				let forReturn = null;
				for(let team=1; team<arrGameBorgs.length;team++){
					for(let i=0; i<arrGameBorgs[team].length;i++){
						let isValid = arrGameBorgs[team][i].position.isEqual(coordinates)
							 && (checkName == null || (checkName != null && arrGameBorgs[team][i].name == checkName));
						if(isValid){
							occupantBorg = arrGameBorgs[team][i];
							
							forReturn = (returnCode == 5 && team == 1 ? occupantBorg.symbol 
										: (returnCode == 5 && team != 1 ? i 
										: (returnCode == 4 ? i 
										: (returnCode == 3 ? team 
										: (returnCode == 2 ? arrGameTeamPrefix[team] 
										: occupantBorg)))));

							if(occupantBorg.IsAlive()) return forReturn;
						}
					}
				}
				return ignoreDeadBorg ? null : forReturn;
			}

			//Functions for Game Log / UI
			$("#tglGameLog").click(function(){
				if ($('#divGameLogText').hasClass("is-active")) {
					$('#divGameLogText').removeClass("is-active");
					$('#divGameLogText').slideUp();
				}
				else {
					$('#divGameLogText').addClass("is-active");
					$('#divGameLogText').slideDown();
				}//*/
			});
			function GetBorgGameGridSymbol(sourceBorg){
				return sourceBorg == null ? "" 
					: FindBorgViaCoordinates(sourceBorg.position, 2, false, sourceBorg.name) + FindBorgViaCoordinates(sourceBorg.position, 5, false, sourceBorg.name);
			}
			const logTypeHealCell = "Healing Cell";
			function SetLogTextBorgHeader(borg){
				let borgSymbol = GetBorgGameGridSymbol(borg);
				let borgName = borg.isUnlocked == 1 ? borg.name : "???";
				let borgColor = FindBorgViaCoordinates(borg.position, 3) == 1 ? userDataTeamColorPlayer : userDataTeamColorEnemy;
				return "<span style=\"color: "+borgColor+"\">"+borgName+"("+borgSymbol+")</span> @["+borg.position.ToString()+"]";
			}
			function SetMidGameLog(logType, sourceBorg, target){
				let classFloat = "";//sourceTeam == 1 ? " float-right " : "float-left";
				let sourceBorgSymbol = GetBorgGameGridSymbol(sourceBorg);
				let sourceName = sourceBorg.isUnlocked == 1 ? sourceBorg.name : "???";
				let sourceColor = FindBorgViaCoordinates(sourceBorg.position, 3) == 1 ? userDataTeamColorPlayer : userDataTeamColorEnemy;
				let sourceTxt = SetLogTextBorgHeader(sourceBorg);//"<span style=\"color: "+sourceColor+"\">"+sourceName+"("+sourceBorgSymbol+")</span>@["+sourceBorg.position.ToString()+"]";
				let logTxt = "";
				if(logType == codeAtk){
					let targetBorgSymbol = GetBorgGameGridSymbol(target);
					let targetName = target.isUnlocked == 1 ? target.name : "???";
					let targetColor = FindBorgViaCoordinates(target.position, 3) == 1 ? userDataTeamColorPlayer : userDataTeamColorEnemy;
					let targetTxt = SetLogTextBorgHeader(target);//"<span style=\"color: "+targetColor+"\">"+targetName+"("+targetBorgSymbol+")</span>@["+target.position.ToString()+"]";
					logTxt = sourceTxt+" attacked "+targetTxt+" for <strong style=\"color: red;\">"+sourceBorg.damage+"</strong> damage. " 
				} 
				if(logType == logTypeHealCell){
					logTxt = sourceTxt+" regained <strong style=\"color: #00cc00;\">"+target+"</strong> durability. "; 
				};
				let returnHtml = "<div id=\"divGameLogEnd\"></div>"+
					"<div class=\"game-log "+classFloat+"\">"
						+" <strong class=\"\" style=\"display: inline;\">R"+gameRound+" T"+(gameTick+1)+":</strong> "+logTxt+
					"</div>";
				$("#divGameLogEnd")[0].outerHTML = returnHtml;
			}
			function SetGameBorgHp(sourceBorg){
				let cellVal = GetBorgGameGridSymbol(sourceBorg);
				let sourceBorgIndex = FindBorgViaCoordinates(sourceBorg.position, 4, false, sourceBorg.name);
				let sourceBorgTeam = FindBorgViaCoordinates(sourceBorg.position, 3);
				let divGameBorgsID = "#divGameBorgsHpT"+sourceBorgTeam+"B";//sourceBorgTeam == 1 ? "#divGameBorgsPlayer" : "#divGameBorgsEnemy";
				divGameBorgsID += +sourceBorgIndex;
				$(divGameBorgsID).html(cellVal+": "+sourceBorg.cur_hp); 
				let hpPercentage = sourceBorg.GetHpPercentage();
				for (let i = 0; i < 10; i++) {
					let percentDisplay = (i+1)*10;
					if(hpPercentage >= percentDisplay) $(divGameBorgsID+"Bar"+i).addClass("bg-success");
					else $(divGameBorgsID+"Bar"+i).removeClass("bg-success");
				}
				ConLog("SetGameBorgHp, Borg["+sourceBorgTeam+"]["+sourceBorgIndex+"]"+sourceBorg.name+"@"+sourceBorg.position.ToString()+" DUR: "+sourceBorg.cur_hp);
			}

			function IsGameGridCellPassable (x, y, exemptBorgCoord = null, acceptNonPassableNonOpaque = false){ 
				//Game Cell Must be within bounds
				let isTargetCellLevelBorder = x < 0 || y < 0 || x >= gameGrid.maxCoordinates.x || y >= gameGrid.maxCoordinates.y;
				if(isTargetCellLevelBorder) return false;
				
				//Game Cell Type must be set to Passable
				let targetCell = FindCellType(gameGrid.cell2d[x][y]); 
				//if((x == 4 || x == 5 || x == 6) && y == 8) ConLog("targetCell: "+targetCell+" in gameGrid.cell2d["+x+"]["+y+"] = "+gameGrid.cell2d[x][y]);
				if(!targetCell.isPassable){
					if(!(acceptNonPassableNonOpaque && !targetCell.isOpaque)) return false;
				} 

				//Cell must be empty or borg occupant is excempt
				let isExempted = (exemptBorgCoord != null && exemptBorgCoord.isEqualInt(x,y)) || acceptNonPassableNonOpaque; 
				//if(exemptBorgCoord != null) if((x == 4 || x == 5 || x == 6) && y == 8) ConLog("IsGameGridCellPassable, isExempted("+isExempted+"): "+x+","+y+" = "+exemptBorgCoord.ToString());
				if(isExempted){
					return isExempted;
				}else{
					let borgOccupant = FindBorgViaCoordinates(new Coordinate(x, y));
					return (isExempted || borgOccupant == null || (borgOccupant != null && !borgOccupant.IsAlive()));
				}
			}

			//constructor function to create all the grid points as objects containind the data for the points
			class GridData extends Coordinate {
				constructor(x, y) {
					super(x, y); //xy location of the grid point
					this.neighbors = []; // neighbors of the current grid point
					this.ResetSelf();
				}
				ResetSelf(){
					this.f = 0; //total cost function
					this.g = 0; //cost function from start to the current grid point
					this.h = 0; //Heuristic estimated cost function from current grid point to the goal
					this.parent = undefined; // immediate source of the current grid point
				}

				// update neighbors array for a given grid point
				UpdateNeighbors(exemptBorgCoord = null, acceptNonPassableNonOpaque = false) { 
					this.neighbors = []; // neighbors of the current grid point
					let i = this.x;
					let j = this.y;
					//if((i == 4 || i == 5 || i == 6) && j == 8) ConLog("UpdateNeighbors of ["+this.x+", "+this.y+"] (exemptBorgCoord "+exemptBorgCoord+", acceptNonPassableNonOpaque "+acceptNonPassableNonOpaque+")")
					if(true){//IsGameGridCellPassable(i,j)//if this Cell is not passable then it has no neighbors
						let maxX = gameGrid.maxCoordinates.x - 1;
						let maxY = gameGrid.maxCoordinates.y - 1;
						//if(exemptBorgCoord != null) ConLog("UpdateNeighbors of ["+this.x+", "+this.y+"], exemptBorgCoord: "+exemptBorgCoord.ToString());
						if (i < maxX && IsGameGridCellPassable(i+1, j, exemptBorgCoord, acceptNonPassableNonOpaque)) 
							this.neighbors.push(gameGridData[i + 1][j]);
						if (i > 0 && IsGameGridCellPassable(i-1, j, exemptBorgCoord, acceptNonPassableNonOpaque)) 
							this.neighbors.push(gameGridData[i - 1][j]);
						if (j < maxY && IsGameGridCellPassable(i, j+1, exemptBorgCoord, acceptNonPassableNonOpaque)) 
							this.neighbors.push(gameGridData[i][j + 1]);
						if (j > 0 && IsGameGridCellPassable(i, j-1, exemptBorgCoord, acceptNonPassableNonOpaque)) 
							this.neighbors.push(gameGridData[i][j - 1]);
						/*
						if(i == 4 && j == 8){ConLog("[4,8] neighbors: "); ConLog(this.neighbors);} 
						if(i == 5 && j == 8){ConLog("[5,8] neighbors: "); ConLog(this.neighbors);} 
						if(i == 6 && j == 8){ConLog("[5,8] neighbors: "); ConLog(this.neighbors);} 
						//*/
					}
				};
			}
			function ResetGameGridParams(){
				for(let y=0; y<gameGrid.maxCoordinates.y; y++)
					for(let x=0; x<gameGrid.maxCoordinates.x; x++)
						gameGridData[x][y].ResetSelf();
			}
			function UpdateGameGridNeighbors(acceptNonPassableNonOpaque = false){
				for(let y=0; y<gameGrid.maxCoordinates.y; y++)
					for(let x=0; x<gameGrid.maxCoordinates.x; x++)
						gameGridData[x][y].UpdateNeighbors(null, acceptNonPassableNonOpaque);
			}
			function UpdateSurroundingNeighbors(sourceCoords, isSourceExempt = false, acceptNonPassableNonOpaque = false){ //ConLog("UpdateSurroundingNeighbors: "); ConLog(sourceCoords);
				let sX = sourceCoords.x;
				let sY = sourceCoords.y;
				let minX = Math.max(sX-1, 0);
				let minY = Math.max(sY-1, 0);
				let maxX = Math.min(sX+1, gameGrid.maxCoordinates.x-1);
				let maxY = Math.min(sY+1, gameGrid.maxCoordinates.y-1);
				for(let y=minY; y<=maxY; y++){
					for(let x=minX; x<=maxX; x++){
						let exemptBorgCoord = isSourceExempt //&& sourceCoords.isEqualInt(x,y) 
												? sourceCoords : null;
						gameGridData[x][y].UpdateNeighbors(exemptBorgCoord, acceptNonPassableNonOpaque);
					}
				}
			}
			function UpdateGameBorgsSurroundingNeighbors(targetCoords = null){ //ConLog("----UpdateGameBorgsSurroundingNeighbors"); //ConLog(gameGridData[bPos.x][bPos.y]);
				for(let team=1; team<arrGameBorgs.length;team++){
					for(let i=0; i<arrGameBorgs[team].length;i++){
						let bPos = arrGameBorgs[team][i].position;
						UpdateSurroundingNeighbors(bPos);
					}
				}
			}



			

			function FindFarthestNeighbor(sPos, tPos) {//ConLog("FindFarthestNeighbor START: "+sPos.ToString()+" to "+tPos.ToString()); 
			//1,0	0,1
				let maxX = gameGrid.maxCoordinates.x - 1;
				let maxY = gameGrid.maxCoordinates.y - 1;
				let sX = Number(sPos.x);
				let sY = Number(sPos.y);
				let modX = sX - tPos.x;
				let modY = sY - tPos.y;
				let dirE = (modY == 0) ? ((modX > 0) ? 0 : 4) 
							: (((modX/2) >= sX) || (modX > 0) ? 1 : 2);//East
				let dirW = (modY == 0) ? ((modX > 0) ? 4 : 0) 
							: (((modX/2) >= sX) || (modX > 0) ? 2 : 1);//West
				let dirN = (modX == 0) ? ((modY > 0) ? 0 : 4) 
							: (((modY/2) >= sY) || (modY > 0) ? 1 : 2);//North
				let dirS = (modX == 0) ? ((modY > 0) ? 4 : 0) 
							: (((modY/2) >= sY) || (modY > 0) ? 2 : 1);//South
				/*if(sX == 1 && sY == 0){
					ConLog("modX["+modX+"], modY["+modY+"]");
					ConLog("dirE["+dirE+"], dirW["+dirW+"], dirN["+dirN+"], dirS["+dirS+"]");
				}//*/
				for (let d = 0; d < 3; d++) {
					//if(exemptBorgCoord != null) ConLog("UpdateNeighbors of ["+this.x+", "+this.y+"], exemptBorgCoord: "+exemptBorgCoord.ToString());
					//East
					let tempX = sX+1; //ConLog("FindFarthestNeighbor mod("+modX+">=0) x+1: "+tempX+","+sY); 
					if (tempX <= maxX && dirE == d && IsGameGridCellPassable(tempX, sY)) return new Coordinate(tempX, sY);
					//West
					tempX = sX-1; //ConLog("FindFarthestNeighbor mod("+modX+"<=0) x-1: "+tempX+","+sY); 
					if (tempX >= 0 && dirW == d && IsGameGridCellPassable(tempX, sY)) return new Coordinate(tempX, sY);
					//North
					let tempY = sY+1; //ConLog("FindFarthestNeighbor mod("+modY+">=0) y+1: "+sX+","+tempY); 
					if (tempY <= maxY && dirN == d && IsGameGridCellPassable(sX, tempY)) return new Coordinate(sX, tempY);
					//South
					tempY = sY-1; //ConLog("FindFarthestNeighbor mod("+modY+"<=0) y-1: "+sX+","+tempY);
					if (tempY >= 0 && dirS == d && IsGameGridCellPassable(sX, tempY)) return new Coordinate(sX, tempY);
				}
				return null;
			}
			function FindFarthestCoord(target) {//, awayFrom = null
				let borderX = Number(gameGrid.maxCoordinates.x);
				let borderY = Number(gameGrid.maxCoordinates.y);
				let minX = 0;
				let minY = 0;
				let maxX = borderX - 1;
				let maxY = borderY - 1;
				let x = target.x;
				let y = target.y;
				let midX = Math.floor(maxX / 2);
				let midY = Math.floor(maxY / 2);
				let invertX = x <= midX;
				let invertY = y <= midY;
				let maxXY = maxX + maxY;
				for(let diag = minX ; diag <= maxXY; diag++) {
					for(let j = minY ; j <= diag ; j++) {
						let i = diag - j;
						if( i < borderX && j < borderY) {//ConLog("borderX: "+borderX+", borderY: "+borderY);
							let iTemp = invertX ? (maxX - i) : i;
							let jTemp = invertY ? (maxY - j) : j;
							if(IsGameGridCellPassable(iTemp, jTemp)) return new Coordinate(iTemp, jTemp);
							//else ConLog("BLOCKED");
						}
					}
				}
				return null;
			}
			//Helper functions for Linear Interpolation(Lerp)
			function Lerp(start, end, t) {
				return start * (1.0 - t) + t * end;
			}
			function GetLerpCoord(p0, p1, t) {
				return new Coordinate(Lerp(p0.x, p1.x, t), Lerp(p0.y, p1.y, t));
			}
			function GetGameGridFromCoord(coord){
				return gameGridData[coord.x][coord.y];
			}
			function GetAimGridPath(p0, p1, maxSteps, isInGame = true) {
				let points = [];
				for (let step = 1; step <= maxSteps; step++) {
					let t = maxSteps === 0 ? 0.0 : step / maxSteps;
					let lerpCoord = GetLerpCoord(p0, p1, t).Round();
					let toPush = isInGame ? GetGameGridFromCoord(lerpCoord) : lerpCoord;
					points.push(toPush);
				}
				return points;
			}
			function GetDiagonalDistance(position0, position1) {
				let distanceX = Math.abs(position1.x - position0.x);
				let distanceY = Math.abs(position1.y - position0.y);
				//ConLog("Math.max("+distanceX+", "+distanceY+")")
				return Math.max(distanceX, distanceY);
			}
			function FindPathAim(source, target, range = null) {
				let max = GetDiagonalDistance(source, target); //ConLog("[FindPathAim] source("+source.ToString()+") to target("+target.ToString()+").  max("+max+"), range("+range+")");
				let ignoreRange = range == null;
				if(!ignoreRange && max > range) return "Out of Range: max("+max+") > range("+range+"))";
				let arrAim = GetAimGridPath(source, target, max);
				//ConLog("LERP Line: ");
				for(let i=0; i<arrAim.length;i++){
					let targetCell = FindCellType(gameGrid.cell2d[arrAim[i].x][arrAim[i].y]);
					//let txt = arrAim[i].x + ", " + arrAim[i].y + " : " + targetCell.name; ConLog(txt);
					if(!ignoreRange && targetCell.isOpaque) return "Aim path is blocked";
				}
				return arrAim;
			}
			//Heuristic we will be using - Manhattan distance
			//for other Heuristics visit - https://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html
			function Heuristic(position0, position1) {
				let distanceX = Math.abs(position1.x - position0.x);
				let distanceY = Math.abs(position1.y - position0.y);

				return distanceX + distanceY;
			}
			//A* Path Finding
			function FindPathMove(coordStart, coordTarget){
				ResetGameGridParams();
				var start = Date.now();
				let startMili = Date.now() - start; //ConLog("A* START: "+startMili);
				//ConLog("[FindPathMove] coordStart: ("+coordStart.ToString()+"), coordTarget: ("+coordTarget.ToString()+")");

				let openSet = []; //array containing unevaluated grid points
				let closedSet = []; //array containing completely evaluated grid points
				let path = []; //

				let startX = coordStart.x;
				let startY = coordStart.y;
				let targetX = coordTarget.x;
				let targetY = coordTarget.y;
				
				//Starting Grid: Push starting GridData into the Open Set
				openSet.push(gameGridData[startX][startY]);
				//Ending Grid: Set the target Cell's GridData
				let pathEndPoint = gameGridData[targetX][targetY];
				
				while (openSet.length > 0) {
					//assumption lowest index is the first one to begin with
					let lowestIndex = 0;
					for (let i = 0; i < openSet.length; i++) {
						if (openSet[i].f < openSet[lowestIndex].f) {
							lowestIndex = i;
						}
					}
					let current = openSet[lowestIndex]; //ConLog("A* current: "); ConLog(current);

					if (current === pathEndPoint) { //ConLog("A* ENDING: ");
						let temp = current;
						path.push(temp);
						while (temp.parent) {
							path.push(temp.parent);
							temp = temp.parent;
						}
						let delta = Date.now() - start; //ConLog("A* DONE: "+delta);
						path.pop();//ConLog(path);
						//path.shift();
						//return the traced path
						return path.reverse();
					}
					//remove current from openSet
					openSet.splice(lowestIndex, 1);
					//add current to closedSet
					closedSet.push(current);
					let neighbors = current.neighbors;
					/*
					if(current.x == 11 && current.y == 0){ConLog("[11,0] neighbors: "); ConLog(neighbors);} 
					if(current.x == 10 && current.y == 0){ConLog("[10,0] neighbors: "); ConLog(neighbors);} 
					//*/
					for (let i = 0; i < neighbors.length; i++) {
						let neighbor = neighbors[i];
						if (!closedSet.includes(neighbor)) {
							let possibleG = current.g + 1;
							if (!openSet.includes(neighbor)) {
								openSet.push(neighbor);
							} else if (possibleG >= neighbor.g) {
								continue;
							}
							neighbor.g = possibleG;
							neighbor.h = Heuristic(neighbor, pathEndPoint);
							neighbor.f = neighbor.g + neighbor.h;
							neighbor.parent = current;
						}
					}
				}
				//no solution by default
				return null;//[];
			}
			//*/
			function EvaluateRelationalOperator(left, comparator, right){
				if(left == null || right == null) return false;
				left = Number(left);
				right = Number(right);
				//ConLog("EvaluateRelationalOperator: " + left + " " + comparator + " " + right);
				if(comparator == "<") return left < right;
				else if(comparator == "<=") return left <= right;
				else if(comparator == "==") return left == right;
				else if(comparator == ">=") return left >= right;
				else if(comparator == ">") return left > right;
				else if(comparator == "!=") return left != right;
			}
			//*/
			function FindPathMoveFinal(code, sourceBorg, targetCoords){
				UpdateGameGridNeighbors(); 
				UpdateSurroundingNeighbors(targetCoords, true);//
				let path = FindPathMove(sourceBorg.position, targetCoords); //ConLog("path("+code+", "+sourceBorg.position.ToString()+", "+targetCoords.ToString()+"): ");ConLog(path);
				//Consider Non-Passable Non-Opaque path for Ranged Units
				if(path == null && (code == codeMoveTo || code == codeMoveAway) && sourceBorg.range > 1){ //ConLog("Consider Non-Passable Non-Opaque path for Ranged Units");
					//If no direct movable path found, then find path to nearest impassable cell
					UpdateGameGridNeighbors(true);
					UpdateSurroundingNeighbors(targetCoords, true, true);
					path = FindPathMove(sourceBorg.position, targetCoords); //ConLog("path v2: ");ConLog(path);
				}
				return path;
			}
			function FindPathPhase(phase, code, sourceBorg, targetBorg){//ConLog("FindPathPhase, code: "+code);
				let overrideAim = code == codeWinRng || code == codeAtk; //ConLog("FindNearestBorgPath, overrideAim: "+overrideAim); 
				let tempRange = overrideAim ? sourceBorg.range : null ;
				//ConLog("sourceCoords: "+sourceBorg.position.ToString()); ConLog("targetCoords: "+targetBorg.position.ToString()); ConLog("sourceRange: "+sourceRange);
				//UpdateSurroundingNeighbors(targetBorg.position, phase == codePhaseMov);
				return (phase == codePhaseMov ? FindPathMoveFinal(code, sourceBorg, targetBorg.position) //FindPathMove(sourceBorg.position, targetBorg.position) //
						: (phase == codePhaseAct ? FindPathAim(sourceBorg.position, targetBorg.position, tempRange)
						: null));
			}
			function FindNearestHealingCell(sourceBorg){ //ConLog("FindNearestHealingCell["+sourceBorg.position.x+","+sourceBorg.position.y+"]: SOURCE");
				let maxX = gameGrid.maxCoordinates.x - 1;
				let maxY = gameGrid.maxCoordinates.y - 1;
				let arrNearHeals = [];
				for(let y=0; y<gameGrid.maxCoordinates.y; y++){
					for(let x=0; x<gameGrid.maxCoordinates.x; x++){
						let tempCell = FindCellType(gameGrid.cell2d[x][y]);
						if(Number(tempCell.healPercent) > 0){
							arrNearHeals.push(new Coordinate(x,y));//ConLog("FindNearestHealingCell["+x+","+y+"]: HEALING");
						}
					}
				}
				//ConLog("arrNearHeals.length: "+arrNearHeals.length);
				if(arrNearHeals.length > 0){ //ConLog("arrNearHeals: ");ConLog(arrNearHeals);
					let nearestPath = null;//FindPathMove(sourceBorg.position, arrNearHeals[0]);//ConLog(nearestPath);
					let distance = Number.MAX_SAFE_INTEGER;//Array.isArray(nearestPath) ? nearestPath.length : null;
					for(let i=0; i<arrNearHeals.length;i++){
						let tempNearestPath = FindPathMoveFinal(null, sourceBorg, arrNearHeals[i]);//FindPathMove(sourceBorg.position, arrNearHeals[i]);
						if(tempNearestPath != null){// || i == 0
							let tempDistance = tempNearestPath.length; //ConLog("arrNearHeals distance: "+distance+" > "+tempDistance);
							if(distance > tempDistance){
								//nearestBorg = arrNearHeals[i];
								nearestPath = tempNearestPath;
								distance = tempDistance;
							}
						}
					}
					return nearestPath;
				}
				return null;
			}
			function FindNearestBorgPath (pathType, sourceBorg, targetTeam, code){//Team 1 = Player Team, 2 = Enemy Team
				let arrTargetBorgs = arrGameBorgs[targetTeam];
				if(arrTargetBorgs != null){ //ConLog("FindNearestBorgPath, arrGameBorgs["+targetTeam+"]: "); ConLog(arrTargetBorgs);
					let nearestBorg = null;
					let nearestPath = null;
					let distance = Number.MAX_SAFE_INTEGER;//Array.isArray(nearestPath) ? nearestPath.length : null; ConLog(""+nearestBorg.position.ToString()+", distance: " + distance);
					let nearestBorgPos = "";
					if(arrTargetBorgs.length >= 1){
						for(let i=0; i<arrTargetBorgs.length;i++){ //ConLog("FindNearestBorgPath, sourceBorg("+sourceBorg.position.ToString()+") to arrTargetBorgs["+i+"]("+arrTargetBorgs[i].position.ToString()+")"); //ConLog(sourceBorg); ConLog(arrTargetBorgs[i]);
							let tempNearestPath = FindPathPhase(pathType, code, sourceBorg, arrTargetBorgs[i]); //ConLog("tempNearestPath, "+arrTargetBorgs[i].position.ToString()+": "); ConLog(tempNearestPath);	
							if(tempNearestPath != null){// || i == 0
								let tempDistance = tempNearestPath.length; //ConLog(""+arrTargetBorgs[i].position.ToString()+", tempDistance: " + tempDistance);
								if(arrTargetBorgs[i].IsAlive() && distance > tempDistance){
									nearestBorg = arrTargetBorgs[i];
									nearestPath = tempNearestPath;
									distance = tempDistance;
									nearestBorgPos = nearestBorg.position.ToString();
								}
							}
						}
					}//ConLog("FINAL nearestPath(distance="+distance+"), "+nearestBorgPos+": "); ConLog(nearestPath);
					return nearestPath;
				}
				ConLog("ERR, FindNearestBorgPath: No Target Borg");
				return null;
			}
			function FindBorgPath(pathType, sourceBorg, targetTeam, code, targetingType){//Team 1 = Player Team, 2 = Enemy Team
				let arrTargetBorgs = arrGameBorgs[targetTeam];
				if(arrTargetBorgs != null){ 
					//let targetBorg = null;
					let finalPath = null;
					let threshold = targetingType == codeTargetNearest ? Number.MAX_SAFE_INTEGER : 0; //Array.isArray(finalPath) ? finalPath.length : null; ConLog(""+targetBorg.position.ToString()+", threshold: " + threshold);
					//let targetBorgPos = "";
					//ConLog("FindBorgPath, arrGameBorgs["+targetTeam+"] (threshold="+threshold+"): "); ConLog(arrTargetBorgs);
					if(arrTargetBorgs.length >= 1){
						let tempDistance = Number.MAX_SAFE_INTEGER;
						for(let i=0; i<arrTargetBorgs.length;i++){ 
							let targetBorg = arrTargetBorgs[i]; //ConLog("FindBorgPath, sourceBorg("+sourceBorg.position.ToString()+") to arrTargetBorgs["+i+"]("+targetBorg.position.ToString()+")"); //ConLog(sourceBorg); ConLog(targetBorg);
							if(targetBorg.IsAlive()){
								let isValidBorg = false;
								let tempNearestPath = null;
								let tempThreshold = null;
								
								let isTargetingDistance = targetingType == codeTargetNearest || targetingType == codeTargetFarthest;
								if(!isTargetingDistance){
									tempThreshold = 
												(targetingType == codeTargetHpPercLowest 	|| targetingType == codeTargetHpPercHighest ? targetBorg.GetHpPercentage() 
												: (targetingType == codeTargetHpFlatLowest 	|| targetingType == codeTargetHpFlatHighest ? targetBorg.cur_hp  
												: (targetingType == codeTargetDurLowest 	|| targetingType == codeTargetDurHighest 	? targetBorg.pts_hp  
												: (targetingType == codeTargetSpdLowest 	|| targetingType == codeTargetSpdHighest 	? targetBorg.pts_speed  
												: (targetingType == codeTargetDmgLowest 	|| targetingType == codeTargetDmgHighest 	? targetBorg.pts_damage  
												: (targetingType == codeTargetRngLowest 	|| targetingType == codeTargetRngHighest 	? targetBorg.pts_range  
												: (targetingType == codeTargetCldLowest 	|| targetingType == codeTargetCldHighest 	? targetBorg.pts_cooldown  
												: false)))))));
									isValidBorg = (targetingType == codeTargetHpPercLowest 
												|| targetingType == codeTargetHpFlatLowest 
												|| targetingType == codeTargetDurLowest 
												|| targetingType == codeTargetSpdLowest 
												|| targetingType == codeTargetDmgLowest 
												|| targetingType == codeTargetRngLowest 
												|| targetingType == codeTargetCldLowest 	
													? threshold > tempThreshold 
												: (targetingType == codeTargetHpPercHighest 
												|| targetingType == codeTargetHpFlatHighest 
												|| targetingType == codeTargetDurHighest 
												|| targetingType == codeTargetSpdHighest 
												|| targetingType == codeTargetDmgHighest 
												|| targetingType == codeTargetRngHighest 
												|| targetingType == codeTargetCldHighest 	
													? threshold < tempThreshold 
												: false));
								}//ConLog("FindBorgPath, "+targetBorg.position.ToString()+", "+isValidBorg+", tempThreshold: " + tempThreshold);

								//If targeting type is by distance or if current threshold is equal to final, then compare distances
								if(isTargetingDistance || (!isTargetingDistance && threshold == tempThreshold)){
									tempNearestPath = FindPathPhase(pathType, code, sourceBorg, targetBorg); //ConLog("tempNearestPath, "+targetBorg.position.ToString()+": "); ConLog(tempNearestPath);	
									if(tempNearestPath != null){// || i == 0
										tempThreshold = isTargetingDistance ? tempNearestPath.length : tempThreshold; 
										isValidBorg = (isTargetingDistance 
														? 	(targetingType == codeTargetNearest ? threshold > tempThreshold 
															: (targetingType == codeTargetFarthest ? threshold < tempThreshold 
															: false))
														: tempDistance > tempNearestPath.length);
									}
								} 

								if(isValidBorg || i == 0){
									tempNearestPath ??= FindPathPhase(pathType, code, sourceBorg, targetBorg);
									tempDistance = tempNearestPath != null ? tempNearestPath.length : tempDistance;
									finalPath = tempNearestPath;
									threshold = tempThreshold;
									//targetBorgPos = targetBorg.position.ToString();
									//ConLog("FindBorgPath, Borg@["+targetBorg.position.ToString()+"] is Valid, threshold: " + threshold); 
									//ConLog("FindBorgPath, Borg@["+targetBorg.position.ToString()+"] is Valid, finalPath: "); ConLog(finalPath);
								}
							}
						}
					}//ConLog("FINAL finalPath(threshold="+threshold+"), "+targetBorgPos+": "); ConLog(finalPath);
					return finalPath;
				}
				ConLog("ERR, FindNearestBorgPath: No Target Borg");
				return null;
			}
			function SetTarget(arrTargetParams, sourceBorg){ //ConLog("SetTarget, sourceBorg("+sourceBorg.name+"), arrTargetParams: "+arrTargetParams); //ConLog(arrTargetParams);
				let code = arrTargetParams[0];
				let arrParams = arrTargetParams[1];
				let targetingType = Array.isArray(arrParams) ? arrParams[0] : arrParams; //ConLog("SetTarget, targetingType: "+targetingType); 
				let targetTeam = Array.isArray(arrParams) ? arrParams[1] : arrParams; //ConLog("SetTarget, "+sourceBorg.position.ToString()+" to targetTeam: "+targetTeam); 
				if(targetTeam == "Self"){ return [sourceBorg.position]; }

				let pathType = code == codeCellNum || code == codeMoveTo || code == codeMoveAway 
								? codePhaseMov : codePhaseAct;
				let targetPath = (pathType == codePhaseMov ? arrGameTargetPathMove[targetTeam] 
								: (pathType == codePhaseAct ? arrGameTargetPathAim[targetTeam] 
								: null));
				if(!Array.isArray(targetPath)){
					targetPath = FindBorgPath(pathType, sourceBorg, targetTeam, code, targetingType);// ConLog("SetTarget, targetPath: "); ConLog(targetPath);
					//targetPath = Array.isArray(targetPath) ? targetPath : null;
					if(pathType == codePhaseMov) arrGameTargetPathMove[targetTeam] = targetPath;
					else if(pathType == codePhaseAct) arrGameTargetPathAim[targetTeam] = targetPath;
				}
				return targetPath != null && targetPath.length > 0 ? targetPath : null;
			}
			function EvaluateConditions(phase, arrConditions, sourceBorg){ //ConLog("EvaluateConditions, "+phase+": "); ConLog(arrConditions);
				let prevBool;
				let isShortCircuit = false;
				let prevComparator = null;
				let isPrevFalseAnd = null;
				let arrCurrent = [];
				let arrEvaluated = [];
				
				for(let i=0; i<arrConditions.length;i++){
					let code;
					if(Array.isArray(arrConditions[i])){
						let arrComparison = arrConditions[i];
						code = arrComparison[0];//ConLog("code: "+code);
						let numParams = GetNumParams(code);//ConLog("arrComparison("+numParams+" params)");
						if(numParams > 0){
							let arrParams = arrComparison[1];
							let targetingType = arrParams[0];//
							let targetTeam = arrParams[1];//Array.isArray(arrParams) ? arrParams[0] : arrParams;//ConLog("targetTeam: "+targetTeam);
							let comparator = arrParams[2];//ConLog("comparator: "+comparator);
							let left = null;
							let right = null;
							ConLog("EvaluateRelationalOperator PRE: "+arrComparison); //ConLog(arrComparison); //ConLog(arrEvaluated);
							let targetPath = SetTarget(arrComparison, sourceBorg); //ConLog("targetPath: "); ConLog(targetPath);
							if(code == codeWinRng || code == codeCellNum) {
								right = code == codeWinRng ? sourceBorg.range : arrParams[3];
								let valLeftOverRight = right + 1;
								let targetDistance = (Array.isArray(targetPath) ? targetPath.length 
													: (targetPath != null ? valLeftOverRight //If return text 
													: null));
								/*
								if(Array.isArray(targetPath)) {ConLog("left = targetDistance(targetPath.length): "); ConLog(targetPath);}
								else if(targetPath != null) {ConLog("left = targetDistance(sourceBorg.range+1): "+(valLeftOverRight)); ConLog(targetPath);}
								//*/
								left = targetDistance; 
								//right = code == codeWinRng ? sourceBorg.range : arrParams[3];
							} else if (code == codeHpPct) {
								let sourceTeam = FindBorgViaCoordinates(sourceBorg.position, 3); //ConLog("sourceTeam: "+sourceTeam);
								let targetBorg = (targetTeam == sourceTeam ? sourceBorg 
												: (Array.isArray(targetPath) ? FindBorgViaCoordinates(targetPath[targetPath.length-1]) 
												: null));
								left = targetBorg.GetHpPercentage();
								right = arrParams[3];//Percent
							}
							let currBool = EvaluateRelationalOperator(left, comparator, right);
							ConLog("EvaluateRelationalOperator POST "+code+": "+currBool+" = " + left + " " + comparator + " " + right);
							if(prevComparator == codeCondAnd){
								currBool = prevBool && currBool;
								prevComparator = null;
								//ConLog("EvaluateRelationalOperator AND: "+currBool+" = " + prevBool + " && " + currBool);
							}
							prevBool = currBool; //ConLog("prevBool: "+prevBool);
						}
					}else{
						code = arrConditions[i];
						if(code == codeCondAnd || code == codeCondOr) {
							prevComparator = code;
							if(code == codeCondAnd) {
								if(!prevBool) {
									isPrevFalseAnd = true;
									i++;
								}
							} else{
								arrEvaluated.push(prevBool);
								arrEvaluated.push(code);
							}
						}
					}
				}
				arrEvaluated.push(prevBool); //ConLog("arrEvaluated: "); ConLog(arrEvaluated);
				let evaluation = null;
				for(let i=0; i<arrEvaluated.length;i++){
					let code = arrEvaluated[i];
					//Assuming all that's left is OR
					if(code) return code;
				}
				return false;
			}
			var phaseDone = false;
			function RunProgramPhase(phase, arrProgCodes, sourceBorgIndex, sourceTeam, index = 0){//, targetBorg){
				let sourceBorg = arrGameBorgs[sourceTeam][sourceBorgIndex];
				//ConLog("[RunProgramPhase] Borg["+sourceTeam+"]["+sourceBorgIndex+"]: "+sourceBorg.name+" progcode(i="+index+"): "+arrProgCodes[index]); if(Array.isArray(arrProgCodes[index])) ConLog(arrProgCodes[index]);
				//let arrFinal = [];
				for (let i = index; i < arrProgCodes.length; i++) {
					//ConLog("RunProgramPhase, arrProgCodes[i="+i+"]: "+arrProgCodes[i]); ConLog(arrProgCodes[i]);
					if(!phaseDone){
						let code = arrProgCodes[i];
						let codeBlockCheck = code;//arrProgCodes[index];
						//PreCheck Code Block
						//ConLog("[RunProgramPhase, PreCheck] (i="+index+"): "+arrProgCodes[index-1]);
						if(Array.isArray(code)){// && (arrProgCodes[index-1] == codeIfThen || arrProgCodes[index-1] == codeIfElse)
							RunProgramPhase(phase, code, sourceBorgIndex, sourceTeam);
						}else if(code == codeIfStart){ //If the code is IF then start to split the Program per section contained in the IF
							//ConLog("[RunProgramPhase, code == codeIfStart] (i="+index+"): "+code);
							i++;//Skip codeIfStart
							let arrConditions = [];
							while(arrProgCodes[i] != codeIfThen && i < arrProgCodes.length) {
								let currCode = arrProgCodes[i];
								arrConditions.push(currCode);
								i++;
							}
							//ConLog("EvaluateConditions Params: "); ConLog(arrConditions[0]); 
							let boolIf = EvaluateConditions(phase, arrConditions[0], sourceBorg); //ConLog("EvaluateConditions Results: "+boolIf);
							i++;//Skip codeIfThen
							while(arrProgCodes[i] != codeIfElse && i < arrProgCodes.length) {
								if(boolIf){
									let currCode = arrProgCodes[i];
									RunProgramPhase(phase, arrProgCodes, sourceBorgIndex, sourceTeam, i);
								}
								i++;
							}
							if(!boolIf){
								i++;//Skip codeIfElse
								while(arrProgCodes[i] != codeIfEnd && i < arrProgCodes.length) {
									let currCode = arrProgCodes[i];
									RunProgramPhase(phase, arrProgCodes, sourceBorgIndex, sourceTeam, i);
									i++;
								}
							}else{
								i = arrProgCodes.length+1;//End 
							}
						}else{//Execute inner Code Blocks
							//ConLog("Execute inner Code Blocks, code: "+code);//ConLog(code);
							let isClosingBlock = code == codeMoveTo || code == codeMoveAway || code == codeAtk;
							if(isClosingBlock){ 
								let targetPath = null;
								let targetBorg = null;
								let targetingType = arrProgCodes[++i];
								let targetType = arrProgCodes[++i];
								let targetTeam = Number.isInteger(Number(targetType)) ? targetType : null;
								if(targetTeam != null){
									targetPath = code == codeAtk ? arrGameTargetPathAim[targetTeam] : arrGameTargetPathMove[targetTeam];
									if(targetPath == null){
										let arrTargetParams = [code, [targetingType, targetTeam]]; //ConLog("(targetPath == null) arrTargetParams: "); ConLog(arrTargetParams);
										targetPath = SetTarget(arrTargetParams, sourceBorg);
									}
									//ConLog("codeMoveTo, targetPath: ");ConLog(targetPath);
									targetBorg = Array.isArray(targetPath) ? FindBorgViaCoordinates(targetPath[targetPath.length-1]) : null;
									//ConLog("codeMoveTo, targetBorg: ");ConLog(targetBorg);
								} else {
									//ConLog("targetType == H =======================================================");
									if(targetType == "H"){
										targetPath = FindNearestHealingCell(sourceBorg);
									}
									if(targetType == "Self"){
										targetPath = sourceBorg.position;
									}
								}//ConLog("targetPath: "); ConLog(targetPath);
								//ConLog("isClosingBlock, targetingType("+targetingType+"), targetType("+targetType+")");
								let sourceBorgPos = sourceBorg.position;
								if(code == codeMoveTo || code == codeMoveAway){
									// Code: Move to/away
									let targetCoords = null;
									if(code == codeMoveTo){
										// Code: Move to
										targetCoords = (targetBorg != null ? targetBorg.position 
													: (targetPath != null ? targetPath[targetPath.length-1] 
													: null));
										//ConLog("codeMoveTo, targetCoords: "+targetCoords.ToString());
									}else{
										//Code: Move away
										let tPos = targetBorg.position;
										let sPos = sourceBorgPos;
										//ConLog("FindFarthestNeighbor PRE, sPos: "+sPos.ToString()+". tPos: "+tPos.ToString());
										targetCoords = FindFarthestNeighbor(sPos, tPos);
										//ConLog("FindFarthestNeighbor: ");ConLog(targetCoords);
										//if(targetCoords == null) ConLog("FindFarthestNeighbor POST, sPos: "+sPos.ToString()+" <---> tPos: "+tPos.ToString()+" not found");
										//else ConLog("FindFarthestNeighbor POST found, sPos: "+sPos.ToString()+" to targetCoords: "+targetCoords.ToString());
										targetCoords ??= FindFarthestCoord(targetBorg.position);
									}
									if(targetCoords != null){
										//ConLog(code+": "+"sourceBorg.position: "+sourceBorg.position.ToString()+" to targetCoords: "+targetCoords.ToString());
										//ConLog("targetBorg: "+targetBorg.name+" in "+targetBorg.position.ToString());
										if(code == codeMoveAway){ //Update neighbors to ensure path considers all borgs in their current positions
											UpdateGameBorgsSurroundingNeighbors();
										}
										let path = FindPathMoveFinal(code, sourceBorg, targetCoords); //ConLog("path = FindPathMoveFinal: "); ConLog(path); 
										if(path != null){
											let tempMin = Math.min((sourceBorg.step-1), (path.length-1)); //ConLog(tempMin+" = Math.min("+(sourceBorg.step-1)+", "+(path.length-1)+")");
											let newPosition = path[tempMin]; 
											let isNewPositionPassable = false;
											do{//Game Cell Type must be set to Passable and have no occupant Borg, otherwise go 1 cell back
												let newPosCell = FindCellType(gameGrid.cell2d[newPosition.x][newPosition.y]); 
												let newPosCellOccupant = newPosCell.isPassable ? FindBorgViaCoordinates(new Coordinate(newPosition.x, newPosition.y), 1, true) : null;
												isNewPositionPassable = newPosCell.isPassable && newPosCellOccupant == null;
												if(!isNewPositionPassable) newPosition = path[tempMin--];
												//ConLog(tempMin+" >= 0 ("+(tempMin >= 0)+") && !isNewPositionPassable("+(!isNewPositionPassable)+")");
											}while(tempMin >= 0 && !isNewPositionPassable)
											//ConLog("newPosition, path["+tempMin+"]: "); ConLog(newPosition);
											if(isNewPositionPassable){
												//Set Source Borg's new position
												arrGameBorgs[sourceTeam][sourceBorgIndex].position = newPosition;
												ConLog("===["+code+" : "+targetingType+" TEAM"+targetType+"] sourceBorgPos: "+sourceBorgPos.ToString()+" to targetCoords: "+targetCoords.ToString()+" = newPosition: "+newPosition.ToString());

												//Check if occupying a Healing Cell
												let newPosCellType = FindCellType(gameGrid.cell2d[newPosition.x][newPosition.y]);
												if(Number(newPosCellType.healPercent) > 0){
													let sourceBorgHpHealed = sourceBorg.max_hp * (newPosCellType.healPercent / 100);
													ConLog(""+sourceBorg.name+" Healed = "+sourceBorgHpHealed);
													let origHp = sourceBorg.cur_hp;
													sourceBorg.cur_hp += sourceBorgHpHealed;
													sourceBorg.cur_hp = sourceBorg.cur_hp <= sourceBorg.max_hp ? sourceBorg.cur_hp : sourceBorg.max_hp;
													ConLog(""+sourceBorg.name+" current HP = "+sourceBorg.cur_hp);
													SetGameBorgHp(sourceBorg);
													gameGrid.cell2d[newPosition.x][newPosition.y] = 0;
													SetMidGameLog(logTypeHealCell, sourceBorg, (sourceBorg.cur_hp-origHp));
												}

												UpdateSurroundingNeighbors(sourceBorgPos);
												UpdateSurroundingNeighbors(newPosition);
												//ConLog("Final Game Borg List: "); ConLog(arrGameBorgs);
											}
											phaseDone = true;
										}else ConLog("ERR, RunProgramPhase: No Path Found to ["+targetCoords.ToString()+"]");
									}else ConLog("ERR, RunProgramPhase: No Target Found");
								}else if(code == codeAtk){
									if(targetBorg != null){
										// Code: Attack
										let atkPath = FindPathAim(sourceBorgPos, targetBorg.position, sourceBorg.range);
										let targetHpOrig = targetBorg.cur_hp;
										if(Array.isArray(atkPath)){
											//ConLog("test"+sourceTeam+": "+arrGameBorgTrailAim[sourceTeam]);
											arrGameBorgTrailAim[sourceTeam][sourceBorgIndex] = atkPath;
											targetBorg.cur_hp = targetBorg.cur_hp - sourceBorg.damage;
											targetBorg.cur_hp = Math.max(targetBorg.cur_hp, 0);
											phaseDone = true;
										}else ConLog("ERR, RunProgramPhase: "+atkPath);
										SetGameBorgHp(targetBorg);

										//Log the Attack
										ConLog("===["+code+"] sourceBorgPos: ["+sourceBorgPos.ToString()+"] Attacks ["+targetBorg.position.ToString()+"] = "+targetBorg.cur_hp+" = "+targetHpOrig+" - "+sourceBorg.damage);
										SetMidGameLog(codeAtk, sourceBorg, targetBorg);
									}
								}else ConLog("ERR, RunProgramPhase: Invalid Code["+code+"]");
								return i;
							}
						}
					}
				}
			}
			
			const gameGridDiv = "#levelMainView";
			function LoadGrid(grid, divID = "#gridPreview", level = null){ //ConLog("============================LoadGrid ("+grid.name+", "+divID+") START"); ConLog(grid.ExportCellsAsString());
				let cellHtml = "<div class=\"container\">";
				for(let y=grid.maxCoordinates.y-1; y>=0; y--){
					cellHtml += "<div class=\"row\">";
					for(let x=0; x<grid.maxCoordinates.x; x++){
						let cellData = grid.cell2d[x][y];
						let cellType = 	FindCellType(cellData);
						let cellBgColor = (cellType.background != null && cellType.background != "" ? cellType.background+"; " : "");
						let cellBorderColor = (cellType.border != null && cellType.border != "" ? cellType.border+"; " : "");
						let defaultCellVal = "";
						let fontSize = x >= 10 && y >= 10 ? ".5" 
									: (x >= 10 || y >= 10 ? ".75" 
									: "1");
						let cellValCoords = "<span style=\"font-size: "+fontSize+"em;\">"+x+","+y+"<span>";//
						if((loadGridDefaultCellValType == 1 && level == null)){//If Coords per Cell
							defaultCellVal = cellValCoords;
						}else if(loadGridDefaultCellValType == 2 && level == null){//If Cell Type ID per Cell
							let fontSize = cellType.dbid >= 100 ? ".5" 
										: (cellType.dbid >= 10 ? ".75" 
										: "1");
							defaultCellVal = "<span style=\"font-size: "+fontSize+"em;\">"+cellType.dbid+"<span>";//
						}
						
						let coordsPlayer = null; //grid.arrPlayerBorgPos[0];
						let coordsEnemy = null;
						if(level != null){
							//ConLog("grid.arrEnemyBorgPos.length: "+grid.arrEnemyBorgPos.length);
							for(let i=0; i<level.arrPlayerBorgPos.length; i++){
								coordsPlayer = level.arrPlayerBorgPos[i].isEqualInt(x,y) ? level.arrPlayerBorgPos[i] : coordsPlayer;
							}
							for(let i=0; i<level.arrEnemyBorgPos.length; i++){
								coordsEnemy = level.arrEnemyBorgPos[i].isEqualInt(x,y) ? level.arrEnemyBorgPos[i] : coordsEnemy;
							}
						}
						let cellVal = 	(coordsPlayer != null && coordsPlayer.isEqualInt(x, y) ? cellValCoords : // "?" : //
										(coordsEnemy != null && coordsEnemy.isEqualInt(x, y) ? "E" : defaultCellVal));
						
						//Bullet trace
						let borgOccupant = null;
						let cellValColor = "white";
						const valBullet = "&#149;";
						let bulletTraceTeam = 0;
						if(gameGridData != null && divID == gameGridDiv){// && grid == gameGridData
							//ConLog("gameGridData.name: "+gameGridData.name+", arrGameBorgTrailAim: ");ConLog(arrGameBorgTrailAim);
							for(let t=0; t<arrGameBorgTrailAim.length; t++){
								if(Array.isArray(arrGameBorgTrailAim[t])){
									for(let i=0; i<arrGameBorgTrailAim[t].length; i++){
										let trailAim = arrGameBorgTrailAim[t][i];
										if(Array.isArray(trailAim)){
											for(let j=0; j<trailAim.length; j++){
												if(trailAim[j].isEqualInt(x,y)){
													defaultCellVal = valBullet;
													bulletTraceTeam = bulletTraceTeam == 0 ? t : bulletTraceTeam;//Prioritize player bullets
												}
											}
										}
									}
								}
							}
							borgOccupant = FindBorgViaCoordinates(new Coordinate(x, y));
							cellVal = borgOccupant != null ? GetBorgGameGridSymbol(borgOccupant) : defaultCellVal;
							if(borgOccupant != null){
								let borgOccupantTeam = FindBorgViaCoordinates(borgOccupant.position, 3);
								cellBorderColor = borgOccupantTeam == 1 ? userDataTeamColorPlayer : userDataTeamColorEnemy;
								cellValColor = borgOccupant.cur_hp == 0 ? "rgba(255, 255, 255, 0.5)" : cellValColor;//If Borg Dead gray out text
							}
						}
						//cellData = cellData == "" ? "0" : cellData;
						let classDeadBorg = borgOccupant != null && !borgOccupant.IsAlive() ? " txt-fade-50 " : " ";
						let classGridFormCell = divID == "#gridFormPreview" ? " grid-form-cell " : " ";
						let dataTypeGridFormCell = divID == "#gridFormPreview" ? " data-x=\""+x+"\" data-y=\""+y+"\" data-type=\""+cellType.dbid+"\" " : " ";
						cellBgColor = cellBgColor == "" ? "" : "background-color: " + cellBgColor + ";";
						cellBorderColor = cellBorderColor == "" ? "" : "border-color: " + cellBorderColor + ";";
						cellValColor = cellVal == valBullet ? (bulletTraceTeam == 1 ? userDataTeamColorPlayer : userDataTeamColorEnemy) : cellValColor;
						let cellDiv = 
							"<div id=\"gridCellX"+x+"Y"+y+"\" class=\"grid-cell"+classGridFormCell+classDeadBorg+"text-center p-0\" style=\""+cellBgColor+cellBorderColor+"\""+dataTypeGridFormCell+">"
								+"<span style=\"color: "+cellValColor+";\">"
									+cellVal
								+"</span>"
							+"</div>";
						cellHtml += cellDiv;
					}
					cellHtml += "</div>";
				}
				cellHtml += "</div>";
				$(divID).html(cellHtml);

				//Reset Trails after display
				arrGameBorgTrailAim = [];
				for(let i=0; i<=countMaxTeams;i++){
					arrGameBorgTrailAim.push([]);
				}//*/
			}
			function LoadLevel(level, divID = gameGridDiv){ //ConLog("============================LoadLevel ("+level.name+", "+divID+") START"); //ConLog(level.ExportCellsAsString());
				let grid = gameGridData != null && divID == gameGridDiv ? gameGrid : FindInActionArray(actionGrid, level.gridName); //ConLog("grid("+(gameGridData != null && divID == gameGridDiv)+"): "); ConLog(grid);
				LoadGrid(grid, divID, level);
			}

			function GetTotalLength(obj, count = 0){//GetMultiDimArrLength
				if(Array.isArray(obj)){
					obj.forEach(o => {
						if(Array.isArray(o)){
							count = GetTotalLength(o, count);
						}else{
							count++;
						}
					});
					return count;
				}else{
					//ConLog("count object "+obj+": ");
					return obj != null ? 1 : 0;
				}
			}
			function SplitConditions(arrConditions, index = 0){
				let arrReturn = [];
				let arrRelational = [];
				let arrParameter = [];
				let noLogicalOperator = true;
				for(let i=index; i<arrConditions.length;i++){
					let code = arrConditions[i];//ConLog("SplitConditions, arrConditions["+i+"]: "+code);
					if(code == codeCondAnd || code == codeCondOr) {
						noLogicalOperator = false;
						arrRelational.push(arrParameter);
						arrReturn.push(arrRelational);
						arrReturn.push(code);
						arrRelational = [];
						arrParameter = [];
					}else{
						if(arrRelational.length == 0){
							arrRelational.push(code);
						}else{
							arrParameter.push(code);
						}
					}
				}/*
				if(noLogicalOperator){
					arrRelational.push(arrParameter);
					arrReturn = arrRelational;
				}else{
					arrRelational.push(arrParameter);
					arrReturn.push(arrRelational);
				}//*/
				arrRelational.push(arrParameter);
				arrReturn.push(arrRelational);
				return arrReturn;
			}
			function SplitCodeBlock(arrProgCodes, index, inverseTargets = false){
				for(let i=index; i<arrProgCodes.length;i++){
					let code = arrProgCodes[i]; //ConLog("code: "+code);
					//If the code is IF then start to split the Program per section contained in the IF
					if(code == codeIfStart){
						let arrIf = [];
						arrIf.push(code);
						i++;//Skip codeIfStart
						let tempArr = [];
						while(arrProgCodes[i] != codeIfThen && i < arrProgCodes.length) {
							let recursion = SplitCodeBlock(arrProgCodes, i, inverseTargets);
							tempArr.push(recursion);
							i = i+GetTotalLength(recursion);
						}
						let splitCond = SplitConditions(tempArr);
						arrIf.push(splitCond);//tempArr);//
						arrIf.push(arrProgCodes[i++]);//Skip codeIfThen
						tempArr = [];
						while(arrProgCodes[i] != codeIfElse && i < arrProgCodes.length) {
							let recursion = SplitCodeBlock(arrProgCodes, i, inverseTargets);
							tempArr.push(recursion);
							i = i+GetTotalLength(recursion);
						}
						if(tempArr.length > 0) {
							if(tempArr.length > 1) arrIf.push(tempArr);
							else arrIf.push(tempArr[0]);
						}
						arrIf.push(arrProgCodes[i++]);//Skip codeIfElse
						tempArr = [];
						while(arrProgCodes[i] != codeIfEnd && i < arrProgCodes.length) {
							let recursion = SplitCodeBlock(arrProgCodes, i, inverseTargets);
							tempArr.push(recursion);
							
							i = i+GetTotalLength(recursion);
						}
						if(tempArr.length > 0) {
							if(tempArr.length > 1) arrIf.push(tempArr);
							else arrIf.push(tempArr[0]);
						}
						arrIf.push(arrProgCodes[i]);
						return arrIf;
					}else{
						if(inverseTargets && Number.isInteger(Number(code))){ //ConLog("["+inverseTargets+"&&"+Number.isInteger(Number(code))+"]code1: "+code+"");
							code = (inverseTargets && code == 1 ? 2 
									: (inverseTargets && code == 2 ? 1 
									: code));
						}
						return code;
					}
				}
			}
			function SplitProgram(program, inverseTargets = false){ //ConLog("SplitProgram START, split \""+program.name+"\": "); ConLog("program.length: "+program.length); ConLog(program);
				let arrMov = [];
				let arrAct = [];
				let arrProgCodes = program.arrCodeBlocks; 
				let phase;
				for(let i=0; i<arrProgCodes.length;i++){
					let code = arrProgCodes[i].trim();
					if(code == codePhaseAct || code == codePhaseMov){
						phase = code;
					}else{
						let arrCurrent = (phase == codePhaseMov ? arrMov 
									: (phase == codePhaseAct ? arrAct : null));
						let codeBlockSplit = SplitCodeBlock(arrProgCodes, i, inverseTargets);
						arrCurrent.push(codeBlockSplit);
						i = i+GetTotalLength(codeBlockSplit)-1;
					}
				}
				let arrReturn = [];
				//ConLog("=======================================arrMov:"); ConLog(arrMov);
				//ConLog("=======================================arrAct:"); ConLog(arrAct);
				let returnMov = arrMov.length == 1 && Array.isArray(arrMov[0]) ? arrMov[0] : arrMov;
				let returnAct = arrAct.length == 1 && Array.isArray(arrAct[0]) ? arrAct[0] : arrAct;
				arrReturn.push(returnMov);
				arrReturn.push(returnAct);
				return arrReturn;
			}
			function UnlockClassObject(action, name){
				let forUnlock = FindInActionArray(action, name);
				if(forUnlock != null){
					if(forUnlock.isUnlocked == 0){
						if(action == actionLevel) ConLog("Level Unlocked: "+forUnlock.name);
						forUnlock.isUnlocked = 1;
						InsertArrayIntoStorage(action);
						AddToUserDataUnlocks(action, forUnlock.name);
						if(action == actionBorg) UnlockClassObject(actionProgram, forUnlock.program);
					}
					return forUnlock;
				}
				return null;
			}
			function EndGame(results){
				isGamePaused = true;
				let delta = gameInterval != null ? "Game Timer DONE: " + (Date.now() - gameTimerStart) : "Game has ended.";
				ConLog("Game Timer DONE: "+delta);
				clearInterval(gameInterval);
				//userDataPrefsTickInterval = null;
				gameRound = 0;
				gameTick = 0;
				gameGridData = null;
				$("#divPlayControls").hide();

				//Handle Unlocks
				//ConLog("EndGame, gameLevel: "); ConLog(gameLevel);
				let newUserMaxPoints = userDataMaxPoints <= gameGrid.maxPoints ? Number(gameGrid.maxPoints) : userDataMaxPoints;
				let isGameWon = results == "You Win!";
				if(isGameWon){// && gameLevel.createdBy == userDataName
					if(gameLevel.arrLevelUnlocks != null){
						for(let i=0; i<gameLevel.arrLevelUnlocks.length;i++){
							//ConLog("gameLevel.arrLevelUnlocks["+i+"]: "+gameLevel.arrLevelUnlocks[i]);
							let forUpdate = UnlockClassObject(actionLevel, gameLevel.arrLevelUnlocks[i]);
							//ConLog("forUpdate.maxPoints: "+forUpdate.maxPoints);
							if(forUpdate != null) newUserMaxPoints = forUpdate.maxPoints > newUserMaxPoints ? forUpdate.maxPoints : newUserMaxPoints;
							$("#playDataLevelProgress").html(CheckUserProgress());
						}
						
					}
					if(gameLevel.arrEnemyBorgNames != null){//false && 
						for(let i=0; i<gameLevel.arrEnemyBorgNames.length;i++){
							//ConLog("gameLevel.arrEnemyBorgNames["+i+"]: "+gameLevel.arrEnemyBorgNames[i]);
							UnlockClassObject(actionBorg, gameLevel.arrEnemyBorgNames[i]);
						}
					}
					AddToUserDataWonLevels(gameLevel.name);
				}
				if(userDataMaxPoints != newUserMaxPoints) ConLog("Updated Max Borg Points: "+newUserMaxPoints);
				userDataMaxPoints = newUserMaxPoints; //ConLog("userDataMaxPoints: "+userDataMaxPoints);
				//if(userDataMaxPoints <= 20) userDataMaxPoints++;
				UpdateUserData(false, true);
				
				//Quick Delay to let final Level loading be displayed
				setTimeout(function () {
					if(!isGameEnded){
						results = results == undefined ? "Manual Exit" : results ;
						alert(results);
						isGameEnded = true;
						//Display Level Selection after Game End
						$('#divSelectionLevels').addClass("is-active");
						$('#divSelectionLevels').slideDown();
						UpdateAllClassTables(actionLevel);
					}
				}, 50);
				
				$("#divSelectionPlay").slideDown();
				$("#divSelectionPlayInitialize").slideUp();
			}
			$("#btnGameEnd").click(function(){
				EndGame();
			});
			function GamePlayTick(override = false, divID = gameGridDiv){//ConLog("LoadLevel ("+levelName+", "+divID+") START");
				if(!isGamePaused || override){
					let isInitial = true;
					let coordsPlayer = gameLevel.arrPlayerBorgPos[0];
					let coordsEnemy = gameLevel.enemyStart;
					let cellHtml = "<div class=\"container\">";
					let hasPhaseBeenRun = false;

					//Run Game Phases
					let maxPhases = 2; //2 //0=Movement, 1=Actions
					for(let p=0; p<maxPhases; p++){
						let phase = p == 0 ? codePhaseMov : codePhaseAct;
						for(let team=1; team<arrGameBorgs.length;team++){
							isLogged = team == 1;
							//ConLog("GamePlayTick, TEAM: "+team+", PHASE: "+phase+" ====================================================================================");
							//ConLog(arrGameBorgPrograms);
							let arrTeamProgs = [];
							for(let b=0; b<arrGameBorgs[team].length; b++){
								let currentBorg = arrGameBorgs[team][b];
								let progSplit = arrGameBorgPrograms[team][b][p];
								if(currentBorg.IsAlive() && progSplit != null){
									arrGameTargetPathMove = [];
									arrGameTargetPathAim = [];
									let txtTick = (p == 0 ? "speed ("+currentBorg.tick_speed+"/"+currentBorg.base_speed+")" 
													: (p == 1 ? "cooldown ("+currentBorg.tick_cooldown+"/"+currentBorg.base_cooldown+")"  
													: ""));
									if((p == 0 && currentBorg.tick_speed <= 0) || (p == 1 && currentBorg.tick_cooldown <= 0)){
										isLogged = isLogged && team >= 1;
										phaseDone = false;
										hasPhaseBeenRun = true;
										if(progSplit != null && progSplit.length > 0){
											ConLog("GamePlayTick, BORG["+team+"]["+b+"], PHASE: "+phase+", "+txtTick+" ====================================================================================");
											ConLog(progSplit);
											RunProgramPhase(phase, progSplit, b, team);//, targetBorg);
										}
										currentBorg.tick_speed = p == 0 ? currentBorg.base_speed : currentBorg.tick_speed;
										currentBorg.tick_cooldown = p == 1 ? currentBorg.base_cooldown : currentBorg.tick_cooldown;
									} else {
										if(p == 0) currentBorg.tick_speed--;
										if(p == 1) currentBorg.tick_cooldown--;
									}
								}
							}
						}
					}

					//Display current state of the level
					if(hasPhaseBeenRun) LoadLevel(gameLevel);

					//Win Condition/s 
					let activeTeams = countMaxTeams-1;
					let winningTeam = null;
					for(let team=1; team<arrGameBorgs.length;team++){
						//ConLog("GamePlayTick TEAM "+team+" ====================================================================================");
						let teamHpPool = 0;
						for(let b=0; b<arrGameBorgs[team].length;b++){
							let sourceBorg = arrGameBorgs[team][b];
							teamHpPool += sourceBorg.cur_hp;
						}
						if(teamHpPool > 0){
							winningTeam = team;
						}else{
							activeTeams--;
						}
						//ConLog("Game Round "+gameRound+": activeTeams("+activeTeams+"), winningTeam("+winningTeam+")");
						arrGameTeamHpPools[team] = teamHpPool;
					}
					gameTick++;
					if(gameTick == maxGameTicks){
						gameTick = 0;
						gameRound++;
						$("#divGameRounds").html(gameRound);
					}
					let results = null;
					if(gameRound == maxGameRounds || activeTeams <= 1){
						results = (gameRound == maxGameRounds ? "Time!" 
								: (activeTeams == 0 ? "Draw!" 
								: (winningTeam > 1 ? "Womp Womp Womp"
								: (winningTeam == 1 ? "You Win!" : results))));
					}
					if(results != null){
						ConLog(" === Game Round "+gameRound+": activeTeams("+activeTeams+"), winningTeam("+winningTeam+")");
						EndGame(results);
					}
				}
			}


			//Initialize multiple Player Borgs before Play
			function GenerateSelectPlayerStartCoords(){
				let tempLevel = FindInActionArray(actionLevel, $("#playSelectedLevel").val());
				if (tempLevel != null){
					let lengthArrOptions = tempLevel.arrPlayerBorgPos.length;
					let selectCoords = lengthArrOptions == 1 ? "" : "<option value=\"n/a\" selected disabled>Selected Starting Coords</option>";
					for(let i=0; i<lengthArrOptions;i++){
						let txtSelected = lengthArrOptions > 1 ? "" : " selected ";
						selectCoords += "<option value=\""+i+"\""+txtSelected+">"+tempLevel.arrPlayerBorgPos[i].ToString()+"</option>";
					}
					return selectCoords;
				}
				return "No Level Found";
			}
			var idInitPlayerBorg = 0;
			var playInitBorgPoints = 0;
			var playInitBorgCount = 0;
			function UpdatePlayInitBorgData(){
				playInitBorgPoints = 0;
				playInitBorgCount = 0;
				let gamePlayerBorgs = $('.play-form-player').map(function() {return $(this);}).get();
				for(let i=0; i<gamePlayerBorgs.length;i++){
					let pbId = gamePlayerBorgs[i].data("id");
					let posId = $("#gamePlayerBorgStart"+pbId).val();
					let pBorgName = gamePlayerBorgs[i].find(":selected").val();
					let targetBorg = FindInActionArray(actionBorg, pBorgName); 
					if(targetBorg != null){
						playInitBorgPoints += targetBorg.GetTotalPoints(); //ConLog(targetBorg);
						playInitBorgCount++;
					}
				}
				$("#playInitBorgPoints").html(playInitBorgPoints);
				$("#playInitBorgCount").html(playInitBorgCount);
			}
			$(document).on("click", ".init-removal", function(event){
				UpdatePlayInitBorgData();
				if(playInitBorgCount < (playLevelMaxPlayerBorgs)){
					$("#btnAddPlayerBorgInitialize").show();
				}
			});
			$(document).on("click", ".play-form-player", function(event){
				UpdatePlayInitBorgData();
			});
			function AddPlayerBorgInitialize(selectedBorg = ""){
				let sectionRemove = idInitPlayerBorg== 0 ? "" : HtmlRemoveToggleable(idInitPlayerBorg, "gamePB", "init-p", "init-removal");
				let returnHtml = 
					"<div class=\"form-group row play-form-init init-p-"+idInitPlayerBorg+"\">"+
					"	<label for=\"gamePlayerBorg"+idInitPlayerBorg+"\" class=\"col-sm-2 col-form-label\""+
					"		title=\"Player Borg\"> Player Borg"+sectionRemove+
					"	</label>"+
					"	<div class=\"col-sm-10 px-0\">"+
					"		<select id=\"gamePlayerBorg"+idInitPlayerBorg+"\" data-id=\""+idInitPlayerBorg+"\" class=\"play-form-player form-control\">"+GenerateSelectBorgs(selectedBorg)+"</select> "+
					"	</div>"+
					"</div>"+
					"<div class=\"form-group row play-form-init init-p-"+idInitPlayerBorg+"\">"+
					"	<label class=\"col-sm-2 col-form-label\""+
					"		title=\"Player Starting Coordinates\"> Player Starting Coordinates"+
					"	</label>"+
					"	<div class=\"col-sm-10 container px-0\">"+
					"		<select id=\"gamePlayerBorgStart"+idInitPlayerBorg+"\" class=\"form-control\">"+GenerateSelectPlayerStartCoords()+"</select> "+
					"	</div>"+
					"</div>"+
					"<div id=\"divSelectionPlayInitializeBorgs\">"+"</div>";
				//$("#divInitializeBorgEnd")[0].outerHTML = returnHtml;
				$("#divSelectionPlayInitializeBorgs")[0].outerHTML = returnHtml;
				idInitPlayerBorg++;
				UpdatePlayInitBorgData();
				if(playInitBorgCount >= (playLevelMaxPlayerBorgs)){
					$("#btnAddPlayerBorgInitialize").hide();
				}else{
					$("#btnAddPlayerBorgInitialize").show();
				}
			}
			$("#btnAddPlayerBorgInitialize").click(function(){
				AddPlayerBorgInitialize();
			});
			function PlayFormInitialize(){
				let selectedPlayerBorgString = $("#playSelectedBorg").val();
				let arrSelectedPlayerBorgs = SplitTrim(selectedPlayerBorgString); //ConLog("arrSelectedPlayerBorgs: "); ConLog(arrSelectedPlayerBorgs);
				let returnHtml = "";
				idInitPlayerBorg = 0;
				playInitBorgPoints = 0;
				playInitBorgCount = 0;
				arrSelectedPlayerBorgs.forEach(pBorg => {
					AddPlayerBorgInitialize(pBorg);
				});
			}
			$("#btnPlayInitialize").click(function(){
				let selectedLevelString = $("#playSelectedLevel").val();
				if(selectedLevelString != ""){
					let selectedPlayerBorgString = $("#playSelectedBorg").val();
					if(selectedPlayerBorgString != ""){
						let selectedLevel = FindInActionArray(actionLevel, selectedLevelString);
						let arrSelectedPlayerBorgs = SplitTrim(selectedPlayerBorgString);
						if(arrSelectedPlayerBorgs.length <= selectedLevel.maxPlayerBorgs){
							let totalPoints = 0;
							arrSelectedPlayerBorgs.forEach(pBorg => {
								let tempBorg = FindInActionArray(actionBorg, pBorg);
								totalPoints += tempBorg != null ? tempBorg.GetTotalPoints() : 0;
							});
							if(totalPoints <= selectedLevel.maxPoints){
								$(".play-form-init").remove();
								ClearViewSelection();
								$("#divSelectionPlay").slideUp();
								$("#divSelectionPlayInitialize").slideDown();
								PlayFormInitialize();
							}else alert("Selected Borg/s exceed Level's max point limit.");
						}else alert("Too many Borgs selected.");
					}else alert("No Borg selected.");
				}else alert("No Level selected.");
			});
			//Game Play Setup 1 - Teams
			function GameTeamSetup(isInitial = false){
				let lastGameBorgID = 0;
				for(let team=1; team<arrGameBorgs.length;team++){
					ConLog("GameTeamSetup, TEAM "+team+", PRE-PHASE SETUP ====================================================================================");
					let arrTeamProgs = [];
					let arrLastGameBorgID = [0, 0, 0];
					for(let b=0; b<arrGameBorgs[team].length;b++){
						let sourceBorg = arrGameBorgs[team][b];

						if(isInitial){
							//Split Borgs' Programs
							ConLog("GameTeamSetup Prog Split sourceBorg: arrGameBorgs["+team+"]["+b+"]"); ConLog(sourceBorg);
							let sourceProgram = FindInActionArray(actionProgram, sourceBorg.program); ConLog("GamePlayTick sourceProgram: "); ConLog(sourceProgram);
							let inverseTargets = team == 2; //ConLog(sourceBorg.program);
							let progSplit = SplitProgram(sourceProgram, inverseTargets);
							let progMov = progSplit[0];//Movement Phase
							let progAct = progSplit[1];//Action Phase
							//ConLog("GameTeamSetup progMov: "); ConLog(progMov);
							//ConLog("GameTeamSetup progAct: "); ConLog(progAct);
							arrTeamProgs.push(progSplit);

							if(b == arrLastGameBorgID[team]){
								let htmlBorgHPStart = 
									"<div class=\"row text-center col-12 mb-1 play-borg-hp \">"+
									"	<div class=\"col-2\">"+
									"		<span id=\"divGameBorgsHpT"+team+"B"+b+"\"></span>"+
									"	</div>"
									//"	<div class=\"col-10\">"
									;
								for (let i = 0; i < 10; i++) {
									htmlBorgHPStart += 
									"		<div id=\"divGameBorgsHpT"+team+"B"+b+"Bar"+i+"\" class=\"col-1 border-mute bg-success\"></div>";
								}
								htmlBorgHPStart += 
									//"	</div>"+
									"</div>";
								$("#divBorgTeam"+team+"HPEnd")[0].outerHTML = htmlBorgHPStart+"<div id=\"divBorgTeam"+team+"HPEnd\"></div>";
								arrLastGameBorgID[team]++;
							}
							/*if(b == lastGameBorgID){
								lastGameBorgID++;
								let divBorgTeamHPEnd = 
									"<div class=\"row play-borg-hp text-center\">"+
									"	<div class=\"col-6\">"+
									"		<span id=\"divGameBorgsPlayer"+b+"\"></span>"+
									"	</div>"+
									"	<div class=\"col-6\">"+
									"		<span id=\"divGameBorgsEnemy"+b+"\"></span>"+
									"	</div>"+
									"</div>";
								$("#divBorgTeamHPEnd")[0].outerHTML = divBorgTeamHPEnd+"<div id=\"divBorgTeamHPEnd\"></div>";
							}//*/
						}

						SetGameBorgHp(sourceBorg); //ConLog("arrGameBorgs: "); ConLog(arrGameBorgs);
					}
					if(isInitial){
						//Split Borgs' Programs
						arrGameBorgPrograms[team] = arrTeamProgs;
					}
				}
				if(isInitial){
					//$("#divBorgTeamHPEnd") += "<div id=\"divBorgTeamHPEnd\"></div>";
				}
			}
			//Game Play Setup 0 - Main
			function SetGameObjects(overrideLevel = "", overrideBorg = ""){ ConLog("[SetGameObjects]");
				let isOveridden = overrideLevel != "" || overrideBorg != "";
				let err = ($("#playSelectedLevel").val() == ""  ? "Selecting a Level is Required." 
						: ($("#playSelectedBorg").val() == "" ? "Selecting a Borg is Required." 
						: ""));
				if(err == "" || isOveridden){
					gameLevel = null;
					gameGrid = null;
					arrGameBorgs[1] = [];
					arrGameBorgs[2] = [];
					countMaxGameBorgs = 0;
					let selectedLevel = overrideLevel != "" ? overrideLevel : $("#playSelectedLevel").val();
					let selectedBorg = overrideBorg != "" ? overrideBorg : $("#playSelectedBorg").val();

					let tempLevel = FindInActionArray(actionLevel, selectedLevel);
					tempLevel = tempLevel != null ? tempLevel.Duplicate() : null;
					if(playInitBorgCount > tempLevel.maxPlayerBorgs){
						alert("Borg count is over this levels limit");
					}else if(playInitBorgPoints > tempLevel.maxPoints){
						alert("Borg points is over this levels limit");
					}else{
						$("#divGameRounds").html(gameRound);
						gameLevel = tempLevel;
						for(let i=0; i<=countMaxTeams;i++){
							arrGameBorgTrailAim[i] = [];
						}
					
						let targetTeam = 1;
						//let stringReturn = actionLevelInner;
						let gamePlayerBorgs = $('.play-form-player').map(function() {return $(this);}).get();
						for(let i=0; i<gamePlayerBorgs.length;i++){
							let pbId = gamePlayerBorgs[i].data("id");
							let posId = $("#gamePlayerBorgStart"+pbId).val();
							let pBorgName = gamePlayerBorgs[i].find(":selected").val();
							let targetBorg = FindInActionArray(actionBorg, pBorgName).Duplicate(); ConLog(targetBorg);
							targetBorg.position = new Coordinate(tempLevel.arrPlayerBorgPos[posId].x, tempLevel.arrPlayerBorgPos[posId].y);
							arrGameBorgs[targetTeam].push(targetBorg);
							arrGameBorgTrailAim[targetTeam].push(null);
							countMaxGameBorgs++;
						}

						targetTeam = 2;
						for(let h=0; h<gameLevel.arrEnemyBorgNames.length; h++){
							for(let i=0; i<arrBorgs.length; i++){
								let enemyBorgName = gameLevel.arrEnemyBorgNames[h]; //ConLog("enemyBorgName: "+enemyBorgName);
								//ConLog("gameLevel.arrEnemyBorgNames["+h+"]: "); ConLog(gameLevel.arrEnemyBorgNames[h]);
								if(arrBorgs[i].name == enemyBorgName) {
									arrGameBorgs[targetTeam].push(arrBorgs[i].Duplicate());
									arrGameBorgTrailAim[targetTeam].push(null);
									countMaxGameBorgs++;
									//ConLog("arrGameBorgs["+targetTeam+"]: "); ConLog(arrGameBorgs[targetTeam]);
									let arrGameBorgsTeamLatest = arrGameBorgs[targetTeam].length-1;
									let targetBorg = arrGameBorgs[targetTeam][arrGameBorgsTeamLatest]; //ConLog("arrGameBorgs["+targetTeam+"]["+arrGameBorgsTeamLatest+"]: "); ConLog(targetBorg);
									let targetPos = gameLevel.arrEnemyBorgPos[h]; //ConLog("targetPos: "+targetPos.ToString());
									targetBorg.position = new Coordinate(targetPos.x, targetPos.y);
								}
							}
						}
						//Reset Level Assets
						$(".play-borg-hp").remove();
						$(".game-log").remove();
						GameTeamSetup(true);
						gameGrid = FindInActionArray(actionGrid, gameLevel.gridName);
						gameGrid = gameGrid != null ? gameGrid.Duplicate() : null;
						gameGridData = [];
						for(let y=0; y<gameGrid.maxCoordinates.y; y++){
							for(let x=0; x<gameGrid.maxCoordinates.x; x++){
								gameGridData[x] ??= [];
								gameGridData[x][y] = new GridData(x, y);
							}
						}
						UpdateGameGridNeighbors();
						LoadLevel(gameLevel);
						$("#divPlayControls").show();
						$("#divSelectionPlayInitialize").slideUp();
					}
				}else{
					alert(err);
				}
			}
			$("#btnPlayGame").click(function(){
				let errMsg = "";
				let arrPosIds = [];
				let gamePlayerBorgs = $('.play-form-player').map(function() {return $(this);}).get();
				for(let i=0; i<gamePlayerBorgs.length && errMsg == "";i++){
					if(gamePlayerBorgs[i].val() == "n/a"){
						errMsg = "You have an unselected Borg";
					}else{
						let pbId = gamePlayerBorgs[i].data("id");
						let posId = $("#gamePlayerBorgStart"+pbId).val(); //ConLog(posId, true);
						arrPosIds.push(posId);
						errMsg = posId == null ? "All Borgs must have a starting position." : "";
					}
				}//ConLog("errMsg: "+errMsg, true);
				if(errMsg == ""){
					let alreadySeen = {};
					let hasDuplicate = false;
					arrPosIds.forEach(pos => alreadySeen[pos] ? hasDuplicate = true : alreadySeen[pos] = true); //Detect Duplicate
					ConLog(arrPosIds);ConLog(alreadySeen);
					if(!hasDuplicate){
						ClearViewSelection();
						SetGameObjects();
						isGamePaused = false;
						isGameEnded = false;
						$("#btnGameTimer").show();
						//let sourceBorg = arrGameBorgs[1][0];
					}else {
						errMsg = "Borgs cannot have the same starting position.";
					} 
				}
				if(errMsg != "") alert(errMsg); 
			});
			$("#btnPlaySelection").click(function(){
				$("#divSelectionPlay").slideDown();
				$("#divSelectionPlayInitialize").slideUp();
			});
			$("#btnGameSkipRound").click(function(){
				//ConLog("=== btnGameSkipRound ==============================================================");
				for (let i = 0; i < maxGameTicks; i++) {
					GamePlayTick(true);
				}
			});
			var gameTimerStart = Date.now();
			$("#btnGameTimer").click(function(){
				//ConLog("btnGameTimer=================================================================");
				$(this).hide();
				gameTimerStart = Date.now();
				let startMili = Date.now() - gameTimerStart;
				ConLog("Game Timer START: "+startMili);
				gameInterval = setInterval(GamePlayTick, userDataPrefsTickInterval);
			});
			$("#btnGamePause").click(function(){
				if(isGamePaused) $(this).html("Pause");
				else $(this).html("Resume");
				isGamePaused = !isGamePaused;
			});

















			// Force Update
			$("#btnForceUpdateDefault").click(function(){
				let isConfirmed = window.confirm("All Defaults will be overwritten. Continue Force Update?");
				if (isConfirmed) {
					for (let d = 0; d < arrDefaultBorgs.length; d++) 
						UpdateClassStringInArray(actionBorg, arrDefaultBorgs[d], true, true);
					UpdateAllClassTables(actionBorg);

					for (let d = 0; d < arrDefaultPrograms.length; d++) 
						UpdateClassStringInArray(actionProgram, arrDefaultPrograms[d], true, true);
					UpdateAllClassTables(actionProgram);

					for (let d = 0; d < arrDefaultGrids.length; d++) 
						UpdateClassStringInArray(actionGrid, arrDefaultGrids[d], true, true);
					UpdateAllClassTables(actionGrid);

					for (let d = 0; d < arrDefaultLevels.length; d++) {
						//ConLog("btnForceUpdateDefault, "); ConLog(arrDefaultLevels[d]);
						UpdateClassStringInArray(actionLevel, arrDefaultLevels[d], true, true);
					}
					UpdateAllClassTables(actionLevel);
					$("#playDataLevelProgress").html(CheckUserProgress());
				}
				isResetOngoing = false;
			});
			
			$("#btnResetUserData").click(function(){
				userDataMaxPoints = 1;
				UpdateUserData(true);
				$("#playDataLevelProgress").html(CheckUserProgress());
				//ConLog(localStorage.getItem(storageUserData));
			});
			function CheckUserProgress(){
				let latestLevelUnlock = "Up to date.";
				let maxIndex = storageLevelUnlocksDefault.length - 1;
				for (let d = maxIndex; d >= 0 ; d--) {
					let checkLevel = FindInActionArray(actionLevel, storageLevelUnlocksDefault[d]);
					if(checkLevel != null){
						if(checkLevel.isUnlocked == 1){
							if(d == maxIndex) return latestLevelUnlock;
							else return storageLevelUnlocksDefault[d];
						} 
					}
					latestLevelUnlock = storageLevelUnlocksDefault[d];
				}
				//ConLog("test");
				return latestLevelUnlock;
			}
			$("#btnManualCheckLevelProgress").click(function(){
				ConLog(CheckUserProgress());
			});


			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 



			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 













			
			
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 			
			//Check Storage if there are any existing Class objects, else set the default ones
			var defaultString = arrDefaultBorgs[0];
			for (let d = 1; d < arrDefaultBorgs.length; d++) 
				defaultString += actionBorg+arrDefaultBorgs[d];
			//ConLog("---=== TEST Borgs: ");
			StorageStringToArray(storageBorgs, defaultString);
			InsertArrayIntoStorage(actionBorg);
			//DisplayArr(actionBorg);

			defaultString = arrDefaultGrids[0];
			for (let d = 1; d < arrDefaultGrids.length; d++) 
				defaultString += actionGrid+arrDefaultGrids[d];
			//ConLog("---=== TEST Grids: ");
			StorageStringToArray(storageGrids, defaultString); 
			InsertArrayIntoStorage(actionGrid);
			//DisplayArr(actionGrid);
			//DisplayArr(actionCell);

			//ConLog(arrDefaultLevels);
			defaultString = arrDefaultLevels[0];
			for (let d = 1; d < arrDefaultLevels.length; d++) 
				defaultString += actionLevel+arrDefaultLevels[d];
			//ConLog("---=== TEST Levels: ");
			StorageStringToArray(storageLevels, defaultString); 
			InsertArrayIntoStorage(actionLevel);
			//DisplayArr(actionLevel);
			$("#playDataLevelProgress").html(CheckUserProgress());

			defaultString = arrDefaultPrograms[0];
			for (let d = 1; d < arrDefaultPrograms.length; d++) 
				defaultString += actionProgram+arrDefaultPrograms[d];
			//ConLog("---=== TEST Programs: ");
			StorageStringToArray(storagePrograms, defaultString); 
			InsertArrayIntoStorage(actionProgram);
			//DisplayArr(actionProgram);

			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			


			// === === === Toggles / UI Setup === === === =====================================================================================================================================================================================================================================================================================================================================
			//	Menu Toggles
			$("#stickyMenu").click(function(){
				$(this).hide();
				$('#sidebarMenu').show();
			});
			$("#closeMenu").click(function(){
				$('#sidebarMenu').hide();
				$('#stickyMenu').show();
			});

			function ShowSection(section){
				$('.sections').hide();
				$('#'+section).show();
				if(section == "sectionHome"){
					//$('#sectionPlay').show();
					UpdateAllClassTables(actionBorg);
					UpdateAllClassTables(actionLevel);
				} else if(section == "sectionPlay"){
					UpdateAllClassTables(actionBorg);
					UpdateAllClassTables(actionLevel);
				} else if(section == "sectionBorgs"){
					UpdateAllClassTables(actionBorg);
				} else if(section == "sectionPrograms"){
					UpdateAllClassTables(actionProgram);
				} else if(section == "sectionLevels"){
					UpdateAllClassTables(actionLevel);
				} else if(section == "sectionGrids"){
					UpdateAllClassTables(actionGrid);
				} else if(section == "sectionManual"){
					UpdateAllClassTables(section);
				}
			}
			$("#menuSectionHome").click(function(){
				ShowSection("sectionHome");
			});
			$("#menuSectionPlay").click(function(){
				ShowSection("sectionPlay");
			});
			$("#menuSectionBorgs").click(function(){
				ShowSection("sectionBorgs");
			});
			$("#menuSectionPrograms").click(function(){
				ShowSection("sectionPrograms");
			});
			$("#menuSectionLevels").click(function(){
				ShowSection("sectionLevels");
			});
			$("#menuSectionGrids").click(function(){
				ShowSection("sectionGrids");
			});
			$("#menuSectionManual").click(function(){
				ShowSection("sectionManual");
			});
			$("#menuSectionSettings").click(function(){
				ShowSectionSettings();
			});

			// Form Toggles
			function ToggleClassForm(target){
				if ($(target).hasClass("is-active")) {
					$(target).removeClass("is-active");
					$(target).slideUp();//.hide();
				}
				else {
					$(target).addClass("is-active");
					$(target).slideDown();//.show();
				}
			}
			$("#btnToggleBorgForm").click(function(){
				ToggleClassForm("#"+$(this).data("target"));
			});
			$("#btnToggleProgForm").click(function(){
				ToggleClassForm("#"+$(this).data("target"));
			});
			$("#btnToggleLevelForm").click(function(){
				ToggleClassForm("#"+$(this).data("target"));
			});
			$("#btnToggleGridForm").click(function(){
				ToggleClassForm("#"+$(this).data("target"));
			});

			//UI Setup
			$("#levelEnemyBorgs0").html(GenerateSelectBorgs());
			$("#levelGridName").html(GenerateSelectGrids());
			$("#gridFormCellType").html(GenerateSelectCells());
			GridFormSyncPreviewAndText(true);

			//Initial Level Previews
			/*let levelA = FindLevel(defLevelNameA); //ConLog("levelA: "); ConLog(levelA);
			let levelB = FindLevel(defLevelName0);
			LoadLevel(levelA, "#levelPreview", false);
			LoadLevel(levelB);
			//*/

			//Debugging
			//$("#playSelectedLevel").val(defLevelNameE);
			//$("#playSelectedLevel").val(defLevelNameIntro0);//defLevelNameIntro0
			
			/*
			let debugLevelName = defLevelName0;
			$("#playSelectedLevel").val(debugLevelName);
			$("#playSelectedBorg").val(defBorgName6+","+defBorgName7);
			let tempLevel = FindInActionArray(actionLevel, debugLevelName);
			$("#playLevelMaxPoints").html(tempLevel.maxPoints);
			$("#playLevelMaxPlayerBorgs").html(tempLevel.maxPlayerBorgs);
			//*/
			/*
			let debugLevelName = "Intersection";
			$("#playSelectedLevel").val(debugLevelName);
			$("#playSelectedBorg").val("UBv2");
			let tempLevel = FindInActionArray(actionLevel, debugLevelName);
			$("#playLevelMaxPoints").html(tempLevel.maxPoints);
			$("#playLevelMaxPlayerBorgs").html(tempLevel.maxPlayerBorgs);
			//*/
			
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			// SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • SPOILERS • 
			
			$('#sectionSettings').hide();
		});
	</script>
</body>

</html>